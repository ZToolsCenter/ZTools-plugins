import{K as ll,Q as cl,L as ul,F as dl,y as pl}from"./index-4d792b2f.js";import{E as fl}from"./overlay-64b767d0.js";import{E as hl}from"./divider-9ec45574.js";import{E as gl}from"./avatar-013be683.js";import{u as Ms}from"./useNoteStore-185ebad8.js";import{f as $e,u as F,h as se,i as be,W as tt,m as Ce,O as Co,l as cn,a as Cs,ab as un,S as xt,X as dn,aq as To,c as nt,r as st,U as De,k as K,n as Fe,j as Rn,t as gt,v as gr,ao as Ts,a9 as et,d as Os,p as Rs,q as ml,w as io,a2 as bl,ap as yl,ar as Ns,as as Ls,ag as Is,K as vl,L as wl,ad as xl}from"./vue-5f6c84d3.js";import{N as me,m as oe,M as Xe,a as Lt,b as kt,P as Ne,c as Le,d as kl,g as El,e as pi,f as Al,h as _l,i as Oo,E as at,D as yn,j as It,k as Sl,S as Pe,l as Hs,n as Ro,F as Ke,o as ht,T as je,p as Bs,q as Ds,r as Ml,t as fe,s as so,w as pn,u as Ps,v as ao,x as Cl,y as Tl,z as Ol,V as No,A as Rl,B as Nl,C as Ll,G as Il,H as Lo,I as Io,J as Ho,K as Hl,L as Bl,O as kn,Q as Dl}from"./tiptap-340bcc0f.js";import"./tools-8f8edc89.js";import"./index-71ce9d2a.js";const Pl=me.create({name:"doc",topNode:!0,content:"block+"}),jl=me.create({name:"text",group:"inline"}),$l=me.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",oe(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),zl=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,Ul=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,Wl=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,Fl=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,Kl=Xe.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return["strong",oe(this.options.HTMLAttributes,e),0]},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Lt({find:zl,type:this.type}),Lt({find:Wl,type:this.type})]},addPasteRules(){return[kt({find:Ul,type:this.type}),kt({find:Fl,type:this.type})]}}),Vl=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,Gl=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,ql=Xe.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",oe(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Lt({find:Vl,type:this.type})]},addPasteRules(){return[kt({find:Gl,type:this.type})]}}),Xl=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,Zl=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,Jl=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,Ql=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,Yl=Xe.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",oe(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Lt({find:Xl,type:this.type}),Lt({find:Jl,type:this.type})]},addPasteRules(){return[kt({find:Zl,type:this.type}),kt({find:Ql,type:this.type})]}}),ec=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,tc=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,nc=Xe.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",oe(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Lt({find:ec,type:this.type})]},addPasteRules(){return[kt({find:tc,type:this.type})]}}),rc=Xe.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",oe(this.options.HTMLAttributes,e),0]},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),oc="aaa1rp3barth4b_ott3vie4c1le2ogado5udhabi7c_ademy5centure6ountant_s9o1tor4d_s1ult4e_g1ro2tna4f_l1rica5g_akhan5ency5i_g1rbus3force5tel5kdn3l_faromeo7ibaba4pay4lfinanz6state5y2sace3tom5m_azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o_l2partments8p_le4q_uarelle8r_ab1mco4chi3my2pa2t_e3s_da2ia2sociates9t_hleta5torney7u_ction5di_ble3o3spost5thor3o_s4vianca6w_s2x_a2z_ure5ba_by2idu3namex3narepublic11d1k2r_celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b_c1t1va3cg1n2d1e_ats2uty4er2ntley5rlin4st_buy5t2f1g1h_arti5i_ble3d1ke2ng_o3o1z2j1lack_friday9ockbuster8g1omberg7ue3m_s1w2n_pparibas9o_ats3ehringer8fa2m1nd2o_k_ing5sch2tik2on4t1utique6x2r_adesco6idgestone9oadway5ker3ther5ussels7s1t1uild_ers6siness6y1zz3v1w1y1z_h3ca_b1fe2l_l1vinklein9m_era3p2non3petown5ital_one8r_avan4ds2e_er_s4s2sa1e1h1ino4t_ering5holic7ba1n1re2s2c1d1enter4o1rn3f_a1d2g1h_anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i_priani6rcle4sco3tadel4i_c2y_eats7k1l_aims4eaning6ick2nic1que6othing5ud3ub_med6m1n1o_ach3des3ffee4llege4ogne5m_cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking_channel11l1p2rsica5untry4pon_s4rses6pa2r_edit_card4union9icket5own3s1uise_s6u_isinella9v1w1x1y_mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e_al_er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si_gn4v2hl2iamonds6et2gital5rect_ory7scount3ver5h2y2j1k1m1np2o_cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c_o2deka3u_cation8e1g1mail3erck5nergy4gineer_ing9terprises10pson4quipment8r_icsson6ni3s_q1tate5t_isalat7u_rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n_s2rm_ers5shion4t3edex3edback6rrari3ero6i_at2delity5o2lm2nal1nce1ial7re_stone6mdale6sh_ing5t_ness6j1k1lickr3ghts4r2orist4wers5y2m1o_o_d_network8tball6rd1ex2sale4um3undation8x2r_ee1senius7l1ogans4ntdoor4ier7tr2ujitsu5n_d2rniture7tbol5yi3ga_l_lery3o1up4me_s3p1rden4y2b_iz3d_n2e_a1nt_ing5orge5f1g_ee3h1i_ft_s3ves2ing5l_ass3e1obal2o4m_ail3bh2o1x2n1odaddy5ld_point6f2o_dyear5g_le4p1t1v2p1q1r_ainger5phics5tis4een3ipe3ocery4up4s1t1u_ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc_bank7ealth_care8lp1sinki6re1mes5gtv3iphop4samitsu7tachi5v2k_t2m1n1ockey4ldings5iday5medepot5goods5s_ense7nda3rse3spital5t_ing5t_eles2s3mail5use3w2r1sbc3t1u_ghes5yatt3undai7ibm2cbc2e1u2d1e_ee3fm2kano4l1m_amat4db2mo_bilien9n_c1dustries8finiti5o2g1k1stitute6urance4e4t_ernational10uit4vestments10o1piranga7q1r_ish4s_maili5t_anbul7t_au2v3jaguar4va3cb2e_ep2tzt3welry6io2ll2m_p2nj2o_bs1urg4t1y2p_morgan6rs3uegos4niper7kaufen5ddi3e_rryhotels6logistics9properties14fh2g1h1i_a1ds2m1nder2le4tchen5wi3m1n1oeln3matsu5sher5p_mg2n2r_d1ed3uokgroup8w1y_oto4z2la_caixa5mborghini8er3ncaster5ia3d_rover6xess5salle5t_ino3robe5w_yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i_dl2fe_insurance9style7ghting6ke2lly3mited4o2ncoln4de2k2psy3ve1ing5k1lc1p2oan_s3cker3us3l1ndon4tte1o3ve3pl_financial11r1s1t_d_a3u_ndbeck6xe1ury5v1y2ma_cys3drid4if1son4keup4n_agement7go3p1rket_ing3s4riott5shalls7serati6ttel5ba2c_kinsey7d1e_d_ia3et2lbourne7me1orial6n_u2rckmsd7g1h1iami3crosoft7l1ni1t2t_subishi9k1l_b1s2m_a2n1o_bi_le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to_rcycles9v_ie4p1q1r1s_d2t_n1r2u_seum3ic3tual5v1w1x1y1z2na_b1goya4me2tura4vy3ba2c1e_c1t_bank4flix4work5ustar5w_s2xt_direct7us4f_l2g_o2hk2i_co2ke1on3nja3ssan1y5l1o_kia3rthwesternmutual14on4w_ruz3tv4p1r_a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan_group9dnavy5lo3m_ega4ne1g1l_ine5oo2pen3racle3nge4g_anic5igins6saka4tsuka4t2vh3pa_ge2nasonic7ris2s1tners4s1y3ssagens7y2ccw3e_t2f_izer5g1h_armacy6d1ilips5one2to_graphy6s4ysio5ics1tet2ures6d1n_g1k2oneer5zza4k1l_ace2y_station9umbing5s3m1n_c2ohl2ker3litie5rn2st3r_america6xi3ess3ime3o_d_uctions8f1gressive8mo2perties3y5tection8u_dential9s1t1ub2w_c2y2qa1pon3uebec3st5racing4dio4e_ad1lestate6tor2y4cipes5d_stone5umbrella9hab3ise_n3t2liance6n_t_als5pair3ort3ublican8st_aurant8view_s5xroth6ich_ardli6oh3l1o1p2o_cher3ks3deo3gers4om3s_vp3u_gby3hr2n2w_e2yukyu6sa_arland6fe_ty4kura4le1on3msclub4ung5ndvik_coromant12ofi4p1rl2s1ve2xo3b_i1s2c_a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e_arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x_y3fr2g1h_angrila6rp2w2ell3ia1ksha5oes2p_ping5uji3w_time7i_lk2na1gles5te3j1k_i_n2y_pe4l_ing4m_art3ile4n_cf3o_ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa_ce3ort2t3r_l2s1t_ada2ples4r1tebank4farm7c_group6ockholm6rage3e3ream4udio2y3yle4u_cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y_dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x_i3c_i2d_k2eam2ch_nology8l1masek5nnis4va3f1g1h_d1eater2re6iaa2ckets5enda4ffany5ps2res2ol4j_maxx4x2k_maxx5l1m_all4n1o_day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r_ade1ing4ining5vel_channel7ers_insurance16ust3v2t1ube2i1nes3shu4v_s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va_cations7na1guard7c1e_gas3ntures6risign5mögensberater2ung14sicherung10t2g1i_ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lkswagen7vo3te1ing3o2yage5u_elos6wales2mart4ter4ng_gou5tch_es6eather_channel12bcam3er2site5d_ding5ibo2r3f1hoswho6ien2ki2lliamhill9n_dows4e1ners6me2olterskluwer11odside6rk_s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u_tube6t1un3za_ppos4ra3ero3ip2m1one3uerich6w2",ic="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5تصالات6رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत_म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里_大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",fn=(e,t)=>{for(const n in t)e[n]=t[n];return e},lo="numeric",co="ascii",uo="alpha",lr="asciinumeric",qn="alphanumeric",po="domain",js="emoji",sc="scheme",ac="slashscheme",fi="whitespace";function lc(e,t){return e in t||(t[e]=[]),t[e]}function Wt(e,t,n){t[lo]&&(t[lr]=!0,t[qn]=!0),t[co]&&(t[lr]=!0,t[uo]=!0),t[lr]&&(t[qn]=!0),t[uo]&&(t[qn]=!0),t[qn]&&(t[po]=!0),t[js]&&(t[po]=!0);for(const r in t){const o=lc(r,n);o.indexOf(e)<0&&o.push(e)}}function cc(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}function Te(e){e===void 0&&(e=null),this.j={},this.jr=[],this.jd=null,this.t=e}Te.groups={};Te.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let r=0;r<t.jr.length;r++){const o=t.jr[r][0],i=t.jr[r][1];if(i&&o.test(e))return i}return t.jd},has(e,t){return t===void 0&&(t=!1),t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let o=0;o<e.length;o++)this.tt(e[o],t,n,r)},tr(e,t,n,r){r=r||Te.groups;let o;return t&&t.j?o=t:(o=new Te(t),n&&r&&Wt(t,n,r)),this.jr.push([e,o]),o},ts(e,t,n,r){let o=this;const i=e.length;if(!i)return o;for(let s=0;s<i-1;s++)o=o.tt(e[s]);return o.tt(e[i-1],t,n,r)},tt(e,t,n,r){r=r||Te.groups;const o=this;if(t&&t.j)return o.j[e]=t,t;const i=t;let s,a=o.go(e);if(a?(s=new Te,fn(s.j,a.j),s.jr.push.apply(s.jr,a.jr),s.jd=a.jd,s.t=a.t):s=new Te,i){if(r)if(s.t&&typeof s.t=="string"){const l=fn(cc(s.t,r),n);Wt(i,l,r)}else n&&Wt(i,n,r);s.t=i}return o.j[e]=s,s}};const W=(e,t,n,r,o)=>e.ta(t,n,r,o),Ue=(e,t,n,r,o)=>e.tr(t,n,r,o),hi=(e,t,n,r,o)=>e.ts(t,n,r,o),L=(e,t,n,r,o)=>e.tt(t,n,r,o),vt="WORD",fo="UWORD",Nn="LOCALHOST",ho="TLD",go="UTLD",cr="SCHEME",rn="SLASH_SCHEME",mr="NUM",$s="WS",Bo="NL",sn="OPENBRACE",An="OPENBRACKET",_n="OPENANGLEBRACKET",Sn="OPENPAREN",zt="CLOSEBRACE",an="CLOSEBRACKET",ln="CLOSEANGLEBRACKET",Ut="CLOSEPAREN",br="AMPERSAND",yr="APOSTROPHE",vr="ASTERISK",St="AT",wr="BACKSLASH",xr="BACKTICK",kr="CARET",Ct="COLON",Do="COMMA",Er="DOLLAR",ut="DOT",Ar="EQUALS",Po="EXCLAMATION",dt="HYPHEN",_r="PERCENT",Sr="PIPE",Mr="PLUS",Cr="POUND",Tr="QUERY",jo="QUOTE",$o="SEMI",wt="SLASH",Mn="TILDE",Or="UNDERSCORE",zs="EMOJI",Rr="SYM";var Us=Object.freeze({__proto__:null,WORD:vt,UWORD:fo,LOCALHOST:Nn,TLD:ho,UTLD:go,SCHEME:cr,SLASH_SCHEME:rn,NUM:mr,WS:$s,NL:Bo,OPENBRACE:sn,OPENBRACKET:An,OPENANGLEBRACKET:_n,OPENPAREN:Sn,CLOSEBRACE:zt,CLOSEBRACKET:an,CLOSEANGLEBRACKET:ln,CLOSEPAREN:Ut,AMPERSAND:br,APOSTROPHE:yr,ASTERISK:vr,AT:St,BACKSLASH:wr,BACKTICK:xr,CARET:kr,COLON:Ct,COMMA:Do,DOLLAR:Er,DOT:ut,EQUALS:Ar,EXCLAMATION:Po,HYPHEN:dt,PERCENT:_r,PIPE:Sr,PLUS:Mr,POUND:Cr,QUERY:Tr,QUOTE:jo,SEMI:$o,SLASH:wt,TILDE:Mn,UNDERSCORE:Or,EMOJI:zs,SYM:Rr});const en=/[a-z]/,Kr=/\p{L}/u,Vr=/\p{Emoji}/u,Gr=/\d/,gi=/\s/,mi=`
`,uc="️",dc="‍";let Xn=null,Zn=null;function pc(e){e===void 0&&(e=[]);const t={};Te.groups=t;const n=new Te;Xn==null&&(Xn=bi(oc)),Zn==null&&(Zn=bi(ic)),L(n,"'",yr),L(n,"{",sn),L(n,"[",An),L(n,"<",_n),L(n,"(",Sn),L(n,"}",zt),L(n,"]",an),L(n,">",ln),L(n,")",Ut),L(n,"&",br),L(n,"*",vr),L(n,"@",St),L(n,"`",xr),L(n,"^",kr),L(n,":",Ct),L(n,",",Do),L(n,"$",Er),L(n,".",ut),L(n,"=",Ar),L(n,"!",Po),L(n,"-",dt),L(n,"%",_r),L(n,"|",Sr),L(n,"+",Mr),L(n,"#",Cr),L(n,"?",Tr),L(n,'"',jo),L(n,"/",wt),L(n,";",$o),L(n,"~",Mn),L(n,"_",Or),L(n,"\\",wr);const r=Ue(n,Gr,mr,{[lo]:!0});Ue(r,Gr,r);const o=Ue(n,en,vt,{[co]:!0});Ue(o,en,o);const i=Ue(n,Kr,fo,{[uo]:!0});Ue(i,en),Ue(i,Kr,i);const s=Ue(n,gi,$s,{[fi]:!0});L(n,mi,Bo,{[fi]:!0}),L(s,mi),Ue(s,gi,s);const a=Ue(n,Vr,zs,{[js]:!0});Ue(a,Vr,a),L(a,uc,a);const l=L(a,dc);Ue(l,Vr,a);const c=[[en,o]],u=[[en,null],[Kr,i]];for(let d=0;d<Xn.length;d++)_t(n,Xn[d],ho,vt,c);for(let d=0;d<Zn.length;d++)_t(n,Zn[d],go,fo,u);Wt(ho,{tld:!0,ascii:!0},t),Wt(go,{utld:!0,alpha:!0},t),_t(n,"file",cr,vt,c),_t(n,"mailto",cr,vt,c),_t(n,"http",rn,vt,c),_t(n,"https",rn,vt,c),_t(n,"ftp",rn,vt,c),_t(n,"ftps",rn,vt,c),Wt(cr,{scheme:!0,ascii:!0},t),Wt(rn,{slashscheme:!0,ascii:!0},t),e=e.sort((d,p)=>d[0]>p[0]?1:-1);for(let d=0;d<e.length;d++){const p=e[d][0],m=e[d][1]?{[sc]:!0}:{[ac]:!0};p.indexOf("-")>=0?m[po]=!0:en.test(p)?Gr.test(p)?m[lr]=!0:m[co]=!0:m[lo]=!0,hi(n,p,p,m)}return hi(n,"localhost",Nn,{ascii:!0}),n.jd=new Te(Rr),{start:n,tokens:fn({groups:t},Us)}}function fc(e,t){const n=hc(t.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,o=[];let i=0,s=0;for(;s<r;){let a=e,l=null,c=0,u=null,d=-1,p=-1;for(;s<r&&(l=a.go(n[s]));)a=l,a.accepts()?(d=0,p=0,u=a):d>=0&&(d+=n[s].length,p++),c+=n[s].length,i+=n[s].length,s++;i-=d,s-=p,c-=d,o.push({t:u.t,v:t.slice(i-c,i),s:i-c,e:i})}return o}function hc(e){const t=[],n=e.length;let r=0;for(;r<n;){let o=e.charCodeAt(r),i,s=o<55296||o>56319||r+1===n||(i=e.charCodeAt(r+1))<56320||i>57343?e[r]:e.slice(r,r+2);t.push(s),r+=s.length}return t}function _t(e,t,n,r,o){let i;const s=t.length;for(let a=0;a<s-1;a++){const l=t[a];e.j[l]?i=e.j[l]:(i=new Te(r),i.jr=o.slice(),e.j[l]=i),e=i}return i=new Te(n),i.jr=o.slice(),e.j[t[s-1]]=i,i}function bi(e){const t=[],n=[];let r=0,o="0123456789";for(;r<e.length;){let i=0;for(;o.indexOf(e[r+i])>=0;)i++;if(i>0){t.push(n.join(""));let s=parseInt(e.substring(r,r+i),10);for(;s>0;s--)n.pop();r+=i}else e[r]==="_"?(t.push(n.join("")),r++):(n.push(e[r]),r++)}return t}const Ln={defaultProtocol:"http",events:null,format:yi,formatHref:yi,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function zo(e,t){t===void 0&&(t=null);let n=fn({},Ln);e&&(n=fn(n,e instanceof zo?e.o:e));const r=n.ignoreTags,o=[];for(let i=0;i<r.length;i++)o.push(r[i].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=o}zo.prototype={o:Ln,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=t!=null;let o=this.o[e];return o&&(typeof o=="object"?(o=n.t in o?o[n.t]:Ln[e],typeof o=="function"&&r&&(o=o(t,n))):typeof o=="function"&&r&&(o=o(t,n.t,n)),o)},getObj(e,t,n){let r=this.o[e];return typeof r=="function"&&t!=null&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function yi(e){return e}function Ws(e,t){this.t="token",this.v=e,this.tk=t}Ws.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"…":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e){return e===void 0&&(e=Ln.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toFormattedHref(e),r=e.get("tagName",n,t),o=this.toFormattedString(e),i={},s=e.get("className",n,t),a=e.get("target",n,t),l=e.get("rel",n,t),c=e.getObj("attributes",n,t),u=e.getObj("events",n,t);return i.href=n,s&&(i.class=s),a&&(i.target=a),l&&(i.rel=l),c&&fn(i,c),{tagName:r,attributes:i,content:o,eventListeners:u}}};function Pr(e,t){class n extends Ws{constructor(o,i){super(o,i),this.t=e}}for(const r in t)n.prototype[r]=t[r];return n.t=e,n}const vi=Pr("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),wi=Pr("text"),gc=Pr("nl"),Pt=Pr("url",{isLink:!0,toHref(e){return e===void 0&&(e=Ln.defaultProtocol),this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==Nn&&e[1].t===Ct}}),we=e=>new Te(e);function mc(e){let{groups:t}=e;const n=t.domain.concat([br,vr,St,wr,xr,kr,Er,Ar,dt,mr,_r,Sr,Mr,Cr,wt,Rr,Mn,Or]),r=[yr,ln,zt,an,Ut,Ct,Do,ut,Po,_n,sn,An,Sn,Tr,jo,$o],o=[br,yr,vr,wr,xr,kr,zt,Er,Ar,dt,mr,sn,_r,Sr,Mr,Cr,Tr,wt,Rr,Mn,Or],i=we(),s=L(i,Mn);W(s,o,s),W(s,t.domain,s);const a=we(),l=we(),c=we();W(i,t.domain,a),W(i,t.scheme,l),W(i,t.slashscheme,c),W(a,o,s),W(a,t.domain,a);const u=L(a,St);L(s,St,u),L(l,St,u),L(c,St,u);const d=L(s,ut);W(d,o,s),W(d,t.domain,s);const p=we();W(u,t.domain,p),W(p,t.domain,p);const f=L(p,ut);W(f,t.domain,p);const m=we(vi);W(f,t.tld,m),W(f,t.utld,m),L(u,Nn,m);const b=L(p,dt);W(b,t.domain,p),W(m,t.domain,p),L(m,ut,f),L(m,dt,b);const k=L(m,Ct);W(k,t.numeric,vi);const A=L(a,dt),S=L(a,ut);W(A,t.domain,a),W(S,o,s),W(S,t.domain,a);const O=we(Pt);W(S,t.tld,O),W(S,t.utld,O),W(O,t.domain,a),W(O,o,s),L(O,ut,S),L(O,dt,A),L(O,St,u);const h=L(O,Ct),R=we(Pt);W(h,t.numeric,R);const x=we(Pt),C=we();W(x,n,x),W(x,r,C),W(C,n,x),W(C,r,C),L(O,wt,x),L(R,wt,x);const E=L(l,Ct),T=L(c,Ct),B=L(T,wt);L(B,wt,E),W(l,t.domain,a),L(l,ut,S),L(l,dt,A),W(c,t.domain,a),L(c,ut,S),L(c,dt,A),W(E,t.domain,x),L(E,wt,x);const D=L(x,sn),V=L(x,An),U=L(x,_n),Z=L(x,Sn);L(C,sn,D),L(C,An,V),L(C,_n,U),L(C,Sn,Z),L(D,zt,x),L(V,an,x),L(U,ln,x),L(Z,Ut,x),L(D,zt,x);const ee=we(Pt),g=we(Pt),w=we(Pt),y=we(Pt);W(D,n,ee),W(V,n,g),W(U,n,w),W(Z,n,y);const H=we(),P=we(),G=we(),Y=we();return W(D,r),W(V,r),W(U,r),W(Z,r),W(ee,n,ee),W(g,n,g),W(w,n,w),W(y,n,y),W(ee,r,ee),W(g,r,g),W(w,r,w),W(y,r,y),W(H,n,H),W(P,n,g),W(G,n,w),W(Y,n,y),W(H,r,H),W(P,r,P),W(G,r,G),W(Y,r,Y),L(g,an,x),L(w,ln,x),L(y,Ut,x),L(ee,zt,x),L(P,an,x),L(G,ln,x),L(Y,Ut,x),L(H,Ut,x),L(i,Nn,O),L(i,Bo,gc),{start:i,tokens:Us}}function bc(e,t,n){let r=n.length,o=0,i=[],s=[];for(;o<r;){let a=e,l=null,c=null,u=0,d=null,p=-1;for(;o<r&&!(l=a.go(n[o].t));)s.push(n[o++]);for(;o<r&&(c=l||a.go(n[o].t));)l=null,a=c,a.accepts()?(p=0,d=a):p>=0&&p++,o++,u++;if(p<0)o-=u,o<r&&(s.push(n[o]),o++);else{s.length>0&&(i.push(qr(wi,t,s)),s=[]),o-=p,u-=p;const f=d.t,m=n.slice(o-u,o);i.push(qr(f,t,m))}}return s.length>0&&i.push(qr(wi,t,s)),i}function qr(e,t,n){const r=n[0].s,o=n[n.length-1].e,i=t.slice(r,o);return new e(i,n)}const yc=typeof console<"u"&&console&&console.warn||(()=>{}),vc="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",le={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function wc(){Te.groups={},le.scanner=null,le.parser=null,le.tokenQueue=[],le.pluginQueue=[],le.customSchemes=[],le.initialized=!1}function xi(e,t){if(t===void 0&&(t=!1),le.initialized&&yc(`linkifyjs: already initialized - will not register custom scheme "${e}" ${vc}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
 1. Must only contain digits, lowercase ASCII letters or "-"
 2. Cannot start or end with "-"
 3. "-" cannot repeat`);le.customSchemes.push([e,t])}function xc(){le.scanner=pc(le.customSchemes);for(let e=0;e<le.tokenQueue.length;e++)le.tokenQueue[e][1]({scanner:le.scanner});le.parser=mc(le.scanner.tokens);for(let e=0;e<le.pluginQueue.length;e++)le.pluginQueue[e][1]({scanner:le.scanner,parser:le.parser});le.initialized=!0}function Fs(e){return le.initialized||xc(),bc(le.parser.start,e,fc(le.scanner.start,e))}function Uo(e,t,n){if(t===void 0&&(t=null),n===void 0&&(n=null),t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new zo(n),o=Fs(e),i=[];for(let s=0;s<o.length;s++){const a=o[s];a.isLink&&(!t||a.t===t)&&i.push(a.toFormattedObject(r))}return i}function ki(e,t){t===void 0&&(t=null);const n=Fs(e);return n.length===1&&n[0].isLink&&(!t||n[0].t===t)}function kc(e){return new Ne({key:new Le("autolink"),appendTransaction:(t,n,r)=>{const o=t.some(u=>u.docChanged)&&!n.doc.eq(r.doc),i=t.some(u=>u.getMeta("preventAutolink"));if(!o||i)return;const{tr:s}=r,a=kl(n.doc,[...t]),{mapping:l}=a;if(El(a).forEach(({oldRange:u,newRange:d})=>{pi(u.from,u.to,n.doc).filter(b=>b.mark.type===e.type).forEach(b=>{const k=l.map(b.from),A=l.map(b.to),S=pi(k,A,r.doc).filter(E=>E.mark.type===e.type);if(!S.length)return;const O=S[0],h=n.doc.textBetween(b.from,b.to,void 0," "),R=r.doc.textBetween(O.from,O.to,void 0," "),x=ki(h),C=ki(R);x&&!C&&s.removeMark(O.from,O.to,e.type)});const p=Al(r.doc,d,b=>b.isTextblock);let f,m;if(p.length>1?(f=p[0],m=r.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ")):p.length&&r.doc.textBetween(d.from,d.to," "," ").endsWith(" ")&&(f=p[0],m=r.doc.textBetween(f.pos,d.to,void 0," ")),f&&m){const b=m.split(" ").filter(S=>S!=="");if(b.length<=0)return!1;const k=b[b.length-1],A=f.pos+m.lastIndexOf(k);if(!k)return!1;Uo(k).filter(S=>S.isLink).filter(S=>e.validate?e.validate(S.value):!0).map(S=>({...S,from:A+S.start+1,to:A+S.end+1})).forEach(S=>{s.addMark(S.from,S.to,e.type.create({href:S.href}))})}}),!!s.steps.length)return s}})}function Ec(e){return new Ne({key:new Le("handleClickLink"),props:{handleClick:(t,n,r)=>{var o,i,s;const a=_l(t.state,e.type.name),l=(o=r.target)===null||o===void 0?void 0:o.closest("a"),c=(i=l==null?void 0:l.href)!==null&&i!==void 0?i:a.href,u=(s=l==null?void 0:l.target)!==null&&s!==void 0?s:a.target;return l&&c?(window.open(c,u),!0):!1}}})}function Ac(e){return new Ne({key:new Le("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{state:o}=t,{selection:i}=o,{empty:s}=i;if(s)return!1;let a="";r.content.forEach(c=>{a+=c.textContent});const l=Uo(a).find(c=>c.isLink&&c.value===a);return!a||!l?!1:(e.editor.commands.setMark(e.type,{href:l.href}),!0)}}})}const _c=Xe.create({name:"link",priority:1e3,keepOnSplit:!1,onCreate(){this.options.protocols.forEach(e=>{if(typeof e=="string"){xi(e);return}xi(e.scheme,e.optionalSlashes)})},onDestroy(){wc()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:void 0}},addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:'a[href]:not([href *= "javascript:" i])'}]},renderHTML({HTMLAttributes:e}){return["a",oe(this.options.HTMLAttributes,e),0]},addCommands(){return{setLink:e=>({chain:t})=>t().setMark(this.name,e).setMeta("preventAutolink",!0).run(),toggleLink:e=>({chain:t})=>t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[kt({find:e=>Uo(e).filter(t=>this.options.validate?this.options.validate(t.value):!0).filter(t=>t.isLink).map(t=>({text:t.value,index:t.start,data:t})),type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)===null||t===void 0?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[];return this.options.autolink&&e.push(kc({type:this.type,validate:this.options.validate})),this.options.openOnClick&&e.push(Ec({type:this.type})),this.options.linkOnPaste&&e.push(Ac({editor:this.editor,type:this.type})),e}}),Sc=/(?:^|\s)((?:==)((?:[^~=]+))(?:==))$/,Mc=/(?:^|\s)((?:==)((?:[^~=]+))(?:==))/g,Cc=Xe.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:e=>e.getAttribute("data-color")||e.style.backgroundColor,renderHTML:e=>e.color?{"data-color":e.color,style:`background-color: ${e.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:e}){return["mark",oe(this.options.HTMLAttributes,e),0]},addCommands(){return{setHighlight:e=>({commands:t})=>t.setMark(this.name,e),toggleHighlight:e=>({commands:t})=>t.toggleMark(this.name,e),unsetHighlight:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[Lt({find:Sc,type:this.type})]},addPasteRules(){return[kt({find:Mc,type:this.type})]}}),Tc=Xe.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:e=>e.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["span",oe(this.options.HTMLAttributes,e),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:e,commands:t})=>{const n=Oo(e,this.type);return Object.entries(n).some(([,o])=>!!o)?!0:t.unsetMark(this.name)}}}}),Oc=at.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:e=>{var t;return(t=e.style.color)===null||t===void 0?void 0:t.replace(/['"]+/g,"")},renderHTML:e=>e.color?{style:`color: ${e.color}`}:{}}}}]},addCommands(){return{setColor:e=>({chain:t})=>t().setMark("textStyle",{color:e}).run(),unsetColor:()=>({chain:e})=>e().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),Rc=Xe.create({name:"superscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sup"},{style:"vertical-align",getAttrs(e){return e!=="super"?!1:null}}]},renderHTML({HTMLAttributes:e}){return["sup",oe(this.options.HTMLAttributes,e),0]},addCommands(){return{setSuperscript:()=>({commands:e})=>e.setMark(this.name),toggleSuperscript:()=>({commands:e})=>e.toggleMark(this.name),unsetSuperscript:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-.":()=>this.editor.commands.toggleSuperscript()}}}),Nc=Xe.create({name:"subscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sub"},{style:"vertical-align",getAttrs(e){return e!=="sub"?!1:null}}]},renderHTML({HTMLAttributes:e}){return["sub",oe(this.options.HTMLAttributes,e),0]},addCommands(){return{setSubscript:()=>({commands:e})=>e.setMark(this.name),toggleSubscript:()=>({commands:e})=>e.toggleMark(this.name),unsetSubscript:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-,":()=>this.editor.commands.toggleSubscript()}}}),Lc=at.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Ne({key:new Le("placeholder"),props:{decorations:({doc:e,selection:t})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=t,o=[];if(!n)return null;const i=e.type.createAndFill(),s=(i==null?void 0:i.sameMarkup(e))&&i.content.findDiffStart(e.content)===null;return e.descendants((a,l)=>{const c=r>=l&&r<=l+a.nodeSize,u=!a.isLeaf&&!a.childCount;if((c||!this.options.showOnlyCurrent)&&u){const d=[this.options.emptyNodeClass];s&&d.push(this.options.emptyEditorClass);const p=yn.node(l,l+a.nodeSize,{class:d.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:a,pos:l,hasAnchor:c}):this.options.placeholder});o.push(p)}return this.options.includeChildren}),It.create(e,o)}}})]}});function Ic(e={}){return new Ne({view(t){return new Hc(t,e)}})}class Hc{constructor(t,n){this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=n.width||1,this.color=n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(r=>{let o=i=>{this[r](i)};return t.dom.addEventListener(r,o),{name:r,handler:o}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r;if(n){let a=t.nodeBefore,l=t.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),d=a?u.bottom:u.top;a&&l&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let o=this.editorView.dom.offsetParent;this.element||(this.element=o.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let i,s;if(!o||o==document.body&&getComputedStyle(o).position=="static")i=-pageXOffset,s=-pageYOffset;else{let a=o.getBoundingClientRect();i=a.left-o.scrollLeft,s=a.top-o.scrollTop}this.element.style.left=r.left-i+"px",this.element.style.top=r.top-s+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),o=r&&r.type.spec.disableDropCursor,i=typeof o=="function"?o(this.editorView,n,t):o;if(n&&!i){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=Sl(this.editorView.state.doc,s,this.editorView.dragging.slice);a!=null&&(s=a)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){(t.target==this.editorView.dom||!this.editorView.dom.contains(t.relatedTarget))&&this.setCursor(null)}}const Bc=at.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Ic(this.options)]}});class de extends Pe{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return de.valid(r)?new de(r):Pe.near(r)}content(){return ht.empty}eq(t){return t instanceof de&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new de(t.resolve(n.pos))}getBookmark(){return new Wo(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!Dc(t)||!Pc(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let o=n.contentMatchAt(t.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&de.valid(t))return t;let o=t.pos,i=null;for(let s=t.depth;;s--){let a=t.node(s);if(n>0?t.indexAfter(s)<a.childCount:t.index(s)>0){i=a.child(n>0?t.indexAfter(s):t.index(s)-1);break}else if(s==0)return null;o+=n;let l=t.doc.resolve(o);if(de.valid(l))return l}for(;;){let s=n>0?i.firstChild:i.lastChild;if(!s){if(i.isAtom&&!i.isText&&!Ro.isSelectable(i)){t=t.doc.resolve(o+i.nodeSize*n),r=!1;continue e}break}i=s,o+=n;let a=t.doc.resolve(o);if(de.valid(a))return a}return null}}}de.prototype.visible=!1;de.findFrom=de.findGapCursorFrom;Pe.jsonID("gapcursor",de);class Wo{constructor(t){this.pos=t}map(t){return new Wo(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return de.valid(n)?new de(n):Pe.near(n)}}function Dc(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function Pc(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function jc(){return new Ne({props:{decorations:Wc,createSelectionBetween(e,t,n){return t.pos==n.pos&&de.valid(n)?new de(n):null},handleClick:zc,handleKeyDown:$c,handleDOMEvents:{beforeinput:Uc}}})}const $c=Hs({ArrowLeft:Jn("horiz",-1),ArrowRight:Jn("horiz",1),ArrowUp:Jn("vert",-1),ArrowDown:Jn("vert",1)});function Jn(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,o,i){let s=r.selection,a=t>0?s.$to:s.$from,l=s.empty;if(s instanceof je){if(!i.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(t>0?a.after():a.before())}let c=de.findGapCursorFrom(a,t,l);return c?(o&&o(r.tr.setSelection(new de(c))),!0):!1}}function zc(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!de.valid(r))return!1;let o=e.posAtCoords({left:n.clientX,top:n.clientY});return o&&o.inside>-1&&Ro.isSelectable(e.state.doc.nodeAt(o.inside))?!1:(e.dispatch(e.state.tr.setSelection(new de(r))),!0)}function Uc(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof de))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let o=Ke.empty;for(let s=r.length-1;s>=0;s--)o=Ke.from(r[s].createAndFill(null,o));let i=e.state.tr.replace(n.pos,n.pos,new ht(o,0,0));return i.setSelection(je.near(i.doc.resolve(n.pos+1))),e.dispatch(i),!1}function Wc(e){if(!(e.selection instanceof de))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",It.create(e.doc,[yn.widget(e.selection.head,t,{key:"gapcursor"})])}const Fc=at.create({name:"gapCursor",addProseMirrorPlugins(){return[jc()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=Bs(Ds(e,"allowGapCursor",n)))!==null&&t!==void 0?t:null}}});var Nr=200,Ee=function(){};Ee.prototype.append=function(t){return t.length?(t=Ee.from(t),!this.length&&t||t.length<Nr&&this.leafAppend(t)||this.length<Nr&&t.leafPrepend(this)||this.appendInner(t)):this};Ee.prototype.prepend=function(t){return t.length?Ee.from(t).append(this):this};Ee.prototype.appendInner=function(t){return new Kc(this,t)};Ee.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?Ee.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};Ee.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};Ee.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};Ee.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var o=[];return this.forEach(function(i,s){return o.push(t(i,s))},n,r),o};Ee.from=function(t){return t instanceof Ee?t:t&&t.length?new Ks(t):Ee.empty};var Ks=function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(o,i){return o==0&&i==this.length?this:new t(this.values.slice(o,i))},t.prototype.getInner=function(o){return this.values[o]},t.prototype.forEachInner=function(o,i,s,a){for(var l=i;l<s;l++)if(o(this.values[l],a+l)===!1)return!1},t.prototype.forEachInvertedInner=function(o,i,s,a){for(var l=i-1;l>=s;l--)if(o(this.values[l],a+l)===!1)return!1},t.prototype.leafAppend=function(o){if(this.length+o.length<=Nr)return new t(this.values.concat(o.flatten()))},t.prototype.leafPrepend=function(o){if(this.length+o.length<=Nr)return new t(o.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(Ee);Ee.empty=new Ks([]);var Kc=function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,o,i,s){var a=this.left.length;if(o<a&&this.left.forEachInner(r,o,Math.min(i,a),s)===!1||i>a&&this.right.forEachInner(r,Math.max(o-a,0),Math.min(this.length,i)-a,s+a)===!1)return!1},t.prototype.forEachInvertedInner=function(r,o,i,s){var a=this.left.length;if(o>a&&this.right.forEachInvertedInner(r,o-a,Math.max(i,a)-a,s+a)===!1||i<a&&this.left.forEachInvertedInner(r,Math.min(o,a),i,s)===!1)return!1},t.prototype.sliceInner=function(r,o){if(r==0&&o==this.length)return this;var i=this.left.length;return o<=i?this.left.slice(r,o):r>=i?this.right.slice(r-i,o-i):this.left.slice(r,i).append(this.right.slice(0,o-i))},t.prototype.leafAppend=function(r){var o=this.right.leafAppend(r);if(o)return new t(this.left,o)},t.prototype.leafPrepend=function(r){var o=this.left.leafPrepend(r);if(o)return new t(o,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t}(Ee),Vs=Ee;const Vc=500;class rt{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,i;n&&(o=this.remapping(r,this.items.length),i=o.maps.length);let s=t.tr,a,l,c=[],u=[];return this.items.forEach((d,p)=>{if(!d.step){o||(o=this.remapping(r,p+1),i=o.maps.length),i--,u.push(d);return}if(o){u.push(new pt(d.map));let f=d.step.map(o.slice(i)),m;f&&s.maybeStep(f).doc&&(m=s.mapping.maps[s.mapping.maps.length-1],c.push(new pt(m,void 0,void 0,c.length+u.length))),i--,m&&o.appendMap(m,i)}else s.maybeStep(d.step);if(d.selection)return a=o?d.selection.map(o.slice(i)):d.selection,l=new rt(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:a}}addTransform(t,n,r,o){let i=[],s=this.eventCount,a=this.items,l=!o&&a.length?a.get(a.length-1):null;for(let u=0;u<t.steps.length;u++){let d=t.steps[u].invert(t.docs[u]),p=new pt(t.mapping.maps[u],d,n),f;(f=l&&l.merge(p))&&(p=f,u?i.pop():a=a.slice(0,a.length-1)),i.push(p),n&&(s++,n=void 0),o||(l=p)}let c=s-r.depth;return c>qc&&(a=Gc(a,c),s-=c),new rt(a.append(i),s)}remapping(t,n){let r=new Ml;return this.items.forEach((o,i)=>{let s=o.mirrorOffset!=null&&i-o.mirrorOffset>=t?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,s)},t,n),r}addMaps(t){return this.eventCount==0?this:new rt(this.items.append(t.map(n=>new pt(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-n),i=t.mapping,s=t.steps.length,a=this.eventCount;this.items.forEach(p=>{p.selection&&a--},o);let l=n;this.items.forEach(p=>{let f=i.getMirror(--l);if(f==null)return;s=Math.min(s,f);let m=i.maps[f];if(p.step){let b=t.steps[f].invert(t.docs[f]),k=p.selection&&p.selection.map(i.slice(l+1,f));k&&a++,r.push(new pt(m,b,k))}else r.push(new pt(m))},o);let c=[];for(let p=n;p<s;p++)c.push(new pt(i.maps[p]));let u=this.items.slice(0,o).append(c).append(r),d=new rt(u,a);return d.emptyItemCount()>Vc&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,o=[],i=0;return this.items.forEach((s,a)=>{if(a>=t)o.push(s),s.selection&&i++;else if(s.step){let l=s.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=s.selection&&s.selection.map(n.slice(r));u&&i++;let d=new pt(c.invert(),l,u),p,f=o.length-1;(p=o.length&&o[f].merge(d))?o[f]=p:o.push(d)}}else s.map&&r--},this.items.length,0),new rt(Vs.from(o.reverse()),i)}}rt.empty=new rt(Vs.empty,0);function Gc(e,t){let n;return e.forEach((r,o)=>{if(r.selection&&t--==0)return n=o,!1}),e.slice(n)}class pt{constructor(t,n,r,o){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=o}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new pt(n.getMap().invert(),n,this.selection)}}}class Mt{constructor(t,n,r,o){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=o}}const qc=20;function Xc(e,t,n,r){let o=n.getMeta(Nt),i;if(o)return o.historyState;n.getMeta(Jc)&&(e=new Mt(e.done,e.undone,null,0));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(s&&s.getMeta(Nt))return s.getMeta(Nt).redo?new Mt(e.done.addTransform(n,void 0,r,ur(t)),e.undone,Ei(n.mapping.maps[n.steps.length-1]),e.prevTime):new Mt(e.done,e.undone.addTransform(n,void 0,r,ur(t)),null,e.prevTime);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let a=e.prevTime==0||!s&&(e.prevTime<(n.time||0)-r.newGroupDelay||!Zc(n,e.prevRanges)),l=s?Xr(e.prevRanges,n.mapping):Ei(n.mapping.maps[n.steps.length-1]);return new Mt(e.done.addTransform(n,a?t.selection.getBookmark():void 0,r,ur(t)),rt.empty,l,n.time)}else return(i=n.getMeta("rebased"))?new Mt(e.done.rebased(n,i),e.undone.rebased(n,i),Xr(e.prevRanges,n.mapping),e.prevTime):new Mt(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),Xr(e.prevRanges,n.mapping),e.prevTime)}function Zc(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,o)=>{for(let i=0;i<t.length;i+=2)r<=t[i+1]&&o>=t[i]&&(n=!0)}),n}function Ei(e){let t=[];return e.forEach((n,r,o,i)=>t.push(o,i)),t}function Xr(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let o=t.map(e[r],1),i=t.map(e[r+1],-1);o<=i&&n.push(o,i)}return n}function Gs(e,t,n,r){let o=ur(t),i=Nt.get(t).spec.config,s=(r?e.undone:e.done).popEvent(t,o);if(!s)return;let a=s.selection.resolve(s.transform.doc),l=(r?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,o),c=new Mt(r?l:s.remaining,r?s.remaining:l,null,0);n(s.transform.setSelection(a).setMeta(Nt,{redo:r,historyState:c}).scrollIntoView())}let Zr=!1,Ai=null;function ur(e){let t=e.plugins;if(Ai!=t){Zr=!1,Ai=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){Zr=!0;break}}return Zr}const Nt=new Le("history"),Jc=new Le("closeHistory");function Qc(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new Ne({key:Nt,state:{init(){return new Mt(rt.empty,rt.empty,null,0)},apply(t,n,r){return Xc(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,o=r=="historyUndo"?qs:r=="historyRedo"?Xs:null;return o?(n.preventDefault(),o(t.state,t.dispatch)):!1}}}})}const qs=(e,t)=>{let n=Nt.getState(e);return!n||n.done.eventCount==0?!1:(t&&Gs(n,e,t,!1),!0)},Xs=(e,t)=>{let n=Nt.getState(e);return!n||n.undone.eventCount==0?!1:(t&&Gs(n,e,t,!0),!0)},Yc=at.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>qs(e,t),redo:()=>({state:e,dispatch:t})=>Xs(e,t)}},addProseMirrorPlugins(){return[Qc(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),eu=me.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",oe(this.options.HTMLAttributes,e)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:o,storedMarks:i}=n;if(o.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:a}=r.extensionManager,l=i||o.$to.parentOffset&&o.$from.marks();return t().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&s){const d=l.filter(p=>a.includes(p.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),tu=fe({find:/--$/,replace:"—"}),nu=fe({find:/\.\.\.$/,replace:"…"}),ru=fe({find:/(?:^|[\s{[(<'"\u2018\u201C])(")$/,replace:"“"}),ou=fe({find:/"$/,replace:"”"}),iu=fe({find:/(?:^|[\s{[(<'"\u2018\u201C])(')$/,replace:"‘"}),su=fe({find:/'$/,replace:"’"}),au=fe({find:/<-$/,replace:"←"}),lu=fe({find:/->$/,replace:"→"}),cu=fe({find:/\(c\)$/,replace:"©"}),uu=fe({find:/\(tm\)$/,replace:"™"}),du=fe({find:/\(sm\)$/,replace:"℠"}),pu=fe({find:/\(r\)$/,replace:"®"}),fu=fe({find:/(?:^|\s)(1\/2)$/,replace:"½"}),hu=fe({find:/\+\/-$/,replace:"±"}),gu=fe({find:/!=$/,replace:"≠"}),mu=fe({find:/<<$/,replace:"«"}),bu=fe({find:/>>$/,replace:"»"}),yu=fe({find:/\d+\s?([*x])\s?\d+$/,replace:"×"}),vu=fe({find:/\^2$/,replace:"²"}),wu=fe({find:/\^3$/,replace:"³"}),xu=fe({find:/(?:^|\s)(1\/4)$/,replace:"¼"}),ku=fe({find:/(?:^|\s)(3\/4)$/,replace:"¾"}),Eu=at.create({name:"typography",addInputRules(){const e=[];return this.options.emDash!==!1&&e.push(tu),this.options.ellipsis!==!1&&e.push(nu),this.options.openDoubleQuote!==!1&&e.push(ru),this.options.closeDoubleQuote!==!1&&e.push(ou),this.options.openSingleQuote!==!1&&e.push(iu),this.options.closeSingleQuote!==!1&&e.push(su),this.options.leftArrow!==!1&&e.push(au),this.options.rightArrow!==!1&&e.push(lu),this.options.copyright!==!1&&e.push(cu),this.options.trademark!==!1&&e.push(uu),this.options.servicemark!==!1&&e.push(du),this.options.registeredTrademark!==!1&&e.push(pu),this.options.oneHalf!==!1&&e.push(fu),this.options.plusMinus!==!1&&e.push(hu),this.options.notEqual!==!1&&e.push(gu),this.options.laquo!==!1&&e.push(mu),this.options.raquo!==!1&&e.push(bu),this.options.multiplication!==!1&&e.push(yu),this.options.superscriptTwo!==!1&&e.push(vu),this.options.superscriptThree!==!1&&e.push(wu),this.options.oneQuarter!==!1&&e.push(xu),this.options.threeQuarters!==!1&&e.push(ku),e}}),Au=at.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:"left"}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>e.style.textAlign||this.options.defaultAlignment,renderHTML:e=>e.textAlign===this.options.defaultAlignment?{}:{style:`text-align: ${e.textAlign}`}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>this.options.alignments.includes(e)?this.options.types.every(n=>t.updateAttributes(n,{textAlign:e})):!1,unsetTextAlign:()=>({commands:e})=>this.options.types.every(t=>e.resetAttributes(t,"textAlign"))}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),_u=at.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Ne({key:new Le("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:o}=t,i=[];if(!n||!r)return It.create(e,[]);let s=0;this.options.mode==="deepest"&&e.descendants((l,c)=>{if(l.isText)return;if(!(o>=c&&o<=c+l.nodeSize-1))return!1;s+=1});let a=0;return e.descendants((l,c)=>{if(l.isText||!(o>=c&&o<=c+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&s-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";i.push(yn.node(c,c+l.nodeSize,{class:this.options.className}))}),It.create(e,i)}}})]}}),Su=me.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,oe(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>so({find:new RegExp(`^(#{1,${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),Mu=/^\s*>\s$/,Cu=me.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return["blockquote",oe(this.options.HTMLAttributes,e),0]},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[pn({find:Mu,type:this.type})]}}),Tu=me.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",oe(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),_i=Xe.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:e=>e.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["span",oe(this.options.HTMLAttributes,e),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:e,commands:t})=>{const n=Oo(e,this.type);return Object.entries(n).some(([,o])=>!!o)?!0:t.unsetMark(this.name)}}}}),Si=/^\s*([-+*])\s$/,Ou=me.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",oe(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Tu.name,this.editor.getAttributes(_i.name)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=pn({find:Si,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=pn({find:Si,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(_i.name),editor:this.editor})),[e]}}),Ru=me.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",oe(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Mi=Xe.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:e=>e.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["span",oe(this.options.HTMLAttributes,e),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:e,commands:t})=>{const n=Oo(e,this.type);return Object.entries(n).some(([,o])=>!!o)?!0:t.unsetMark(this.name)}}}}),Ci=/^(\d+)\.\s$/,Nu=me.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return t===1?["ol",oe(this.options.HTMLAttributes,n),0]:["ol",oe(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Ru.name,this.editor.getAttributes(Mi.name)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=pn({find:Ci,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=pn({find:Ci,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Mi.name),editor:this.editor})),[e]}}),Lu=me.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",oe(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e})=>e().insertContent({type:this.name}).command(({tr:t,dispatch:n})=>{var r;if(n){const{$to:o}=t.selection,i=o.end();if(o.nodeAfter)t.setSelection(je.create(t.doc,o.pos));else{const s=(r=o.parent.type.contentMatch.defaultType)===null||r===void 0?void 0:r.create();s&&(t.insert(i,s),t.setSelection(je.create(t.doc,i)))}t.scrollIntoView()}return!0}).run()}},addInputRules(){return[Ps({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),Iu=me.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",oe(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Hu=/^\s*(\[([( |x])?\])\s$/,Bu=me.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{}}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>e.getAttribute("data-checked")==="true",renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",oe(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n,editor:r})=>{const o=document.createElement("li"),i=document.createElement("label"),s=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div");return i.contentEditable="false",a.type="checkbox",a.addEventListener("change",c=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:u}=c.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:d})=>{const p=n(),f=d.doc.nodeAt(p);return d.setNodeMarkup(p,void 0,{...f==null?void 0:f.attrs,checked:u}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,u)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([c,u])=>{o.setAttribute(c,u)}),o.dataset.checked=e.attrs.checked,e.attrs.checked&&a.setAttribute("checked","checked"),i.append(a,s),o.append(i,l),Object.entries(t).forEach(([c,u])=>{o.setAttribute(c,u)}),{dom:o,contentDOM:l,update:c=>c.type!==this.type?!1:(o.dataset.checked=c.attrs.checked,c.attrs.checked?a.setAttribute("checked","checked"):a.removeAttribute("checked"),!0)}}},addInputRules(){return[pn({find:Hu,type:this.type,getAttributes:e=>({checked:e[e.length-1]==="x"})})]}}),Du=me.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",oe(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}}),Pu=/^```([a-z]+)?[\s\n]$/,ju=/^~~~([a-z]+)?[\s\n]$/,$u=me.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options,i=[...((t=e.firstElementChild)===null||t===void 0?void 0:t.classList)||[]].filter(s=>s.startsWith(n)).map(s=>s.replace(n,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",oe(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:o}=n;if(!o||r.parent.type!==this.type)return!1;const i=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!i||!s?!1:e.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:o,empty:i}=n;if(!i||o.parent.type!==this.type||!(o.parentOffset===o.parent.nodeSize-2))return!1;const a=o.after();return a===void 0||r.nodeAt(a)?!1:e.commands.exitCode()}}},addInputRules(){return[so({find:Pu,type:this.type,getAttributes:e=>({language:e[1]})}),so({find:ju,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new Ne({key:new Le("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),o=r?JSON.parse(r):void 0,i=o==null?void 0:o.mode;if(!n||!i)return!1;const{tr:s}=e.state;return s.replaceSelectionWith(this.type.create({language:i})),s.setSelection(je.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.insertText(n.replace(/\r\n?/g,`
`)),s.setMeta("paste",!0),e.dispatch(s),!0}}})]}});var Fo={exports:{}};function Ko(e){return e instanceof Map?e.clear=e.delete=e.set=function(){throw new Error("map is read-only")}:e instanceof Set&&(e.add=e.clear=e.delete=function(){throw new Error("set is read-only")}),Object.freeze(e),Object.getOwnPropertyNames(e).forEach(function(t){var n=e[t];typeof n=="object"&&!Object.isFrozen(n)&&Ko(n)}),e}Fo.exports=Ko;Fo.exports.default=Ko;class Ti{constructor(t){t.data===void 0&&(t.data={}),this.data=t.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function Zs(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function Ot(e,...t){const n=Object.create(null);for(const r in e)n[r]=e[r];return t.forEach(function(r){for(const o in r)n[o]=r[o]}),n}const zu="</span>",Oi=e=>!!e.scope||e.sublanguage&&e.language,Uu=(e,{prefix:t})=>{if(e.includes(".")){const n=e.split(".");return[`${t}${n.shift()}`,...n.map((r,o)=>`${r}${"_".repeat(o+1)}`)].join(" ")}return`${t}${e}`};class Wu{constructor(t,n){this.buffer="",this.classPrefix=n.classPrefix,t.walk(this)}addText(t){this.buffer+=Zs(t)}openNode(t){if(!Oi(t))return;let n="";t.sublanguage?n=`language-${t.language}`:n=Uu(t.scope,{prefix:this.classPrefix}),this.span(n)}closeNode(t){Oi(t)&&(this.buffer+=zu)}value(){return this.buffer}span(t){this.buffer+=`<span class="${t}">`}}const Ri=(e={})=>{const t={children:[]};return Object.assign(t,e),t};class Vo{constructor(){this.rootNode=Ri(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(t){this.top.children.push(t)}openNode(t){const n=Ri({scope:t});this.add(n),this.stack.push(n)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(t){return this.constructor._walk(t,this.rootNode)}static _walk(t,n){return typeof n=="string"?t.addText(n):n.children&&(t.openNode(n),n.children.forEach(r=>this._walk(t,r)),t.closeNode(n)),t}static _collapse(t){typeof t!="string"&&t.children&&(t.children.every(n=>typeof n=="string")?t.children=[t.children.join("")]:t.children.forEach(n=>{Vo._collapse(n)}))}}class Fu extends Vo{constructor(t){super(),this.options=t}addKeyword(t,n){t!==""&&(this.openNode(n),this.addText(t),this.closeNode())}addText(t){t!==""&&this.add(t)}addSublanguage(t,n){const r=t.root;r.sublanguage=!0,r.language=n,this.add(r)}toHTML(){return new Wu(this,this.options).value()}finalize(){return!0}}function In(e){return e?typeof e=="string"?e:e.source:null}function Js(e){return Xt("(?=",e,")")}function Ku(e){return Xt("(?:",e,")*")}function Vu(e){return Xt("(?:",e,")?")}function Xt(...e){return e.map(n=>In(n)).join("")}function Gu(e){const t=e[e.length-1];return typeof t=="object"&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}function Go(...e){return"("+(Gu(e).capture?"":"?:")+e.map(r=>In(r)).join("|")+")"}function Qs(e){return new RegExp(e.toString()+"|").exec("").length-1}function qu(e,t){const n=e&&e.exec(t);return n&&n.index===0}const Xu=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function qo(e,{joinWith:t}){let n=0;return e.map(r=>{n+=1;const o=n;let i=In(r),s="";for(;i.length>0;){const a=Xu.exec(i);if(!a){s+=i;break}s+=i.substring(0,a.index),i=i.substring(a.index+a[0].length),a[0][0]==="\\"&&a[1]?s+="\\"+String(Number(a[1])+o):(s+=a[0],a[0]==="("&&n++)}return s}).map(r=>`(${r})`).join(t)}const Zu=/\b\B/,Ys="[a-zA-Z]\\w*",Xo="[a-zA-Z_]\\w*",ea="\\b\\d+(\\.\\d+)?",ta="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",na="\\b(0b[01]+)",Ju="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",Qu=(e={})=>{const t=/^#![ ]*\//;return e.binary&&(e.begin=Xt(t,/.*\b/,e.binary,/\b.*/)),Ot({scope:"meta",begin:t,end:/$/,relevance:0,"on:begin":(n,r)=>{n.index!==0&&r.ignoreMatch()}},e)},Hn={begin:"\\\\[\\s\\S]",relevance:0},Yu={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[Hn]},ed={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[Hn]},td={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},jr=function(e,t,n={}){const r=Ot({scope:"comment",begin:e,end:t,contains:[]},n);r.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const o=Go("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return r.contains.push({begin:Xt(/[ ]+/,"(",o,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),r},nd=jr("//","$"),rd=jr("/\\*","\\*/"),od=jr("#","$"),id={scope:"number",begin:ea,relevance:0},sd={scope:"number",begin:ta,relevance:0},ad={scope:"number",begin:na,relevance:0},ld={begin:/(?=\/[^/\n]*\/)/,contains:[{scope:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[Hn,{begin:/\[/,end:/\]/,relevance:0,contains:[Hn]}]}]},cd={scope:"title",begin:Ys,relevance:0},ud={scope:"title",begin:Xo,relevance:0},dd={begin:"\\.\\s*"+Xo,relevance:0},pd=function(e){return Object.assign(e,{"on:begin":(t,n)=>{n.data._beginMatch=t[1]},"on:end":(t,n)=>{n.data._beginMatch!==t[1]&&n.ignoreMatch()}})};var Qn=Object.freeze({__proto__:null,MATCH_NOTHING_RE:Zu,IDENT_RE:Ys,UNDERSCORE_IDENT_RE:Xo,NUMBER_RE:ea,C_NUMBER_RE:ta,BINARY_NUMBER_RE:na,RE_STARTERS_RE:Ju,SHEBANG:Qu,BACKSLASH_ESCAPE:Hn,APOS_STRING_MODE:Yu,QUOTE_STRING_MODE:ed,PHRASAL_WORDS_MODE:td,COMMENT:jr,C_LINE_COMMENT_MODE:nd,C_BLOCK_COMMENT_MODE:rd,HASH_COMMENT_MODE:od,NUMBER_MODE:id,C_NUMBER_MODE:sd,BINARY_NUMBER_MODE:ad,REGEXP_MODE:ld,TITLE_MODE:cd,UNDERSCORE_TITLE_MODE:ud,METHOD_GUARD:dd,END_SAME_AS_BEGIN:pd});function fd(e,t){e.input[e.index-1]==="."&&t.ignoreMatch()}function hd(e,t){e.className!==void 0&&(e.scope=e.className,delete e.className)}function gd(e,t){t&&e.beginKeywords&&(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",e.__beforeBegin=fd,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,e.relevance===void 0&&(e.relevance=0))}function md(e,t){Array.isArray(e.illegal)&&(e.illegal=Go(...e.illegal))}function bd(e,t){if(e.match){if(e.begin||e.end)throw new Error("begin & end are not supported with match");e.begin=e.match,delete e.match}}function yd(e,t){e.relevance===void 0&&(e.relevance=1)}const vd=(e,t)=>{if(!e.beforeMatch)return;if(e.starts)throw new Error("beforeMatch cannot be used with starts");const n=Object.assign({},e);Object.keys(e).forEach(r=>{delete e[r]}),e.keywords=n.keywords,e.begin=Xt(n.beforeMatch,Js(n.begin)),e.starts={relevance:0,contains:[Object.assign(n,{endsParent:!0})]},e.relevance=0,delete n.beforeMatch},wd=["of","and","for","in","not","or","if","then","parent","list","value"],xd="keyword";function ra(e,t,n=xd){const r=Object.create(null);return typeof e=="string"?o(n,e.split(" ")):Array.isArray(e)?o(n,e):Object.keys(e).forEach(function(i){Object.assign(r,ra(e[i],t,i))}),r;function o(i,s){t&&(s=s.map(a=>a.toLowerCase())),s.forEach(function(a){const l=a.split("|");r[l[0]]=[i,kd(l[0],l[1])]})}}function kd(e,t){return t?Number(t):Ed(e)?0:1}function Ed(e){return wd.includes(e.toLowerCase())}const Ni={},Ft=e=>{console.error(e)},Li=(e,...t)=>{console.log(`WARN: ${e}`,...t)},tn=(e,t)=>{Ni[`${e}/${t}`]||(console.log(`Deprecated as of ${e}. ${t}`),Ni[`${e}/${t}`]=!0)},Lr=new Error;function oa(e,t,{key:n}){let r=0;const o=e[n],i={},s={};for(let a=1;a<=t.length;a++)s[a+r]=o[a],i[a+r]=!0,r+=Qs(t[a-1]);e[n]=s,e[n]._emit=i,e[n]._multi=!0}function Ad(e){if(Array.isArray(e.begin)){if(e.skip||e.excludeBegin||e.returnBegin)throw Ft("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),Lr;if(typeof e.beginScope!="object"||e.beginScope===null)throw Ft("beginScope must be object"),Lr;oa(e,e.begin,{key:"beginScope"}),e.begin=qo(e.begin,{joinWith:""})}}function _d(e){if(Array.isArray(e.end)){if(e.skip||e.excludeEnd||e.returnEnd)throw Ft("skip, excludeEnd, returnEnd not compatible with endScope: {}"),Lr;if(typeof e.endScope!="object"||e.endScope===null)throw Ft("endScope must be object"),Lr;oa(e,e.end,{key:"endScope"}),e.end=qo(e.end,{joinWith:""})}}function Sd(e){e.scope&&typeof e.scope=="object"&&e.scope!==null&&(e.beginScope=e.scope,delete e.scope)}function Md(e){Sd(e),typeof e.beginScope=="string"&&(e.beginScope={_wrap:e.beginScope}),typeof e.endScope=="string"&&(e.endScope={_wrap:e.endScope}),Ad(e),_d(e)}function Cd(e){function t(s,a){return new RegExp(In(s),"m"+(e.case_insensitive?"i":"")+(e.unicodeRegex?"u":"")+(a?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(a,l){l.position=this.position++,this.matchIndexes[this.matchAt]=l,this.regexes.push([l,a]),this.matchAt+=Qs(a)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const a=this.regexes.map(l=>l[1]);this.matcherRe=t(qo(a,{joinWith:"|"}),!0),this.lastIndex=0}exec(a){this.matcherRe.lastIndex=this.lastIndex;const l=this.matcherRe.exec(a);if(!l)return null;const c=l.findIndex((d,p)=>p>0&&d!==void 0),u=this.matchIndexes[c];return l.splice(0,c),Object.assign(l,u)}}class r{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(a){if(this.multiRegexes[a])return this.multiRegexes[a];const l=new n;return this.rules.slice(a).forEach(([c,u])=>l.addRule(c,u)),l.compile(),this.multiRegexes[a]=l,l}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(a,l){this.rules.push([a,l]),l.type==="begin"&&this.count++}exec(a){const l=this.getMatcher(this.regexIndex);l.lastIndex=this.lastIndex;let c=l.exec(a);if(this.resumingScanAtSamePosition()&&!(c&&c.index===this.lastIndex)){const u=this.getMatcher(0);u.lastIndex=this.lastIndex+1,c=u.exec(a)}return c&&(this.regexIndex+=c.position+1,this.regexIndex===this.count&&this.considerAll()),c}}function o(s){const a=new r;return s.contains.forEach(l=>a.addRule(l.begin,{rule:l,type:"begin"})),s.terminatorEnd&&a.addRule(s.terminatorEnd,{type:"end"}),s.illegal&&a.addRule(s.illegal,{type:"illegal"}),a}function i(s,a){const l=s;if(s.isCompiled)return l;[hd,bd,Md,vd].forEach(u=>u(s,a)),e.compilerExtensions.forEach(u=>u(s,a)),s.__beforeBegin=null,[gd,md,yd].forEach(u=>u(s,a)),s.isCompiled=!0;let c=null;return typeof s.keywords=="object"&&s.keywords.$pattern&&(s.keywords=Object.assign({},s.keywords),c=s.keywords.$pattern,delete s.keywords.$pattern),c=c||/\w+/,s.keywords&&(s.keywords=ra(s.keywords,e.case_insensitive)),l.keywordPatternRe=t(c,!0),a&&(s.begin||(s.begin=/\B|\b/),l.beginRe=t(l.begin),!s.end&&!s.endsWithParent&&(s.end=/\B|\b/),s.end&&(l.endRe=t(l.end)),l.terminatorEnd=In(l.end)||"",s.endsWithParent&&a.terminatorEnd&&(l.terminatorEnd+=(s.end?"|":"")+a.terminatorEnd)),s.illegal&&(l.illegalRe=t(s.illegal)),s.contains||(s.contains=[]),s.contains=[].concat(...s.contains.map(function(u){return Td(u==="self"?s:u)})),s.contains.forEach(function(u){i(u,l)}),s.starts&&i(s.starts,a),l.matcher=o(l),l}if(e.compilerExtensions||(e.compilerExtensions=[]),e.contains&&e.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return e.classNameAliases=Ot(e.classNameAliases||{}),i(e)}function ia(e){return e?e.endsWithParent||ia(e.starts):!1}function Td(e){return e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map(function(t){return Ot(e,{variants:null},t)})),e.cachedVariants?e.cachedVariants:ia(e)?Ot(e,{starts:e.starts?Ot(e.starts):null}):Object.isFrozen(e)?Ot(e):e}var Od="11.6.0";class Rd extends Error{constructor(t,n){super(t),this.name="HTMLInjectionError",this.html=n}}const Jr=Zs,Ii=Ot,Hi=Symbol("nomatch"),Nd=7,Ld=function(e){const t=Object.create(null),n=Object.create(null),r=[];let o=!0;const i="Could not find the language '{}', did you forget to load/include a language module?",s={disableAutodetect:!0,name:"Plain text",contains:[]};let a={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:Fu};function l(g){return a.noHighlightRe.test(g)}function c(g){let w=g.className+" ";w+=g.parentNode?g.parentNode.className:"";const y=a.languageDetectRe.exec(w);if(y){const H=T(y[1]);return H||(Li(i.replace("{}",y[1])),Li("Falling back to no-highlight mode for this block.",g)),H?y[1]:"no-highlight"}return w.split(/\s+/).find(H=>l(H)||T(H))}function u(g,w,y){let H="",P="";typeof w=="object"?(H=g,y=w.ignoreIllegals,P=w.language):(tn("10.7.0","highlight(lang, code, ...args) has been deprecated."),tn("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),P=g,H=w),y===void 0&&(y=!0);const G={code:H,language:P};Z("before:highlight",G);const Y=G.result?G.result:d(G.language,G.code,y);return Y.code=G.code,Z("after:highlight",Y),Y}function d(g,w,y,H){const P=Object.create(null);function G(v,M){return v.keywords[M]}function Y(){if(!N.keywords){J.addText($);return}let v=0;N.keywordPatternRe.lastIndex=0;let M=N.keywordPatternRe.exec($),I="";for(;M;){I+=$.substring(v,M.index);const j=ue.case_insensitive?M[0].toLowerCase():M[0],te=G(N,j);if(te){const[ge,wn]=te;if(J.addText(I),I="",P[j]=(P[j]||0)+1,P[j]<=Nd&&(ve+=wn),ge.startsWith("_"))I+=M[0];else{const xn=ue.classNameAliases[ge]||ge;J.addKeyword(M[0],xn)}}else I+=M[0];v=N.keywordPatternRe.lastIndex,M=N.keywordPatternRe.exec($)}I+=$.substring(v),J.addText(I)}function ce(){if($==="")return;let v=null;if(typeof N.subLanguage=="string"){if(!t[N.subLanguage]){J.addText($);return}v=d(N.subLanguage,$,!0,ct[N.subLanguage]),ct[N.subLanguage]=v._top}else v=f($,N.subLanguage.length?N.subLanguage:null);N.relevance>0&&(ve+=v.relevance),J.addSublanguage(v._emitter,v.language)}function X(){N.subLanguage!=null?ce():Y(),$=""}function Q(v,M){let I=1;const j=M.length-1;for(;I<=j;){if(!v._emit[I]){I++;continue}const te=ue.classNameAliases[v[I]]||v[I],ge=M[I];te?J.addKeyword(ge,te):($=ge,Y(),$=""),I++}}function ae(v,M){return v.scope&&typeof v.scope=="string"&&J.openNode(ue.classNameAliases[v.scope]||v.scope),v.beginScope&&(v.beginScope._wrap?(J.addKeyword($,ue.classNameAliases[v.beginScope._wrap]||v.beginScope._wrap),$=""):v.beginScope._multi&&(Q(v.beginScope,M),$="")),N=Object.create(v,{parent:{value:N}}),N}function ye(v,M,I){let j=qu(v.endRe,I);if(j){if(v["on:end"]){const te=new Ti(v);v["on:end"](M,te),te.isMatchIgnored&&(j=!1)}if(j){for(;v.endsParent&&v.parent;)v=v.parent;return v}}if(v.endsWithParent)return ye(v.parent,M,I)}function xe(v){return N.matcher.regexIndex===0?($+=v[0],1):(Be=!0,0)}function Je(v){const M=v[0],I=v.rule,j=new Ti(I),te=[I.__beforeBegin,I["on:begin"]];for(const ge of te)if(ge&&(ge(v,j),j.isMatchIgnored))return xe(M);return I.skip?$+=M:(I.excludeBegin&&($+=M),X(),!I.returnBegin&&!I.excludeBegin&&($=M)),ae(I,v),I.returnBegin?0:M.length}function _e(v){const M=v[0],I=w.substring(v.index),j=ye(N,v,I);if(!j)return Hi;const te=N;N.endScope&&N.endScope._wrap?(X(),J.addKeyword(M,N.endScope._wrap)):N.endScope&&N.endScope._multi?(X(),Q(N.endScope,v)):te.skip?$+=M:(te.returnEnd||te.excludeEnd||($+=M),X(),te.excludeEnd&&($=M));do N.scope&&J.closeNode(),!N.skip&&!N.subLanguage&&(ve+=N.relevance),N=N.parent;while(N!==j.parent);return j.starts&&ae(j.starts,v),te.returnEnd?0:M.length}function Ie(){const v=[];for(let M=N;M!==ue;M=M.parent)M.scope&&v.unshift(M.scope);v.forEach(M=>J.openNode(M))}let ke={};function Qe(v,M){const I=M&&M[0];if($+=v,I==null)return X(),0;if(ke.type==="begin"&&M.type==="end"&&ke.index===M.index&&I===""){if($+=w.slice(M.index,M.index+1),!o){const j=new Error(`0 width match regex (${g})`);throw j.languageName=g,j.badRule=ke.rule,j}return 1}if(ke=M,M.type==="begin")return Je(M);if(M.type==="illegal"&&!y){const j=new Error('Illegal lexeme "'+I+'" for mode "'+(N.scope||"<unnamed>")+'"');throw j.mode=N,j}else if(M.type==="end"){const j=_e(M);if(j!==Hi)return j}if(M.type==="illegal"&&I==="")return 1;if(Se>1e5&&Se>M.index*3)throw new Error("potential infinite loop, way more iterations than matches");return $+=I,I.length}const ue=T(g);if(!ue)throw Ft(i.replace("{}",g)),new Error('Unknown language: "'+g+'"');const At=Cd(ue);let He="",N=H||At;const ct={},J=new a.__emitter(a);Ie();let $="",ve=0,he=0,Se=0,Be=!1;try{for(N.matcher.considerAll();;){Se++,Be?Be=!1:N.matcher.considerAll(),N.matcher.lastIndex=he;const v=N.matcher.exec(w);if(!v)break;const M=w.substring(he,v.index),I=Qe(M,v);he=v.index+I}return Qe(w.substring(he)),J.closeAllNodes(),J.finalize(),He=J.toHTML(),{language:g,value:He,relevance:ve,illegal:!1,_emitter:J,_top:N}}catch(v){if(v.message&&v.message.includes("Illegal"))return{language:g,value:Jr(w),illegal:!0,relevance:0,_illegalBy:{message:v.message,index:he,context:w.slice(he-100,he+100),mode:v.mode,resultSoFar:He},_emitter:J};if(o)return{language:g,value:Jr(w),illegal:!1,relevance:0,errorRaised:v,_emitter:J,_top:N};throw v}}function p(g){const w={value:Jr(g),illegal:!1,relevance:0,_top:s,_emitter:new a.__emitter(a)};return w._emitter.addText(g),w}function f(g,w){w=w||a.languages||Object.keys(t);const y=p(g),H=w.filter(T).filter(D).map(X=>d(X,g,!1));H.unshift(y);const P=H.sort((X,Q)=>{if(X.relevance!==Q.relevance)return Q.relevance-X.relevance;if(X.language&&Q.language){if(T(X.language).supersetOf===Q.language)return 1;if(T(Q.language).supersetOf===X.language)return-1}return 0}),[G,Y]=P,ce=G;return ce.secondBest=Y,ce}function m(g,w,y){const H=w&&n[w]||y;g.classList.add("hljs"),g.classList.add(`language-${H}`)}function b(g){let w=null;const y=c(g);if(l(y))return;if(Z("before:highlightElement",{el:g,language:y}),g.children.length>0&&(a.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(g)),a.throwUnescapedHTML))throw new Rd("One of your code blocks includes unescaped HTML.",g.innerHTML);w=g;const H=w.textContent,P=y?u(H,{language:y,ignoreIllegals:!0}):f(H);g.innerHTML=P.value,m(g,y,P.language),g.result={language:P.language,re:P.relevance,relevance:P.relevance},P.secondBest&&(g.secondBest={language:P.secondBest.language,relevance:P.secondBest.relevance}),Z("after:highlightElement",{el:g,result:P,text:H})}function k(g){a=Ii(a,g)}const A=()=>{h(),tn("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function S(){h(),tn("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let O=!1;function h(){if(document.readyState==="loading"){O=!0;return}document.querySelectorAll(a.cssSelector).forEach(b)}function R(){O&&h()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",R,!1);function x(g,w){let y=null;try{y=w(e)}catch(H){if(Ft("Language definition for '{}' could not be registered.".replace("{}",g)),o)Ft(H);else throw H;y=s}y.name||(y.name=g),t[g]=y,y.rawDefinition=w.bind(null,e),y.aliases&&B(y.aliases,{languageName:g})}function C(g){delete t[g];for(const w of Object.keys(n))n[w]===g&&delete n[w]}function E(){return Object.keys(t)}function T(g){return g=(g||"").toLowerCase(),t[g]||t[n[g]]}function B(g,{languageName:w}){typeof g=="string"&&(g=[g]),g.forEach(y=>{n[y.toLowerCase()]=w})}function D(g){const w=T(g);return w&&!w.disableAutodetect}function V(g){g["before:highlightBlock"]&&!g["before:highlightElement"]&&(g["before:highlightElement"]=w=>{g["before:highlightBlock"](Object.assign({block:w.el},w))}),g["after:highlightBlock"]&&!g["after:highlightElement"]&&(g["after:highlightElement"]=w=>{g["after:highlightBlock"](Object.assign({block:w.el},w))})}function U(g){V(g),r.push(g)}function Z(g,w){const y=g;r.forEach(function(H){H[y]&&H[y](w)})}function ee(g){return tn("10.7.0","highlightBlock will be removed entirely in v12.0"),tn("10.7.0","Please use highlightElement now."),b(g)}Object.assign(e,{highlight:u,highlightAuto:f,highlightAll:h,highlightElement:b,highlightBlock:ee,configure:k,initHighlighting:A,initHighlightingOnLoad:S,registerLanguage:x,unregisterLanguage:C,listLanguages:E,getLanguage:T,registerAliases:B,autoDetection:D,inherit:Ii,addPlugin:U}),e.debugMode=function(){o=!1},e.safeMode=function(){o=!0},e.versionString=Od,e.regex={concat:Xt,lookahead:Js,either:Go,optional:Vu,anyNumberOfTimes:Ku};for(const g in Qn)typeof Qn[g]=="object"&&Fo.exports(Qn[g]);return Object.assign(e,Qn),e};var Bn=Ld({}),Id=Bn;Bn.HighlightJS=Bn;Bn.default=Bn;var Hd=Id;function sa(e,t=[]){return e.map(n=>{const r=[...t,...n.properties?n.properties.className:[]];return n.children?sa(n.children,r):{text:n.value,classes:r}}).flat()}function Bi(e){return e.value||e.children||[]}function Bd(e){return!!Hd.getLanguage(e)}function Di({doc:e,name:t,lowlight:n,defaultLanguage:r}){const o=[];return ao(e,i=>i.type.name===t).forEach(i=>{let s=i.pos+1;const a=i.node.attrs.language||r,l=n.listLanguages(),c=a&&(l.includes(a)||Bd(a))?Bi(n.highlight(a,i.node.textContent)):Bi(n.highlightAuto(i.node.textContent));sa(c).forEach(u=>{const d=s+u.text.length;if(u.classes.length){const p=yn.inline(s,d,{class:u.classes.join(" ")});o.push(p)}s=d})}),It.create(e,o)}function Dd(e){return typeof e=="function"}function Pd({name:e,lowlight:t,defaultLanguage:n}){if(!["highlight","highlightAuto","listLanguages"].every(o=>Dd(t[o])))throw Error("You should provide an instance of lowlight to use the code-block-lowlight extension");const r=new Ne({key:new Le("lowlight"),state:{init:(o,{doc:i})=>Di({doc:i,name:e,lowlight:t,defaultLanguage:n}),apply:(o,i,s,a)=>{const l=s.selection.$head.parent.type.name,c=a.selection.$head.parent.type.name,u=ao(s.doc,p=>p.type.name===e),d=ao(a.doc,p=>p.type.name===e);return o.docChanged&&([l,c].includes(e)||d.length!==u.length||o.steps.some(p=>p.from!==void 0&&p.to!==void 0&&u.some(f=>f.pos>=p.from&&f.pos+f.node.nodeSize<=p.to)))?Di({doc:o.doc,name:e,lowlight:t,defaultLanguage:n}):i.map(o.mapping,o.doc)}},props:{decorations(o){return r.getState(o)}}});return r}const jd=$u.extend({addOptions(){var e;return{...(e=this.parent)===null||e===void 0?void 0:e.call(this),lowlight:{},defaultLanguage:null}},addProseMirrorPlugins(){var e;return[...((e=this.parent)===null||e===void 0?void 0:e.call(this))||[],Pd({name:this.name,lowlight:this.options.lowlight,defaultLanguage:this.options.defaultLanguage})]}});var mo,bo;if(typeof WeakMap<"u"){let e=new WeakMap;mo=t=>e.get(t),bo=(t,n)=>(e.set(t,n),n)}else{const e=[];let n=0;mo=r=>{for(let o=0;o<e.length;o+=2)if(e[o]==r)return e[o+1]},bo=(r,o)=>(n==10&&(n=0),e[n++]=r,e[n++]=o)}var pe=class{constructor(e,t,n,r){this.width=e,this.height=t,this.map=n,this.problems=r}findCell(e){for(let t=0;t<this.map.length;t++){const n=this.map[t];if(n!=e)continue;const r=t%this.width,o=t/this.width|0;let i=r+1,s=o+1;for(let a=1;i<this.width&&this.map[t+a]==n;a++)i++;for(let a=1;s<this.height&&this.map[t+this.width*a]==n;a++)s++;return{left:r,top:o,right:i,bottom:s}}throw new RangeError(`No cell with offset ${e} found`)}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError(`No cell with offset ${e} found`)}nextCell(e,t,n){const{left:r,right:o,top:i,bottom:s}=this.findCell(e);return t=="horiz"?(n<0?r==0:o==this.width)?null:this.map[i*this.width+(n<0?r-1:o)]:(n<0?i==0:s==this.height)?null:this.map[r+this.width*(n<0?i-1:s)]}rectBetween(e,t){const{left:n,right:r,top:o,bottom:i}=this.findCell(e),{left:s,right:a,top:l,bottom:c}=this.findCell(t);return{left:Math.min(n,s),top:Math.min(o,l),right:Math.max(r,a),bottom:Math.max(i,c)}}cellsInRect(e){const t=[],n={};for(let r=e.top;r<e.bottom;r++)for(let o=e.left;o<e.right;o++){const i=r*this.width+o,s=this.map[i];n[s]||(n[s]=!0,!(o==e.left&&o&&this.map[i-1]==s||r==e.top&&r&&this.map[i-this.width]==s)&&t.push(s))}return t}positionAt(e,t,n){for(let r=0,o=0;;r++){const i=o+n.child(r).nodeSize;if(r==e){let s=t+e*this.width;const a=(e+1)*this.width;for(;s<a&&this.map[s]<o;)s++;return s==a?i-1:this.map[s]}o=i}}static get(e){return mo(e)||bo(e,$d(e))}};function $d(e){if(e.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+e.type.name);const t=zd(e),n=e.childCount,r=[];let o=0,i=null;const s=[];for(let c=0,u=t*n;c<u;c++)r[c]=0;for(let c=0,u=0;c<n;c++){const d=e.child(c);u++;for(let m=0;;m++){for(;o<r.length&&r[o]!=0;)o++;if(m==d.childCount)break;const b=d.child(m),{colspan:k,rowspan:A,colwidth:S}=b.attrs;for(let O=0;O<A;O++){if(O+c>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:u,n:A-O});break}const h=o+O*t;for(let R=0;R<k;R++){r[h+R]==0?r[h+R]=u:(i||(i=[])).push({type:"collision",row:c,pos:u,n:k-R});const x=S&&S[R];if(x){const C=(h+R)%t*2,E=s[C];E==null||E!=x&&s[C+1]==1?(s[C]=x,s[C+1]=1):E==x&&s[C+1]++}}}o+=k,u+=b.nodeSize}const p=(c+1)*t;let f=0;for(;o<p;)r[o++]==0&&f++;f&&(i||(i=[])).push({type:"missing",row:c,n:f}),u++}const a=new pe(t,n,r,i);let l=!1;for(let c=0;!l&&c<s.length;c+=2)s[c]!=null&&s[c+1]<n&&(l=!0);return l&&Ud(a,s,e),a}function zd(e){let t=-1,n=!1;for(let r=0;r<e.childCount;r++){const o=e.child(r);let i=0;if(n)for(let s=0;s<r;s++){const a=e.child(s);for(let l=0;l<a.childCount;l++){const c=a.child(l);s+c.attrs.rowspan>r&&(i+=c.attrs.colspan)}}for(let s=0;s<o.childCount;s++){const a=o.child(s);i+=a.attrs.colspan,a.attrs.rowspan>1&&(n=!0)}t==-1?t=i:t!=i&&(t=Math.max(t,i))}return t}function Ud(e,t,n){e.problems||(e.problems=[]);const r={};for(let o=0;o<e.map.length;o++){const i=e.map[o];if(r[i])continue;r[i]=!0;const s=n.nodeAt(i);if(!s)throw new RangeError(`No cell with offset ${i} found`);let a=null;const l=s.attrs;for(let c=0;c<l.colspan;c++){const u=(o+c)%e.width,d=t[u*2];d!=null&&(!l.colwidth||l.colwidth[c]!=d)&&((a||(a=Wd(l)))[c]=d)}a&&e.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:a})}}function Wd(e){if(e.colwidth)return e.colwidth.slice();const t=[];for(let n=0;n<e.colspan;n++)t.push(0);return t}function Ae(e){let t=e.cached.tableNodeTypes;if(!t){t=e.cached.tableNodeTypes={};for(const n in e.nodes){const r=e.nodes[n],o=r.spec.tableRole;o&&(t[o]=r)}}return t}var Tt=new Le("selectingCells");function vn(e){for(let t=e.depth-1;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return e.node(0).resolve(e.before(t+1));return null}function Fd(e){for(let t=e.depth;t>0;t--){const n=e.node(t).type.spec.tableRole;if(n==="cell"||n==="header_cell")return e.node(t)}return null}function lt(e){const t=e.selection.$head;for(let n=t.depth;n>0;n--)if(t.node(n).type.spec.tableRole=="row")return!0;return!1}function $r(e){const t=e.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&t.node.type.spec.tableRole=="cell")return t.$anchor;const n=vn(t.$head)||Kd(t.$head);if(n)return n;throw new RangeError(`No cell found around position ${t.head}`)}function Kd(e){for(let t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){const r=t.type.spec.tableRole;if(r=="cell"||r=="header_cell")return e.doc.resolve(n)}for(let t=e.nodeBefore,n=e.pos;t;t=t.lastChild,n--){const r=t.type.spec.tableRole;if(r=="cell"||r=="header_cell")return e.doc.resolve(n-t.nodeSize)}}function yo(e){return e.parent.type.spec.tableRole=="row"&&!!e.nodeAfter}function Vd(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function Zo(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function aa(e,t,n){const r=e.node(-1),o=pe.get(r),i=e.start(-1),s=o.nextCell(e.pos-i,t,n);return s==null?null:e.node(0).resolve(i+s)}function Gt(e,t,n=1){const r={...e,colspan:e.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some(o=>o>0)||(r.colwidth=null)),r}function la(e,t,n=1){const r={...e,colspan:e.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let o=0;o<n;o++)r.colwidth.splice(t,0,0)}return r}function Gd(e,t,n){const r=Ae(t.type.schema).header_cell;for(let o=0;o<e.height;o++)if(t.nodeAt(e.map[n+o*e.width]).type!=r)return!1;return!0}var ne=class extends Pe{constructor(e,t=e){const n=e.node(-1),r=pe.get(n),o=e.start(-1),i=r.rectBetween(e.pos-o,t.pos-o),s=e.node(0),a=r.cellsInRect(i).filter(c=>c!=t.pos-o);a.unshift(t.pos-o);const l=a.map(c=>{const u=n.nodeAt(c);if(!u)throw RangeError(`No cell with offset ${c} found`);const d=o+c+1;return new Cl(s.resolve(d),s.resolve(d+u.content.size))});super(l[0].$from,l[0].$to,l),this.$anchorCell=e,this.$headCell=t}map(e,t){const n=e.resolve(t.map(this.$anchorCell.pos)),r=e.resolve(t.map(this.$headCell.pos));if(yo(n)&&yo(r)&&Zo(n,r)){const o=this.$anchorCell.node(-1)!=n.node(-1);return o&&this.isRowSelection()?ne.rowSelection(n,r):o&&this.isColSelection()?ne.colSelection(n,r):new ne(n,r)}return je.between(n,r)}content(){const e=this.$anchorCell.node(-1),t=pe.get(e),n=this.$anchorCell.start(-1),r=t.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),o={},i=[];for(let a=r.top;a<r.bottom;a++){const l=[];for(let c=a*t.width+r.left,u=r.left;u<r.right;u++,c++){const d=t.map[c];if(o[d])continue;o[d]=!0;const p=t.findCell(d);let f=e.nodeAt(d);if(!f)throw RangeError(`No cell with offset ${d} found`);const m=r.left-p.left,b=p.right-r.right;if(m>0||b>0){let k=f.attrs;if(m>0&&(k=Gt(k,0,m)),b>0&&(k=Gt(k,k.colspan-b,b)),p.left<r.left){if(f=f.type.createAndFill(k),!f)throw RangeError(`Could not create cell with attrs ${JSON.stringify(k)}`)}else f=f.type.create(k,f.content)}if(p.top<r.top||p.bottom>r.bottom){const k={...f.attrs,rowspan:Math.min(p.bottom,r.bottom)-Math.max(p.top,r.top)};p.top<r.top?f=f.type.createAndFill(k):f=f.type.create(k,f.content)}l.push(f)}i.push(e.child(a).copy(Ke.from(l)))}const s=this.isColSelection()&&this.isRowSelection()?e:i;return new ht(Ke.from(s),1,1)}replace(e,t=ht.empty){const n=e.steps.length,r=this.ranges;for(let i=0;i<r.length;i++){const{$from:s,$to:a}=r[i],l=e.mapping.slice(n);e.replace(l.map(s.pos),l.map(a.pos),i?ht.empty:t)}const o=Pe.findFrom(e.doc.resolve(e.mapping.slice(n).map(this.to)),-1);o&&e.setSelection(o)}replaceWith(e,t){this.replace(e,new ht(Ke.from(t),0,0))}forEachCell(e){const t=this.$anchorCell.node(-1),n=pe.get(t),r=this.$anchorCell.start(-1),o=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r));for(let i=0;i<o.length;i++)e(t.nodeAt(o[i]),r+o[i])}isColSelection(){const e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;const n=e+this.$anchorCell.nodeAfter.attrs.rowspan,r=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,r)==this.$headCell.node(-1).childCount}static colSelection(e,t=e){const n=e.node(-1),r=pe.get(n),o=e.start(-1),i=r.findCell(e.pos-o),s=r.findCell(t.pos-o),a=e.node(0);return i.top<=s.top?(i.top>0&&(e=a.resolve(o+r.map[i.left])),s.bottom<r.height&&(t=a.resolve(o+r.map[r.width*(r.height-1)+s.right-1]))):(s.top>0&&(t=a.resolve(o+r.map[s.left])),i.bottom<r.height&&(e=a.resolve(o+r.map[r.width*(r.height-1)+i.right-1]))),new ne(e,t)}isRowSelection(){const e=this.$anchorCell.node(-1),t=pe.get(e),n=this.$anchorCell.start(-1),r=t.colCount(this.$anchorCell.pos-n),o=t.colCount(this.$headCell.pos-n);if(Math.min(r,o)>0)return!1;const i=r+this.$anchorCell.nodeAfter.attrs.colspan,s=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(i,s)==t.width}eq(e){return e instanceof ne&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,t=e){const n=e.node(-1),r=pe.get(n),o=e.start(-1),i=r.findCell(e.pos-o),s=r.findCell(t.pos-o),a=e.node(0);return i.left<=s.left?(i.left>0&&(e=a.resolve(o+r.map[i.top*r.width])),s.right<r.width&&(t=a.resolve(o+r.map[r.width*(s.top+1)-1]))):(s.left>0&&(t=a.resolve(o+r.map[s.top*r.width])),i.right<r.width&&(e=a.resolve(o+r.map[r.width*(i.top+1)-1]))),new ne(e,t)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,t){return new ne(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,n=t){return new ne(e.resolve(t),e.resolve(n))}getBookmark(){return new ca(this.$anchorCell.pos,this.$headCell.pos)}};ne.prototype.visible=!1;Pe.jsonID("cell",ne);var ca=class{constructor(e,t){this.anchor=e,this.head=t}map(e){return new ca(e.map(this.anchor),e.map(this.head))}resolve(e){const t=e.resolve(this.anchor),n=e.resolve(this.head);return t.parent.type.spec.tableRole=="row"&&n.parent.type.spec.tableRole=="row"&&t.index()<t.parent.childCount&&n.index()<n.parent.childCount&&Zo(t,n)?new ne(t,n):Pe.near(n,1)}};function qd(e){if(!(e.selection instanceof ne))return null;const t=[];return e.selection.forEachCell((n,r)=>{t.push(yn.node(r,r+n.nodeSize,{class:"selectedCell"}))}),It.create(e.doc,t)}function Xd({$from:e,$to:t}){if(e.pos==t.pos||e.pos<e.pos-6)return!1;let n=e.pos,r=t.pos,o=e.depth;for(;o>=0&&!(e.after(o+1)<e.end(o));o--,n++);for(let i=t.depth;i>=0&&!(t.before(i+1)>t.start(i));i--,r--);return n==r&&/row|table/.test(e.node(o).type.spec.tableRole)}function Zd({$from:e,$to:t}){let n,r;for(let o=e.depth;o>0;o--){const i=e.node(o);if(i.type.spec.tableRole==="cell"||i.type.spec.tableRole==="header_cell"){n=i;break}}for(let o=t.depth;o>0;o--){const i=t.node(o);if(i.type.spec.tableRole==="cell"||i.type.spec.tableRole==="header_cell"){r=i;break}}return n!==r&&t.parentOffset===0}function Jd(e,t,n){const r=(t||e).selection,o=(t||e).doc;let i,s;if(r instanceof Ro&&(s=r.node.type.spec.tableRole)){if(s=="cell"||s=="header_cell")i=ne.create(o,r.from);else if(s=="row"){const a=o.resolve(r.from+1);i=ne.rowSelection(a,a)}else if(!n){const a=pe.get(r.node),l=r.from+1,c=l+a.map[a.width*a.height-1];i=ne.create(o,l+1,c)}}else r instanceof je&&Xd(r)?i=je.create(o,r.from):r instanceof je&&Zd(r)&&(i=je.create(o,r.$from.start(),r.$from.end()));return i&&(t||(t=e.tr)).setSelection(i),t}var Qd=new Le("fix-tables");function ua(e,t,n,r){const o=e.childCount,i=t.childCount;e:for(let s=0,a=0;s<i;s++){const l=t.child(s);for(let c=a,u=Math.min(o,s+3);c<u;c++)if(e.child(c)==l){a=c+1,n+=l.nodeSize;continue e}r(l,n),a<o&&e.child(a).sameMarkup(l)?ua(e.child(a),l,n+1,r):l.nodesBetween(0,l.content.size,r,n+1),n+=l.nodeSize}}function da(e,t){let n;const r=(o,i)=>{o.type.spec.tableRole=="table"&&(n=Yd(e,o,i,n))};return t?t.doc!=e.doc&&ua(t.doc,e.doc,0,r):e.doc.descendants(r),n}function Yd(e,t,n,r){const o=pe.get(t);if(!o.problems)return r;r||(r=e.tr);const i=[];for(let l=0;l<o.height;l++)i.push(0);for(let l=0;l<o.problems.length;l++){const c=o.problems[l];if(c.type=="collision"){const u=t.nodeAt(c.pos);if(!u)continue;const d=u.attrs;for(let p=0;p<d.rowspan;p++)i[c.row+p]+=c.n;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,Gt(d,d.colspan-c.n,c.n))}else if(c.type=="missing")i[c.row]+=c.n;else if(c.type=="overlong_rowspan"){const u=t.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...u.attrs,rowspan:u.attrs.rowspan-c.n})}else if(c.type=="colwidth mismatch"){const u=t.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...u.attrs,colwidth:c.colwidth})}}let s,a;for(let l=0;l<i.length;l++)i[l]&&(s==null&&(s=l),a=l);for(let l=0,c=n+1;l<o.height;l++){const u=t.child(l),d=c+u.nodeSize,p=i[l];if(p>0){let f="cell";u.firstChild&&(f=u.firstChild.type.spec.tableRole);const m=[];for(let k=0;k<p;k++){const A=Ae(e.schema)[f].createAndFill();A&&m.push(A)}const b=(l==0||s==l-1)&&a==l?c+1:d-1;r.insert(r.mapping.map(b),m)}c=d}return r.setMeta(Qd,{fixTables:!0})}function ep(e){if(!e.size)return null;let{content:t,openStart:n,openEnd:r}=e;for(;t.childCount==1&&(n>0&&r>0||t.child(0).type.spec.tableRole=="table");)n--,r--,t=t.child(0).content;const o=t.child(0),i=o.type.spec.tableRole,s=o.type.schema,a=[];if(i=="row")for(let l=0;l<t.childCount;l++){let c=t.child(l).content;const u=l?0:Math.max(0,n-1),d=l<t.childCount-1?0:Math.max(0,r-1);(u||d)&&(c=vo(Ae(s).row,new ht(c,u,d)).content),a.push(c)}else if(i=="cell"||i=="header_cell")a.push(n||r?vo(Ae(s).row,new ht(t,n,r)).content:t);else return null;return tp(s,a)}function tp(e,t){const n=[];for(let o=0;o<t.length;o++){const i=t[o];for(let s=i.childCount-1;s>=0;s--){const{rowspan:a,colspan:l}=i.child(s).attrs;for(let c=o;c<o+a;c++)n[c]=(n[c]||0)+l}}let r=0;for(let o=0;o<n.length;o++)r=Math.max(r,n[o]);for(let o=0;o<n.length;o++)if(o>=t.length&&t.push(Ke.empty),n[o]<r){const i=Ae(e).cell.createAndFill(),s=[];for(let a=n[o];a<r;a++)s.push(i);t[o]=t[o].append(Ke.from(s))}return{height:t.length,width:r,rows:t}}function vo(e,t){const n=e.createAndFill();return new Tl(n).replace(0,n.content.size,t).doc}function np({width:e,height:t,rows:n},r,o){if(e!=r){const i=[],s=[];for(let a=0;a<n.length;a++){const l=n[a],c=[];for(let u=i[a]||0,d=0;u<r;d++){let p=l.child(d%l.childCount);u+p.attrs.colspan>r&&(p=p.type.createChecked(Gt(p.attrs,p.attrs.colspan,u+p.attrs.colspan-r),p.content)),c.push(p),u+=p.attrs.colspan;for(let f=1;f<p.attrs.rowspan;f++)i[a+f]=(i[a+f]||0)+p.attrs.colspan}s.push(Ke.from(c))}n=s,e=r}if(t!=o){const i=[];for(let s=0,a=0;s<o;s++,a++){const l=[],c=n[a%t];for(let u=0;u<c.childCount;u++){let d=c.child(u);s+d.attrs.rowspan>o&&(d=d.type.create({...d.attrs,rowspan:Math.max(1,o-d.attrs.rowspan)},d.content)),l.push(d)}i.push(Ke.from(l))}n=i,t=o}return{width:e,height:t,rows:n}}function rp(e,t,n,r,o,i,s){const a=e.doc.type.schema,l=Ae(a);let c,u;if(o>t.width)for(let d=0,p=0;d<t.height;d++){const f=n.child(d);p+=f.nodeSize;const m=[];let b;f.lastChild==null||f.lastChild.type==l.cell?b=c||(c=l.cell.createAndFill()):b=u||(u=l.header_cell.createAndFill());for(let k=t.width;k<o;k++)m.push(b);e.insert(e.mapping.slice(s).map(p-1+r),m)}if(i>t.height){const d=[];for(let m=0,b=(t.height-1)*t.width;m<Math.max(t.width,o);m++){const k=m>=t.width?!1:n.nodeAt(t.map[b+m]).type==l.header_cell;d.push(k?u||(u=l.header_cell.createAndFill()):c||(c=l.cell.createAndFill()))}const p=l.row.create(null,Ke.from(d)),f=[];for(let m=t.height;m<i;m++)f.push(p);e.insert(e.mapping.slice(s).map(r+n.nodeSize-2),f)}return!!(c||u)}function Pi(e,t,n,r,o,i,s,a){if(s==0||s==t.height)return!1;let l=!1;for(let c=o;c<i;c++){const u=s*t.width+c,d=t.map[u];if(t.map[u-t.width]==d){l=!0;const p=n.nodeAt(d),{top:f,left:m}=t.findCell(d);e.setNodeMarkup(e.mapping.slice(a).map(d+r),null,{...p.attrs,rowspan:s-f}),e.insert(e.mapping.slice(a).map(t.positionAt(s,m,n)),p.type.createAndFill({...p.attrs,rowspan:f+p.attrs.rowspan-s})),c+=p.attrs.colspan-1}}return l}function ji(e,t,n,r,o,i,s,a){if(s==0||s==t.width)return!1;let l=!1;for(let c=o;c<i;c++){const u=c*t.width+s,d=t.map[u];if(t.map[u-1]==d){l=!0;const p=n.nodeAt(d),f=t.colCount(d),m=e.mapping.slice(a).map(d+r);e.setNodeMarkup(m,null,Gt(p.attrs,s-f,p.attrs.colspan-(s-f))),e.insert(m+p.nodeSize,p.type.createAndFill(Gt(p.attrs,0,s-f))),c+=p.attrs.rowspan-1}}return l}function $i(e,t,n,r,o){let i=n?e.doc.nodeAt(n-1):e.doc;if(!i)throw new Error("No table found");let s=pe.get(i);const{top:a,left:l}=r,c=l+o.width,u=a+o.height,d=e.tr;let p=0;function f(){if(i=n?d.doc.nodeAt(n-1):d.doc,!i)throw new Error("No table found");s=pe.get(i),p=d.mapping.maps.length}rp(d,s,i,n,c,u,p)&&f(),Pi(d,s,i,n,l,c,a,p)&&f(),Pi(d,s,i,n,l,c,u,p)&&f(),ji(d,s,i,n,a,u,l,p)&&f(),ji(d,s,i,n,a,u,c,p)&&f();for(let m=a;m<u;m++){const b=s.positionAt(m,l,i),k=s.positionAt(m,c,i);d.replace(d.mapping.slice(p).map(b+n),d.mapping.slice(p).map(k+n),new ht(o.rows[m-a],0,0))}f(),d.setSelection(new ne(d.doc.resolve(n+s.positionAt(a,l,i)),d.doc.resolve(n+s.positionAt(u-1,c-1,i)))),t(d)}var op=Hs({ArrowLeft:Yn("horiz",-1),ArrowRight:Yn("horiz",1),ArrowUp:Yn("vert",-1),ArrowDown:Yn("vert",1),"Shift-ArrowLeft":er("horiz",-1),"Shift-ArrowRight":er("horiz",1),"Shift-ArrowUp":er("vert",-1),"Shift-ArrowDown":er("vert",1),Backspace:tr,"Mod-Backspace":tr,Delete:tr,"Mod-Delete":tr});function dr(e,t,n){return n.eq(e.selection)?!1:(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function Yn(e,t){return(n,r,o)=>{if(!o)return!1;const i=n.selection;if(i instanceof ne)return dr(n,r,Pe.near(i.$headCell,t));if(e!="horiz"&&!i.empty)return!1;const s=pa(o,e,t);if(s==null)return!1;if(e=="horiz")return dr(n,r,Pe.near(n.doc.resolve(i.head+t),t));{const a=n.doc.resolve(s),l=aa(a,e,t);let c;return l?c=Pe.near(l,1):t<0?c=Pe.near(n.doc.resolve(a.before(-1)),-1):c=Pe.near(n.doc.resolve(a.after(-1)),1),dr(n,r,c)}}}function er(e,t){return(n,r,o)=>{if(!o)return!1;const i=n.selection;let s;if(i instanceof ne)s=i;else{const l=pa(o,e,t);if(l==null)return!1;s=new ne(n.doc.resolve(l))}const a=aa(s.$headCell,e,t);return a?dr(n,r,new ne(s.$anchorCell,a)):!1}}function tr(e,t){const n=e.selection;if(!(n instanceof ne))return!1;if(t){const r=e.tr,o=Ae(e.schema).cell.createAndFill().content;n.forEachCell((i,s)=>{i.content.eq(o)||r.replace(r.mapping.map(s+1),r.mapping.map(s+i.nodeSize-1),new ht(o,0,0))}),r.docChanged&&t(r)}return!0}function ip(e,t){const n=e.state.doc,r=vn(n.resolve(t));return r?(e.dispatch(e.state.tr.setSelection(new ne(r))),!0):!1}function sp(e,t,n){if(!lt(e.state))return!1;let r=ep(n);const o=e.state.selection;if(o instanceof ne){r||(r={width:1,height:1,rows:[Ke.from(vo(Ae(e.state.schema).cell,n))]});const i=o.$anchorCell.node(-1),s=o.$anchorCell.start(-1),a=pe.get(i).rectBetween(o.$anchorCell.pos-s,o.$headCell.pos-s);return r=np(r,a.right-a.left,a.bottom-a.top),$i(e.state,e.dispatch,s,a,r),!0}else if(r){const i=$r(e.state),s=i.start(-1);return $i(e.state,e.dispatch,s,pe.get(i.node(-1)).findCell(i.pos-s),r),!0}else return!1}function ap(e,t){var n;if(t.ctrlKey||t.metaKey)return;const r=zi(e,t.target);let o;if(t.shiftKey&&e.state.selection instanceof ne)i(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&r&&(o=vn(e.state.selection.$anchor))!=null&&((n=Qr(e,t))==null?void 0:n.pos)!=o.pos)i(o,t),t.preventDefault();else if(!r)return;function i(l,c){let u=Qr(e,c);const d=Tt.getState(e.state)==null;if(!u||!Zo(l,u))if(d)u=l;else return;const p=new ne(l,u);if(d||!e.state.selection.eq(p)){const f=e.state.tr.setSelection(p);d&&f.setMeta(Tt,l.pos),e.dispatch(f)}}function s(){e.root.removeEventListener("mouseup",s),e.root.removeEventListener("dragstart",s),e.root.removeEventListener("mousemove",a),Tt.getState(e.state)!=null&&e.dispatch(e.state.tr.setMeta(Tt,-1))}function a(l){const c=l,u=Tt.getState(e.state);let d;if(u!=null)d=e.state.doc.resolve(u);else if(zi(e,c.target)!=r&&(d=Qr(e,t),!d))return s();d&&i(d,c)}e.root.addEventListener("mouseup",s),e.root.addEventListener("dragstart",s),e.root.addEventListener("mousemove",a)}function pa(e,t,n){if(!(e.state.selection instanceof je))return null;const{$head:r}=e.state.selection;for(let o=r.depth-1;o>=0;o--){const i=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:i.childCount))return null;if(i.type.spec.tableRole=="cell"||i.type.spec.tableRole=="header_cell"){const a=r.before(o),l=t=="vert"?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(l)?a:null}}return null}function zi(e,t){for(;t&&t!=e.dom;t=t.parentNode)if(t.nodeName=="TD"||t.nodeName=="TH")return t;return null}function Qr(e,t){const n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?vn(e.state.doc.resolve(n.pos)):null}var lp=class{constructor(t,n){this.node=t,this.cellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),wo(t,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!=this.node.type?!1:(this.node=t,wo(t,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(t){return t.type=="attributes"&&(t.target==this.table||this.colgroup.contains(t.target))}};function wo(e,t,n,r,o,i){var s;let a=0,l=!0,c=t.firstChild;const u=e.firstChild;if(u){for(let d=0,p=0;d<u.childCount;d++){const{colspan:f,colwidth:m}=u.child(d).attrs;for(let b=0;b<f;b++,p++){const k=o==p?i:m&&m[b],A=k?k+"px":"";a+=k||r,k||(l=!1),c?(c.style.width!=A&&(c.style.width=A),c=c.nextSibling):t.appendChild(document.createElement("col")).style.width=A}}for(;c;){const d=c.nextSibling;(s=c.parentNode)==null||s.removeChild(c),c=d}l?(n.style.width=a+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=a+"px")}}var We=new Le("tableColumnResizing");function cp({handleWidth:e=5,cellMinWidth:t=25,View:n=lp,lastColumnResizable:r=!0}={}){const o=new Ne({key:We,state:{init(i,s){return o.spec.props.nodeViews[Ae(s.schema).table.name]=(a,l)=>new n(a,t,l),new pr(-1,!1)},apply(i,s){return s.apply(i)}},props:{attributes:i=>{const s=We.getState(i);return s&&s.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(i,s)=>{up(i,s,e,t,r)},mouseleave:i=>{dp(i)},mousedown:(i,s)=>{pp(i,s,t)}},decorations:i=>{const s=We.getState(i);if(s&&s.activeHandle>-1)return yp(i,s.activeHandle)},nodeViews:{}}});return o}var pr=class{constructor(e,t){this.activeHandle=e,this.dragging=t}apply(e){const t=this,n=e.getMeta(We);if(n&&n.setHandle!=null)return new pr(n.setHandle,!1);if(n&&n.setDragging!==void 0)return new pr(t.activeHandle,n.setDragging);if(t.activeHandle>-1&&e.docChanged){let r=e.mapping.map(t.activeHandle,-1);return yo(e.doc.resolve(r))||(r=-1),new pr(r,t.dragging)}return t}};function up(e,t,n,r,o){const i=We.getState(e.state);if(i&&!i.dragging){const s=hp(t.target);let a=-1;if(s){const{left:l,right:c}=s.getBoundingClientRect();t.clientX-l<=n?a=Ui(e,t,"left"):c-t.clientX<=n&&(a=Ui(e,t,"right"))}if(a!=i.activeHandle){if(!o&&a!==-1){const l=e.state.doc.resolve(a),c=l.node(-1),u=pe.get(c),d=l.start(-1);if(u.colCount(l.pos-d)+l.nodeAfter.attrs.colspan-1==u.width-1)return}fa(e,a)}}}function dp(e){const t=We.getState(e.state);t&&t.activeHandle>-1&&!t.dragging&&fa(e,-1)}function pp(e,t,n){const r=We.getState(e.state);if(!r||r.activeHandle==-1||r.dragging)return!1;const o=e.state.doc.nodeAt(r.activeHandle),i=fp(e,r.activeHandle,o.attrs);e.dispatch(e.state.tr.setMeta(We,{setDragging:{startX:t.clientX,startWidth:i}}));function s(l){window.removeEventListener("mouseup",s),window.removeEventListener("mousemove",a);const c=We.getState(e.state);c!=null&&c.dragging&&(gp(e,c.activeHandle,Wi(c.dragging,l,n)),e.dispatch(e.state.tr.setMeta(We,{setDragging:null})))}function a(l){if(!l.which)return s(l);const c=We.getState(e.state);if(c&&c.dragging){const u=Wi(c.dragging,l,n);mp(e,c.activeHandle,u,n)}}return window.addEventListener("mouseup",s),window.addEventListener("mousemove",a),t.preventDefault(),!0}function fp(e,t,{colspan:n,colwidth:r}){const o=r&&r[r.length-1];if(o)return o;const i=e.domAtPos(t);let a=i.node.childNodes[i.offset].offsetWidth,l=n;if(r)for(let c=0;c<n;c++)r[c]&&(a-=r[c],l--);return a/l}function hp(e){for(;e&&e.nodeName!="TD"&&e.nodeName!="TH";)e=e.classList&&e.classList.contains("ProseMirror")?null:e.parentNode;return e}function Ui(e,t,n){const r=e.posAtCoords({left:t.clientX,top:t.clientY});if(!r)return-1;const{pos:o}=r,i=vn(e.state.doc.resolve(o));if(!i)return-1;if(n=="right")return i.pos;const s=pe.get(i.node(-1)),a=i.start(-1),l=s.map.indexOf(i.pos-a);return l%s.width==0?-1:a+s.map[l-1]}function Wi(e,t,n){const r=t.clientX-e.startX;return Math.max(n,e.startWidth+r)}function fa(e,t){e.dispatch(e.state.tr.setMeta(We,{setHandle:t}))}function gp(e,t,n){const r=e.state.doc.resolve(t),o=r.node(-1),i=pe.get(o),s=r.start(-1),a=i.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,l=e.state.tr;for(let c=0;c<i.height;c++){const u=c*i.width+a;if(c&&i.map[u]==i.map[u-i.width])continue;const d=i.map[u],p=o.nodeAt(d).attrs,f=p.colspan==1?0:a-i.colCount(d);if(p.colwidth&&p.colwidth[f]==n)continue;const m=p.colwidth?p.colwidth.slice():bp(p.colspan);m[f]=n,l.setNodeMarkup(s+d,null,{...p,colwidth:m})}l.docChanged&&e.dispatch(l)}function mp(e,t,n,r){const o=e.state.doc.resolve(t),i=o.node(-1),s=o.start(-1),a=pe.get(i).colCount(o.pos-s)+o.nodeAfter.attrs.colspan-1;let l=e.domAtPos(o.start(-1)).node;for(;l&&l.nodeName!="TABLE";)l=l.parentNode;l&&wo(i,l.firstChild,l,r,a,n)}function bp(e){return Array(e).fill(0)}function yp(e,t){const n=[],r=e.doc.resolve(t),o=r.node(-1);if(!o)return It.empty;const i=pe.get(o),s=r.start(-1),a=i.colCount(r.pos-s)+r.nodeAfter.attrs.colspan;for(let l=0;l<i.height;l++){const c=a+l*i.width-1;if((a==i.width||i.map[c]!=i.map[c+1])&&(l==0||i.map[c-1]!=i.map[c-1-i.width])){const u=i.map[c],d=s+u+o.nodeAt(u).nodeSize-1,p=document.createElement("div");p.className="column-resize-handle",n.push(yn.widget(d,p))}}return It.create(e.doc,n)}function yt(e){const t=e.selection,n=$r(e),r=n.node(-1),o=n.start(-1),i=pe.get(r);return{...t instanceof ne?i.rectBetween(t.$anchorCell.pos-o,t.$headCell.pos-o):i.findCell(n.pos-o),tableStart:o,map:i,table:r}}function ha(e,{map:t,tableStart:n,table:r},o){let i=o>0?-1:0;Gd(t,r,o+i)&&(i=o==0||o==t.width?null:0);for(let s=0;s<t.height;s++){const a=s*t.width+o;if(o>0&&o<t.width&&t.map[a-1]==t.map[a]){const l=t.map[a],c=r.nodeAt(l);e.setNodeMarkup(e.mapping.map(n+l),null,la(c.attrs,o-t.colCount(l))),s+=c.attrs.rowspan-1}else{const l=i==null?Ae(r.type.schema).cell:r.nodeAt(t.map[a+i]).type,c=t.positionAt(s,o,r);e.insert(e.mapping.map(n+c),l.createAndFill())}}return e}function vp(e,t){if(!lt(e))return!1;if(t){const n=yt(e);t(ha(e.tr,n,n.left))}return!0}function wp(e,t){if(!lt(e))return!1;if(t){const n=yt(e);t(ha(e.tr,n,n.right))}return!0}function xp(e,{map:t,table:n,tableStart:r},o){const i=e.mapping.maps.length;for(let s=0;s<t.height;){const a=s*t.width+o,l=t.map[a],c=n.nodeAt(l),u=c.attrs;if(o>0&&t.map[a-1]==l||o<t.width-1&&t.map[a+1]==l)e.setNodeMarkup(e.mapping.slice(i).map(r+l),null,Gt(u,o-t.colCount(l)));else{const d=e.mapping.slice(i).map(r+l);e.delete(d,d+c.nodeSize)}s+=u.rowspan}}function kp(e,t){if(!lt(e))return!1;if(t){const n=yt(e),r=e.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let o=n.right-1;xp(r,n,o),o!=n.left;o--){const i=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!i)throw RangeError("No table found");n.table=i,n.map=pe.get(i)}t(r)}return!0}function Ep(e,t,n){var r;const o=Ae(t.type.schema).header_cell;for(let i=0;i<e.width;i++)if(((r=t.nodeAt(e.map[i+n*e.width]))==null?void 0:r.type)!=o)return!1;return!0}function ga(e,{map:t,tableStart:n,table:r},o){var i;let s=n;for(let c=0;c<o;c++)s+=r.child(c).nodeSize;const a=[];let l=o>0?-1:0;Ep(t,r,o+l)&&(l=o==0||o==t.height?null:0);for(let c=0,u=t.width*o;c<t.width;c++,u++)if(o>0&&o<t.height&&t.map[u]==t.map[u-t.width]){const d=t.map[u],p=r.nodeAt(d).attrs;e.setNodeMarkup(n+d,null,{...p,rowspan:p.rowspan+1}),c+=p.colspan-1}else{const d=l==null?Ae(r.type.schema).cell:(i=r.nodeAt(t.map[u+l*t.width]))==null?void 0:i.type,p=d==null?void 0:d.createAndFill();p&&a.push(p)}return e.insert(s,Ae(r.type.schema).row.create(null,a)),e}function Ap(e,t){if(!lt(e))return!1;if(t){const n=yt(e);t(ga(e.tr,n,n.top))}return!0}function _p(e,t){if(!lt(e))return!1;if(t){const n=yt(e);t(ga(e.tr,n,n.bottom))}return!0}function Sp(e,{map:t,table:n,tableStart:r},o){let i=0;for(let l=0;l<o;l++)i+=n.child(l).nodeSize;const s=i+n.child(o).nodeSize,a=e.mapping.maps.length;e.delete(i+r,s+r);for(let l=0,c=o*t.width;l<t.width;l++,c++){const u=t.map[c];if(o>0&&u==t.map[c-t.width]){const d=n.nodeAt(u).attrs;e.setNodeMarkup(e.mapping.slice(a).map(u+r),null,{...d,rowspan:d.rowspan-1}),l+=d.colspan-1}else if(o<t.width&&u==t.map[c+t.width]){const d=n.nodeAt(u),p=d.attrs,f=d.type.create({...p,rowspan:d.attrs.rowspan-1},d.content),m=t.positionAt(o+1,l,n);e.insert(e.mapping.slice(a).map(r+m),f),l+=p.colspan-1}}}function Mp(e,t){if(!lt(e))return!1;if(t){const n=yt(e),r=e.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let o=n.bottom-1;Sp(r,n,o),o!=n.top;o--){const i=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!i)throw RangeError("No table found");n.table=i,n.map=pe.get(n.table)}t(r)}return!0}function Fi(e){const t=e.content;return t.childCount==1&&t.child(0).isTextblock&&t.child(0).childCount==0}function Cp({width:e,height:t,map:n},r){let o=r.top*e+r.left,i=o,s=(r.bottom-1)*e+r.left,a=o+(r.right-r.left-1);for(let l=r.top;l<r.bottom;l++){if(r.left>0&&n[i]==n[i-1]||r.right<e&&n[a]==n[a+1])return!0;i+=e,a+=e}for(let l=r.left;l<r.right;l++){if(r.top>0&&n[o]==n[o-e]||r.bottom<t&&n[s]==n[s+e])return!0;o++,s++}return!1}function Ki(e,t){const n=e.selection;if(!(n instanceof ne)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=yt(e),{map:o}=r;if(Cp(o,r))return!1;if(t){const i=e.tr,s={};let a=Ke.empty,l,c;for(let u=r.top;u<r.bottom;u++)for(let d=r.left;d<r.right;d++){const p=o.map[u*o.width+d],f=r.table.nodeAt(p);if(!(s[p]||!f))if(s[p]=!0,l==null)l=p,c=f;else{Fi(f)||(a=a.append(f.content));const m=i.mapping.map(p+r.tableStart);i.delete(m,m+f.nodeSize)}}if(l==null||c==null)return!0;if(i.setNodeMarkup(l+r.tableStart,null,{...la(c.attrs,c.attrs.colspan,r.right-r.left-c.attrs.colspan),rowspan:r.bottom-r.top}),a.size){const u=l+1+c.content.size,d=Fi(c)?l+1:u;i.replaceWith(d+r.tableStart,u+r.tableStart,a)}i.setSelection(new ne(i.doc.resolve(l+r.tableStart))),t(i)}return!0}function Vi(e,t){const n=Ae(e.schema);return Tp(({node:r})=>n[r.type.spec.tableRole])(e,t)}function Tp(e){return(t,n)=>{var r;const o=t.selection;let i,s;if(o instanceof ne){if(o.$anchorCell.pos!=o.$headCell.pos)return!1;i=o.$anchorCell.nodeAfter,s=o.$anchorCell.pos}else{if(i=Fd(o.$from),!i)return!1;s=(r=vn(o.$from))==null?void 0:r.pos}if(i==null||s==null||i.attrs.colspan==1&&i.attrs.rowspan==1)return!1;if(n){let a=i.attrs;const l=[],c=a.colwidth;a.rowspan>1&&(a={...a,rowspan:1}),a.colspan>1&&(a={...a,colspan:1});const u=yt(t),d=t.tr;for(let f=0;f<u.right-u.left;f++)l.push(c?{...a,colwidth:c&&c[f]?[c[f]]:null}:a);let p;for(let f=u.top;f<u.bottom;f++){let m=u.map.positionAt(f,u.left,u.table);f==u.top&&(m+=i.nodeSize);for(let b=u.left,k=0;b<u.right;b++,k++)b==u.left&&f==u.top||d.insert(p=d.mapping.map(m+u.tableStart,1),e({node:i,row:f,col:b}).createAndFill(l[k]))}d.setNodeMarkup(s,e({node:i,row:u.top,col:u.left}),l[0]),o instanceof ne&&d.setSelection(new ne(d.doc.resolve(o.$anchorCell.pos),p?d.doc.resolve(p):void 0)),n(d)}return!0}}function Op(e,t){return function(n,r){if(!lt(n))return!1;const o=$r(n);if(o.nodeAfter.attrs[e]===t)return!1;if(r){const i=n.tr;n.selection instanceof ne?n.selection.forEachCell((s,a)=>{s.attrs[e]!==t&&i.setNodeMarkup(a,null,{...s.attrs,[e]:t})}):i.setNodeMarkup(o.pos,null,{...o.nodeAfter.attrs,[e]:t}),r(i)}return!0}}function Rp(e){return function(t,n){if(!lt(t))return!1;if(n){const r=Ae(t.schema),o=yt(t),i=t.tr,s=o.map.cellsInRect(e=="column"?{left:o.left,top:0,right:o.right,bottom:o.map.height}:e=="row"?{left:0,top:o.top,right:o.map.width,bottom:o.bottom}:o),a=s.map(l=>o.table.nodeAt(l));for(let l=0;l<s.length;l++)a[l].type==r.header_cell&&i.setNodeMarkup(o.tableStart+s[l],r.cell,a[l].attrs);if(i.steps.length==0)for(let l=0;l<s.length;l++)i.setNodeMarkup(o.tableStart+s[l],r.header_cell,a[l].attrs);n(i)}return!0}}function Gi(e,t,n){const r=t.map.cellsInRect({left:0,top:0,right:e=="row"?t.map.width:1,bottom:e=="column"?t.map.height:1});for(let o=0;o<r.length;o++){const i=t.table.nodeAt(r[o]);if(i&&i.type!==n.header_cell)return!1}return!0}function Dn(e,t){return t=t||{useDeprecatedLogic:!1},t.useDeprecatedLogic?Rp(e):function(n,r){if(!lt(n))return!1;if(r){const o=Ae(n.schema),i=yt(n),s=n.tr,a=Gi("row",i,o),l=Gi("column",i,o),u=(e==="column"?a:e==="row"?l:!1)?1:0,d=e=="column"?{left:0,top:u,right:1,bottom:i.map.height}:e=="row"?{left:u,top:0,right:i.map.width,bottom:1}:i,p=e=="column"?l?o.cell:o.header_cell:e=="row"?a?o.cell:o.header_cell:o.cell;i.map.cellsInRect(d).forEach(f=>{const m=f+i.tableStart,b=s.doc.nodeAt(m);b&&s.setNodeMarkup(m,p,b.attrs)}),r(s)}return!0}}Dn("row",{useDeprecatedLogic:!0});Dn("column",{useDeprecatedLogic:!0});var Np=Dn("cell",{useDeprecatedLogic:!0});function Lp(e,t){if(t<0){const n=e.nodeBefore;if(n)return e.pos-n.nodeSize;for(let r=e.index(-1)-1,o=e.before();r>=0;r--){const i=e.node(-1).child(r),s=i.lastChild;if(s)return o-1-s.nodeSize;o-=i.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;const n=e.node(-1);for(let r=e.indexAfter(-1),o=e.after();r<n.childCount;r++){const i=n.child(r);if(i.childCount)return o+1;o+=i.nodeSize}}return null}function qi(e){return function(t,n){if(!lt(t))return!1;const r=Lp($r(t),e);if(r==null)return!1;if(n){const o=t.doc.resolve(r);n(t.tr.setSelection(je.between(o,Vd(o))).scrollIntoView())}return!0}}function Ip(e,t){const n=e.selection.$anchor;for(let r=n.depth;r>0;r--)if(n.node(r).type.spec.tableRole=="table")return t&&t(e.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}function Hp({allowTableNodeSelection:e=!1}={}){return new Ne({key:Tt,state:{init(){return null},apply(t,n){const r=t.getMeta(Tt);if(r!=null)return r==-1?null:r;if(n==null||!t.docChanged)return n;const{deleted:o,pos:i}=t.mapping.mapResult(n);return o?null:i}},props:{decorations:qd,handleDOMEvents:{mousedown:ap},createSelectionBetween(t){return Tt.getState(t.state)!=null?t.state.selection:null},handleTripleClick:ip,handleKeyDown:op,handlePaste:sp},appendTransaction(t,n,r){return Jd(r,da(r,n),e)}})}function Xi(e,t,n,r,o,i){let s=0,a=!0,l=t.firstChild;const c=e.firstChild;for(let u=0,d=0;u<c.childCount;u+=1){const{colspan:p,colwidth:f}=c.child(u).attrs;for(let m=0;m<p;m+=1,d+=1){const b=o===d?i:f&&f[m],k=b?`${b}px`:"";s+=b||r,b||(a=!1),l?(l.style.width!==k&&(l.style.width=k),l=l.nextSibling):t.appendChild(document.createElement("col")).style.width=k}}for(;l;){const u=l.nextSibling;l.parentNode.removeChild(l),l=u}a?(n.style.width=`${s}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${s}px`)}class Bp{constructor(t,n){this.node=t,this.cellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Xi(t,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!==this.node.type?!1:(this.node=t,Xi(t,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(t){return t.type==="attributes"&&(t.target===this.table||this.colgroup.contains(t.target))}}function Zi(e,t){return t?e.createChecked(null,t):e.createAndFill()}function Dp(e){if(e.cached.tableNodeTypes)return e.cached.tableNodeTypes;const t={};return Object.keys(e.nodes).forEach(n=>{const r=e.nodes[n];r.spec.tableRole&&(t[r.spec.tableRole]=r)}),e.cached.tableNodeTypes=t,t}function Pp(e,t,n,r,o){const i=Dp(e),s=[],a=[];for(let c=0;c<n;c+=1){const u=Zi(i.cell,o);if(u&&a.push(u),r){const d=Zi(i.header_cell,o);d&&s.push(d)}}const l=[];for(let c=0;c<t;c+=1)l.push(i.row.createChecked(null,r&&c===0?s:a));return i.table.createChecked(null,l)}function jp(e){return e instanceof ne}const nr=({editor:e})=>{const{selection:t}=e.state;if(!jp(t))return!1;let n=0;const r=Ol(t.ranges[0].$from,i=>i.type.name==="table");return r==null||r.node.descendants(i=>{if(i.type.name==="table")return!1;["tableCell","tableHeader"].includes(i.type.name)&&(n+=1)}),n===t.ranges.length?(e.commands.deleteTable(),!0):!1},$p=me.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:Bp,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({HTMLAttributes:e}){return["table",oe(this.options.HTMLAttributes,e),["tbody",0]]},addCommands(){return{insertTable:({rows:e=3,cols:t=3,withHeaderRow:n=!0}={})=>({tr:r,dispatch:o,editor:i})=>{const s=Pp(i.schema,e,t,n);if(o){const a=r.selection.anchor+1;r.replaceSelectionWith(s).scrollIntoView().setSelection(je.near(r.doc.resolve(a)))}return!0},addColumnBefore:()=>({state:e,dispatch:t})=>vp(e,t),addColumnAfter:()=>({state:e,dispatch:t})=>wp(e,t),deleteColumn:()=>({state:e,dispatch:t})=>kp(e,t),addRowBefore:()=>({state:e,dispatch:t})=>Ap(e,t),addRowAfter:()=>({state:e,dispatch:t})=>_p(e,t),deleteRow:()=>({state:e,dispatch:t})=>Mp(e,t),deleteTable:()=>({state:e,dispatch:t})=>Ip(e,t),mergeCells:()=>({state:e,dispatch:t})=>Ki(e,t),splitCell:()=>({state:e,dispatch:t})=>Vi(e,t),toggleHeaderColumn:()=>({state:e,dispatch:t})=>Dn("column")(e,t),toggleHeaderRow:()=>({state:e,dispatch:t})=>Dn("row")(e,t),toggleHeaderCell:()=>({state:e,dispatch:t})=>Np(e,t),mergeOrSplit:()=>({state:e,dispatch:t})=>Ki(e,t)?!0:Vi(e,t),setCellAttribute:(e,t)=>({state:n,dispatch:r})=>Op(e,t)(n,r),goToNextCell:()=>({state:e,dispatch:t})=>qi(1)(e,t),goToPreviousCell:()=>({state:e,dispatch:t})=>qi(-1)(e,t),fixTables:()=>({state:e,dispatch:t})=>(t&&da(e),!0),setCellSelection:e=>({tr:t,dispatch:n})=>{if(n){const r=ne.create(t.doc,e.anchorCell,e.headCell);t.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:nr,"Mod-Backspace":nr,Delete:nr,"Mod-Delete":nr}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[cp({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],Hp({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(e){const t={name:e.name,options:e.options,storage:e.storage};return{tableRole:Bs(Ds(e,"tableRole",t))}}}),zp=me.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{const t=e.getAttribute("colwidth");return t?[parseInt(t,10)]:null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:e}){return["td",oe(this.options.HTMLAttributes,e),0]}}),Up=me.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{const t=e.getAttribute("colwidth");return t?[parseInt(t,10)]:null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:e}){return["th",oe(this.options.HTMLAttributes,e),0]}}),Wp=me.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:e}){return["tr",oe(this.options.HTMLAttributes,e),0]}}),Fp=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Kp=me.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:e}){return["img",oe(this.options.HTMLAttributes,e)]},addCommands(){return{setImage:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addInputRules(){return[Ps({find:Fp,type:this.type,getAttributes:e=>{const[,,t,n,r]=e;return{src:n,alt:t,title:r}}})]}}),Vp=/(?:^|\s)((?:~)((?:[^~]+))(?:~))$/,Gp=/(?:^|\s)((?:~)((?:[^~]+))(?:~))/g,qp=nc.extend({addInputRules(){return[Lt({find:Vp,type:this.type})]},addPasteRules(){return[kt({find:Gp,type:this.type})]}}),Xp=Cc.extend({addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),multicolor:!0}}}),Zp=Lc.extend({addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),placeholder:({node:t})=>t.type.name==="heading"?"H"+t.attrs.level:t.type.name==="codeBlock"?"":"键入文字或'/'呼出菜单"}}}),Jp=Au.extend({}).configure({types:["paragraph","image"]});var Oe="top",Ge="bottom",qe="right",Re="left",Jo="auto",Wn=[Oe,Ge,qe,Re],hn="start",Pn="end",Qp="clippingParents",ma="viewport",En="popper",Yp="reference",Ji=Wn.reduce(function(e,t){return e.concat([t+"-"+hn,t+"-"+Pn])},[]),ba=[].concat(Wn,[Jo]).reduce(function(e,t){return e.concat([t,t+"-"+hn,t+"-"+Pn])},[]),ef="beforeRead",tf="read",nf="afterRead",rf="beforeMain",of="main",sf="afterMain",af="beforeWrite",lf="write",cf="afterWrite",uf=[ef,tf,nf,rf,of,sf,af,lf,cf];function bt(e){return e?(e.nodeName||"").toLowerCase():null}function Ze(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function qt(e){var t=Ze(e).Element;return e instanceof t||e instanceof Element}function Ve(e){var t=Ze(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Qo(e){if(typeof ShadowRoot>"u")return!1;var t=Ze(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function df(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},o=t.attributes[n]||{},i=t.elements[n];!Ve(i)||!bt(i)||(Object.assign(i.style,r),Object.keys(o).forEach(function(s){var a=o[s];a===!1?i.removeAttribute(s):i.setAttribute(s,a===!0?"":a)}))})}function pf(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var o=t.elements[r],i=t.attributes[r]||{},s=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),a=s.reduce(function(l,c){return l[c]="",l},{});!Ve(o)||!bt(o)||(Object.assign(o.style,a),Object.keys(i).forEach(function(l){o.removeAttribute(l)}))})}}const ya={name:"applyStyles",enabled:!0,phase:"write",fn:df,effect:pf,requires:["computeStyles"]};function mt(e){return e.split("-")[0]}var Kt=Math.max,Ir=Math.min,gn=Math.round;function xo(){var e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function va(){return!/^((?!chrome|android).)*safari/i.test(xo())}function mn(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),o=1,i=1;t&&Ve(e)&&(o=e.offsetWidth>0&&gn(r.width)/e.offsetWidth||1,i=e.offsetHeight>0&&gn(r.height)/e.offsetHeight||1);var s=qt(e)?Ze(e):window,a=s.visualViewport,l=!va()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/o,u=(r.top+(l&&a?a.offsetTop:0))/i,d=r.width/o,p=r.height/i;return{width:d,height:p,top:u,right:c+d,bottom:u+p,left:c,x:c,y:u}}function Yo(e){var t=mn(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function wa(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Qo(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Et(e){return Ze(e).getComputedStyle(e)}function ff(e){return["table","td","th"].indexOf(bt(e))>=0}function Ht(e){return((qt(e)?e.ownerDocument:e.document)||window.document).documentElement}function zr(e){return bt(e)==="html"?e:e.assignedSlot||e.parentNode||(Qo(e)?e.host:null)||Ht(e)}function Qi(e){return!Ve(e)||Et(e).position==="fixed"?null:e.offsetParent}function hf(e){var t=/firefox/i.test(xo()),n=/Trident/i.test(xo());if(n&&Ve(e)){var r=Et(e);if(r.position==="fixed")return null}var o=zr(e);for(Qo(o)&&(o=o.host);Ve(o)&&["html","body"].indexOf(bt(o))<0;){var i=Et(o);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none")return o;o=o.parentNode}return null}function Fn(e){for(var t=Ze(e),n=Qi(e);n&&ff(n)&&Et(n).position==="static";)n=Qi(n);return n&&(bt(n)==="html"||bt(n)==="body"&&Et(n).position==="static")?t:n||hf(e)||t}function ei(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Cn(e,t,n){return Kt(e,Ir(t,n))}function gf(e,t,n){var r=Cn(e,t,n);return r>n?n:r}function xa(){return{top:0,right:0,bottom:0,left:0}}function ka(e){return Object.assign({},xa(),e)}function Ea(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var mf=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,ka(typeof e!="number"?e:Ea(e,Wn))};function bf(e){var t,n=e.state,r=e.name,o=e.options,i=n.elements.arrow,s=n.modifiersData.popperOffsets,a=mt(n.placement),l=ei(a),c=[Re,qe].indexOf(a)>=0,u=c?"height":"width";if(!(!i||!s)){var d=mf(o.padding,n),p=Yo(i),f=l==="y"?Oe:Re,m=l==="y"?Ge:qe,b=n.rects.reference[u]+n.rects.reference[l]-s[l]-n.rects.popper[u],k=s[l]-n.rects.reference[l],A=Fn(i),S=A?l==="y"?A.clientHeight||0:A.clientWidth||0:0,O=b/2-k/2,h=d[f],R=S-p[u]-d[m],x=S/2-p[u]/2+O,C=Cn(h,x,R),E=l;n.modifiersData[r]=(t={},t[E]=C,t.centerOffset=C-x,t)}}function yf(e){var t=e.state,n=e.options,r=n.element,o=r===void 0?"[data-popper-arrow]":r;if(o!=null&&!(typeof o=="string"&&(o=t.elements.popper.querySelector(o),!o))){if(!wa(t.elements.popper,o))return;t.elements.arrow=o}}const vf={name:"arrow",enabled:!0,phase:"main",fn:bf,effect:yf,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function bn(e){return e.split("-")[1]}var wf={top:"auto",right:"auto",bottom:"auto",left:"auto"};function xf(e){var t=e.x,n=e.y,r=window,o=r.devicePixelRatio||1;return{x:gn(t*o)/o||0,y:gn(n*o)/o||0}}function Yi(e){var t,n=e.popper,r=e.popperRect,o=e.placement,i=e.variation,s=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,d=e.isFixed,p=s.x,f=p===void 0?0:p,m=s.y,b=m===void 0?0:m,k=typeof u=="function"?u({x:f,y:b}):{x:f,y:b};f=k.x,b=k.y;var A=s.hasOwnProperty("x"),S=s.hasOwnProperty("y"),O=Re,h=Oe,R=window;if(c){var x=Fn(n),C="clientHeight",E="clientWidth";if(x===Ze(n)&&(x=Ht(n),Et(x).position!=="static"&&a==="absolute"&&(C="scrollHeight",E="scrollWidth")),x=x,o===Oe||(o===Re||o===qe)&&i===Pn){h=Ge;var T=d&&x===R&&R.visualViewport?R.visualViewport.height:x[C];b-=T-r.height,b*=l?1:-1}if(o===Re||(o===Oe||o===Ge)&&i===Pn){O=qe;var B=d&&x===R&&R.visualViewport?R.visualViewport.width:x[E];f-=B-r.width,f*=l?1:-1}}var D=Object.assign({position:a},c&&wf),V=u===!0?xf({x:f,y:b}):{x:f,y:b};if(f=V.x,b=V.y,l){var U;return Object.assign({},D,(U={},U[h]=S?"0":"",U[O]=A?"0":"",U.transform=(R.devicePixelRatio||1)<=1?"translate("+f+"px, "+b+"px)":"translate3d("+f+"px, "+b+"px, 0)",U))}return Object.assign({},D,(t={},t[h]=S?b+"px":"",t[O]=A?f+"px":"",t.transform="",t))}function kf(e){var t=e.state,n=e.options,r=n.gpuAcceleration,o=r===void 0?!0:r,i=n.adaptive,s=i===void 0?!0:i,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:mt(t.placement),variation:bn(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Yi(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Yi(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Ef={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:kf,data:{}};var rr={passive:!0};function Af(e){var t=e.state,n=e.instance,r=e.options,o=r.scroll,i=o===void 0?!0:o,s=r.resize,a=s===void 0?!0:s,l=Ze(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&c.forEach(function(u){u.addEventListener("scroll",n.update,rr)}),a&&l.addEventListener("resize",n.update,rr),function(){i&&c.forEach(function(u){u.removeEventListener("scroll",n.update,rr)}),a&&l.removeEventListener("resize",n.update,rr)}}const _f={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Af,data:{}};var Sf={left:"right",right:"left",bottom:"top",top:"bottom"};function fr(e){return e.replace(/left|right|bottom|top/g,function(t){return Sf[t]})}var Mf={start:"end",end:"start"};function es(e){return e.replace(/start|end/g,function(t){return Mf[t]})}function ti(e){var t=Ze(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function ni(e){return mn(Ht(e)).left+ti(e).scrollLeft}function Cf(e,t){var n=Ze(e),r=Ht(e),o=n.visualViewport,i=r.clientWidth,s=r.clientHeight,a=0,l=0;if(o){i=o.width,s=o.height;var c=va();(c||!c&&t==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}return{width:i,height:s,x:a+ni(e),y:l}}function Tf(e){var t,n=Ht(e),r=ti(e),o=(t=e.ownerDocument)==null?void 0:t.body,i=Kt(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),s=Kt(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),a=-r.scrollLeft+ni(e),l=-r.scrollTop;return Et(o||n).direction==="rtl"&&(a+=Kt(n.clientWidth,o?o.clientWidth:0)-i),{width:i,height:s,x:a,y:l}}function ri(e){var t=Et(e),n=t.overflow,r=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function Aa(e){return["html","body","#document"].indexOf(bt(e))>=0?e.ownerDocument.body:Ve(e)&&ri(e)?e:Aa(zr(e))}function Tn(e,t){var n;t===void 0&&(t=[]);var r=Aa(e),o=r===((n=e.ownerDocument)==null?void 0:n.body),i=Ze(r),s=o?[i].concat(i.visualViewport||[],ri(r)?r:[]):r,a=t.concat(s);return o?a:a.concat(Tn(zr(s)))}function ko(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Of(e,t){var n=mn(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function ts(e,t,n){return t===ma?ko(Cf(e,n)):qt(t)?Of(t,n):ko(Tf(Ht(e)))}function Rf(e){var t=Tn(zr(e)),n=["absolute","fixed"].indexOf(Et(e).position)>=0,r=n&&Ve(e)?Fn(e):e;return qt(r)?t.filter(function(o){return qt(o)&&wa(o,r)&&bt(o)!=="body"}):[]}function Nf(e,t,n,r){var o=t==="clippingParents"?Rf(e):[].concat(t),i=[].concat(o,[n]),s=i[0],a=i.reduce(function(l,c){var u=ts(e,c,r);return l.top=Kt(u.top,l.top),l.right=Ir(u.right,l.right),l.bottom=Ir(u.bottom,l.bottom),l.left=Kt(u.left,l.left),l},ts(e,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function _a(e){var t=e.reference,n=e.element,r=e.placement,o=r?mt(r):null,i=r?bn(r):null,s=t.x+t.width/2-n.width/2,a=t.y+t.height/2-n.height/2,l;switch(o){case Oe:l={x:s,y:t.y-n.height};break;case Ge:l={x:s,y:t.y+t.height};break;case qe:l={x:t.x+t.width,y:a};break;case Re:l={x:t.x-n.width,y:a};break;default:l={x:t.x,y:t.y}}var c=o?ei(o):null;if(c!=null){var u=c==="y"?"height":"width";switch(i){case hn:l[c]=l[c]-(t[u]/2-n[u]/2);break;case Pn:l[c]=l[c]+(t[u]/2-n[u]/2);break}}return l}function jn(e,t){t===void 0&&(t={});var n=t,r=n.placement,o=r===void 0?e.placement:r,i=n.strategy,s=i===void 0?e.strategy:i,a=n.boundary,l=a===void 0?Qp:a,c=n.rootBoundary,u=c===void 0?ma:c,d=n.elementContext,p=d===void 0?En:d,f=n.altBoundary,m=f===void 0?!1:f,b=n.padding,k=b===void 0?0:b,A=ka(typeof k!="number"?k:Ea(k,Wn)),S=p===En?Yp:En,O=e.rects.popper,h=e.elements[m?S:p],R=Nf(qt(h)?h:h.contextElement||Ht(e.elements.popper),l,u,s),x=mn(e.elements.reference),C=_a({reference:x,element:O,strategy:"absolute",placement:o}),E=ko(Object.assign({},O,C)),T=p===En?E:x,B={top:R.top-T.top+A.top,bottom:T.bottom-R.bottom+A.bottom,left:R.left-T.left+A.left,right:T.right-R.right+A.right},D=e.modifiersData.offset;if(p===En&&D){var V=D[o];Object.keys(B).forEach(function(U){var Z=[qe,Ge].indexOf(U)>=0?1:-1,ee=[Oe,Ge].indexOf(U)>=0?"y":"x";B[U]+=V[ee]*Z})}return B}function Lf(e,t){t===void 0&&(t={});var n=t,r=n.placement,o=n.boundary,i=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?ba:l,u=bn(r),d=u?a?Ji:Ji.filter(function(m){return bn(m)===u}):Wn,p=d.filter(function(m){return c.indexOf(m)>=0});p.length===0&&(p=d);var f=p.reduce(function(m,b){return m[b]=jn(e,{placement:b,boundary:o,rootBoundary:i,padding:s})[mt(b)],m},{});return Object.keys(f).sort(function(m,b){return f[m]-f[b]})}function If(e){if(mt(e)===Jo)return[];var t=fr(e);return[es(e),t,es(t)]}function Hf(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var o=n.mainAxis,i=o===void 0?!0:o,s=n.altAxis,a=s===void 0?!0:s,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,p=n.altBoundary,f=n.flipVariations,m=f===void 0?!0:f,b=n.allowedAutoPlacements,k=t.options.placement,A=mt(k),S=A===k,O=l||(S||!m?[fr(k)]:If(k)),h=[k].concat(O).reduce(function(X,Q){return X.concat(mt(Q)===Jo?Lf(t,{placement:Q,boundary:u,rootBoundary:d,padding:c,flipVariations:m,allowedAutoPlacements:b}):Q)},[]),R=t.rects.reference,x=t.rects.popper,C=new Map,E=!0,T=h[0],B=0;B<h.length;B++){var D=h[B],V=mt(D),U=bn(D)===hn,Z=[Oe,Ge].indexOf(V)>=0,ee=Z?"width":"height",g=jn(t,{placement:D,boundary:u,rootBoundary:d,altBoundary:p,padding:c}),w=Z?U?qe:Re:U?Ge:Oe;R[ee]>x[ee]&&(w=fr(w));var y=fr(w),H=[];if(i&&H.push(g[V]<=0),a&&H.push(g[w]<=0,g[y]<=0),H.every(function(X){return X})){T=D,E=!1;break}C.set(D,H)}if(E)for(var P=m?3:1,G=function(X){var Q=h.find(function(ae){var ye=C.get(ae);if(ye)return ye.slice(0,X).every(function(xe){return xe})});if(Q)return T=Q,"break"},Y=P;Y>0;Y--){var ce=G(Y);if(ce==="break")break}t.placement!==T&&(t.modifiersData[r]._skip=!0,t.placement=T,t.reset=!0)}}const Bf={name:"flip",enabled:!0,phase:"main",fn:Hf,requiresIfExists:["offset"],data:{_skip:!1}};function ns(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function rs(e){return[Oe,qe,Ge,Re].some(function(t){return e[t]>=0})}function Df(e){var t=e.state,n=e.name,r=t.rects.reference,o=t.rects.popper,i=t.modifiersData.preventOverflow,s=jn(t,{elementContext:"reference"}),a=jn(t,{altBoundary:!0}),l=ns(s,r),c=ns(a,o,i),u=rs(l),d=rs(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const Pf={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Df};function jf(e,t,n){var r=mt(e),o=[Re,Oe].indexOf(r)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,s=i[0],a=i[1];return s=s||0,a=(a||0)*o,[Re,qe].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}function $f(e){var t=e.state,n=e.options,r=e.name,o=n.offset,i=o===void 0?[0,0]:o,s=ba.reduce(function(u,d){return u[d]=jf(d,t.rects,i),u},{}),a=s[t.placement],l=a.x,c=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=s}const zf={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:$f};function Uf(e){var t=e.state,n=e.name;t.modifiersData[n]=_a({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const Wf={name:"popperOffsets",enabled:!0,phase:"read",fn:Uf,data:{}};function Ff(e){return e==="x"?"y":"x"}function Kf(e){var t=e.state,n=e.options,r=e.name,o=n.mainAxis,i=o===void 0?!0:o,s=n.altAxis,a=s===void 0?!1:s,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,p=n.tether,f=p===void 0?!0:p,m=n.tetherOffset,b=m===void 0?0:m,k=jn(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),A=mt(t.placement),S=bn(t.placement),O=!S,h=ei(A),R=Ff(h),x=t.modifiersData.popperOffsets,C=t.rects.reference,E=t.rects.popper,T=typeof b=="function"?b(Object.assign({},t.rects,{placement:t.placement})):b,B=typeof T=="number"?{mainAxis:T,altAxis:T}:Object.assign({mainAxis:0,altAxis:0},T),D=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,V={x:0,y:0};if(x){if(i){var U,Z=h==="y"?Oe:Re,ee=h==="y"?Ge:qe,g=h==="y"?"height":"width",w=x[h],y=w+k[Z],H=w-k[ee],P=f?-E[g]/2:0,G=S===hn?C[g]:E[g],Y=S===hn?-E[g]:-C[g],ce=t.elements.arrow,X=f&&ce?Yo(ce):{width:0,height:0},Q=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:xa(),ae=Q[Z],ye=Q[ee],xe=Cn(0,C[g],X[g]),Je=O?C[g]/2-P-xe-ae-B.mainAxis:G-xe-ae-B.mainAxis,_e=O?-C[g]/2+P+xe+ye+B.mainAxis:Y+xe+ye+B.mainAxis,Ie=t.elements.arrow&&Fn(t.elements.arrow),ke=Ie?h==="y"?Ie.clientTop||0:Ie.clientLeft||0:0,Qe=(U=D==null?void 0:D[h])!=null?U:0,ue=w+Je-Qe-ke,At=w+_e-Qe,He=Cn(f?Ir(y,ue):y,w,f?Kt(H,At):H);x[h]=He,V[h]=He-w}if(a){var N,ct=h==="x"?Oe:Re,J=h==="x"?Ge:qe,$=x[R],ve=R==="y"?"height":"width",he=$+k[ct],Se=$-k[J],Be=[Oe,Re].indexOf(A)!==-1,v=(N=D==null?void 0:D[R])!=null?N:0,M=Be?he:$-C[ve]-E[ve]-v+B.altAxis,I=Be?$+C[ve]+E[ve]-v-B.altAxis:Se,j=f&&Be?gf(M,$,I):Cn(f?M:he,$,f?I:Se);x[R]=j,V[R]=j-$}t.modifiersData[r]=V}}const Vf={name:"preventOverflow",enabled:!0,phase:"main",fn:Kf,requiresIfExists:["offset"]};function Gf(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function qf(e){return e===Ze(e)||!Ve(e)?ti(e):Gf(e)}function Xf(e){var t=e.getBoundingClientRect(),n=gn(t.width)/e.offsetWidth||1,r=gn(t.height)/e.offsetHeight||1;return n!==1||r!==1}function Zf(e,t,n){n===void 0&&(n=!1);var r=Ve(t),o=Ve(t)&&Xf(t),i=Ht(t),s=mn(e,o,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((bt(t)!=="body"||ri(i))&&(a=qf(t)),Ve(t)?(l=mn(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):i&&(l.x=ni(i))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function Jf(e){var t=new Map,n=new Set,r=[];e.forEach(function(i){t.set(i.name,i)});function o(i){n.add(i.name);var s=[].concat(i.requires||[],i.requiresIfExists||[]);s.forEach(function(a){if(!n.has(a)){var l=t.get(a);l&&o(l)}}),r.push(i)}return e.forEach(function(i){n.has(i.name)||o(i)}),r}function Qf(e){var t=Jf(e);return uf.reduce(function(n,r){return n.concat(t.filter(function(o){return o.phase===r}))},[])}function Yf(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function eh(e){var t=e.reduce(function(n,r){var o=n[r.name];return n[r.name]=o?Object.assign({},o,r,{options:Object.assign({},o.options,r.options),data:Object.assign({},o.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var os={placement:"bottom",modifiers:[],strategy:"absolute"};function is(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function th(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,o=t.defaultOptions,i=o===void 0?os:o;return function(s,a,l){l===void 0&&(l=i);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},os,i),modifiersData:{},elements:{reference:s,popper:a},attributes:{},styles:{}},u=[],d=!1,p={state:c,setOptions:function(b){var k=typeof b=="function"?b(c.options):b;m(),c.options=Object.assign({},i,c.options,k),c.scrollParents={reference:qt(s)?Tn(s):s.contextElement?Tn(s.contextElement):[],popper:Tn(a)};var A=Qf(eh([].concat(r,c.options.modifiers)));return c.orderedModifiers=A.filter(function(S){return S.enabled}),f(),p.update()},forceUpdate:function(){if(!d){var b=c.elements,k=b.reference,A=b.popper;if(!is(k,A))return;c.rects={reference:Zf(k,Fn(A),c.options.strategy==="fixed"),popper:Yo(A)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(T){return c.modifiersData[T.name]=Object.assign({},T.data)});for(var S=0,O=0;O<c.orderedModifiers.length;O++){if(c.reset===!0){c.reset=!1,O=-1;continue}var h=c.orderedModifiers[O],R=h.fn,x=h.options,C=x===void 0?{}:x,E=h.name;typeof R=="function"&&(c=R({state:c,options:C,name:E,instance:p})||c)}}},update:Yf(function(){return new Promise(function(b){p.forceUpdate(),b(c)})}),destroy:function(){m(),d=!0}};if(!is(s,a))return p;p.setOptions(l).then(function(b){!d&&l.onFirstUpdate&&l.onFirstUpdate(b)});function f(){c.orderedModifiers.forEach(function(b){var k=b.name,A=b.options,S=A===void 0?{}:A,O=b.effect;if(typeof O=="function"){var h=O({state:c,name:k,instance:p,options:S}),R=function(){};u.push(h||R)}})}function m(){u.forEach(function(b){return b()}),u=[]}return p}}var nh=[_f,Wf,Ef,ya,zf,Bf,Vf,vf,Pf],rh=th({defaultModifiers:nh}),oh='<svg width="16" height="6" xmlns="http://www.w3.org/2000/svg"><path d="M0 6s1.796-.013 4.67-3.615C5.851.9 6.93.006 8 0c1.07-.006 2.148.887 3.343 2.385C14.233 6.005 16 6 16 6H0z"></svg>',ih="tippy-box",Sa="tippy-content",sh="tippy-backdrop",Ma="tippy-arrow",Ca="tippy-svg-arrow",$t={passive:!0,capture:!0},Ta=function(){return document.body};function Yr(e,t,n){if(Array.isArray(e)){var r=e[t];return r??(Array.isArray(n)?n[t]:n)}return e}function oi(e,t){var n={}.toString.call(e);return n.indexOf("[object")===0&&n.indexOf(t+"]")>-1}function Oa(e,t){return typeof e=="function"?e.apply(void 0,t):e}function ss(e,t){if(t===0)return e;var n;return function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)}}function ah(e){return e.split(/\s+/).filter(Boolean)}function on(e){return[].concat(e)}function as(e,t){e.indexOf(t)===-1&&e.push(t)}function lh(e){return e.filter(function(t,n){return e.indexOf(t)===n})}function ch(e){return e.split("-")[0]}function Hr(e){return[].slice.call(e)}function ls(e){return Object.keys(e).reduce(function(t,n){return e[n]!==void 0&&(t[n]=e[n]),t},{})}function On(){return document.createElement("div")}function Ur(e){return["Element","Fragment"].some(function(t){return oi(e,t)})}function uh(e){return oi(e,"NodeList")}function dh(e){return oi(e,"MouseEvent")}function ph(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function fh(e){return Ur(e)?[e]:uh(e)?Hr(e):Array.isArray(e)?e:Hr(document.querySelectorAll(e))}function eo(e,t){e.forEach(function(n){n&&(n.style.transitionDuration=t+"ms")})}function cs(e,t){e.forEach(function(n){n&&n.setAttribute("data-state",t)})}function hh(e){var t,n=on(e),r=n[0];return r!=null&&(t=r.ownerDocument)!=null&&t.body?r.ownerDocument:document}function gh(e,t){var n=t.clientX,r=t.clientY;return e.every(function(o){var i=o.popperRect,s=o.popperState,a=o.props,l=a.interactiveBorder,c=ch(s.placement),u=s.modifiersData.offset;if(!u)return!0;var d=c==="bottom"?u.top.y:0,p=c==="top"?u.bottom.y:0,f=c==="right"?u.left.x:0,m=c==="left"?u.right.x:0,b=i.top-r+d>l,k=r-i.bottom-p>l,A=i.left-n+f>l,S=n-i.right-m>l;return b||k||A||S})}function to(e,t,n){var r=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(o){e[r](o,n)})}function us(e,t){for(var n=t;n;){var r;if(e.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var ft={isTouch:!1},ds=0;function mh(){ft.isTouch||(ft.isTouch=!0,window.performance&&document.addEventListener("mousemove",Ra))}function Ra(){var e=performance.now();e-ds<20&&(ft.isTouch=!1,document.removeEventListener("mousemove",Ra)),ds=e}function bh(){var e=document.activeElement;if(ph(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function yh(){document.addEventListener("touchstart",mh,$t),window.addEventListener("blur",bh)}var vh=typeof window<"u"&&typeof document<"u",wh=vh?!!window.msCrypto:!1,xh={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},kh={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},ot=Object.assign({appendTo:Ta,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},xh,kh),Eh=Object.keys(ot),Ah=function(e){var t=Object.keys(e);t.forEach(function(n){ot[n]=e[n]})};function Na(e){var t=e.plugins||[],n=t.reduce(function(r,o){var i=o.name,s=o.defaultValue;if(i){var a;r[i]=e[i]!==void 0?e[i]:(a=ot[i])!=null?a:s}return r},{});return Object.assign({},e,n)}function _h(e,t){var n=t?Object.keys(Na(Object.assign({},ot,{plugins:t}))):Eh,r=n.reduce(function(o,i){var s=(e.getAttribute("data-tippy-"+i)||"").trim();if(!s)return o;if(i==="content")o[i]=s;else try{o[i]=JSON.parse(s)}catch{o[i]=s}return o},{});return r}function ps(e,t){var n=Object.assign({},t,{content:Oa(t.content,[e])},t.ignoreAttributes?{}:_h(e,t.plugins));return n.aria=Object.assign({},ot.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?t.interactive:n.aria.expanded,content:n.aria.content==="auto"?t.interactive?null:"describedby":n.aria.content},n}var Sh=function(){return"innerHTML"};function Eo(e,t){e[Sh()]=t}function fs(e){var t=On();return e===!0?t.className=Ma:(t.className=Ca,Ur(e)?t.appendChild(e):Eo(t,e)),t}function hs(e,t){Ur(t.content)?(Eo(e,""),e.appendChild(t.content)):typeof t.content!="function"&&(t.allowHTML?Eo(e,t.content):e.textContent=t.content)}function Ao(e){var t=e.firstElementChild,n=Hr(t.children);return{box:t,content:n.find(function(r){return r.classList.contains(Sa)}),arrow:n.find(function(r){return r.classList.contains(Ma)||r.classList.contains(Ca)}),backdrop:n.find(function(r){return r.classList.contains(sh)})}}function La(e){var t=On(),n=On();n.className=ih,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=On();r.className=Sa,r.setAttribute("data-state","hidden"),hs(r,e.props),t.appendChild(n),n.appendChild(r),o(e.props,e.props);function o(i,s){var a=Ao(t),l=a.box,c=a.content,u=a.arrow;s.theme?l.setAttribute("data-theme",s.theme):l.removeAttribute("data-theme"),typeof s.animation=="string"?l.setAttribute("data-animation",s.animation):l.removeAttribute("data-animation"),s.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof s.maxWidth=="number"?s.maxWidth+"px":s.maxWidth,s.role?l.setAttribute("role",s.role):l.removeAttribute("role"),(i.content!==s.content||i.allowHTML!==s.allowHTML)&&hs(c,e.props),s.arrow?u?i.arrow!==s.arrow&&(l.removeChild(u),l.appendChild(fs(s.arrow))):l.appendChild(fs(s.arrow)):u&&l.removeChild(u)}return{popper:t,onUpdate:o}}La.$$tippy=!0;var Mh=1,or=[],no=[];function Ch(e,t){var n=ps(e,Object.assign({},ot,Na(ls(t)))),r,o,i,s=!1,a=!1,l=!1,c=!1,u,d,p,f=[],m=ss(ue,n.interactiveDebounce),b,k=Mh++,A=null,S=lh(n.plugins),O={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},h={id:k,reference:e,popper:On(),popperInstance:A,props:n,state:O,plugins:S,clearDelayTimeouts:M,setProps:I,setContent:j,show:te,hide:ge,hideWithInteractivity:wn,enable:Be,disable:v,unmount:xn,destroy:sl};if(!n.render)return h;var R=n.render(h),x=R.popper,C=R.onUpdate;x.setAttribute("data-tippy-root",""),x.id="tippy-"+h.id,h.popper=x,e._tippy=h,x._tippy=h;var E=S.map(function(_){return _.fn(h)}),T=e.hasAttribute("aria-expanded");return Ie(),P(),w(),y("onCreate",[h]),n.showOnCreate&&he(),x.addEventListener("mouseenter",function(){h.props.interactive&&h.state.isVisible&&h.clearDelayTimeouts()}),x.addEventListener("mouseleave",function(){h.props.interactive&&h.props.trigger.indexOf("mouseenter")>=0&&Z().addEventListener("mousemove",m)}),h;function B(){var _=h.props.touch;return Array.isArray(_)?_:[_,0]}function D(){return B()[0]==="hold"}function V(){var _;return!!((_=h.props.render)!=null&&_.$$tippy)}function U(){return b||e}function Z(){var _=U().parentNode;return _?hh(_):document}function ee(){return Ao(x)}function g(_){return h.state.isMounted&&!h.state.isVisible||ft.isTouch||u&&u.type==="focus"?0:Yr(h.props.delay,_?0:1,ot.delay)}function w(_){_===void 0&&(_=!1),x.style.pointerEvents=h.props.interactive&&!_?"":"none",x.style.zIndex=""+h.props.zIndex}function y(_,z,q){if(q===void 0&&(q=!0),E.forEach(function(re){re[_]&&re[_].apply(re,z)}),q){var ie;(ie=h.props)[_].apply(ie,z)}}function H(){var _=h.props.aria;if(_.content){var z="aria-"+_.content,q=x.id,ie=on(h.props.triggerTarget||e);ie.forEach(function(re){var Me=re.getAttribute(z);if(h.state.isVisible)re.setAttribute(z,Me?Me+" "+q:q);else{var ze=Me&&Me.replace(q,"").trim();ze?re.setAttribute(z,ze):re.removeAttribute(z)}})}}function P(){if(!(T||!h.props.aria.expanded)){var _=on(h.props.triggerTarget||e);_.forEach(function(z){h.props.interactive?z.setAttribute("aria-expanded",h.state.isVisible&&z===U()?"true":"false"):z.removeAttribute("aria-expanded")})}}function G(){Z().removeEventListener("mousemove",m),or=or.filter(function(_){return _!==m})}function Y(_){if(!(ft.isTouch&&(l||_.type==="mousedown"))){var z=_.composedPath&&_.composedPath()[0]||_.target;if(!(h.props.interactive&&us(x,z))){if(on(h.props.triggerTarget||e).some(function(q){return us(q,z)})){if(ft.isTouch||h.state.isVisible&&h.props.trigger.indexOf("click")>=0)return}else y("onClickOutside",[h,_]);h.props.hideOnClick===!0&&(h.clearDelayTimeouts(),h.hide(),a=!0,setTimeout(function(){a=!1}),h.state.isMounted||ae())}}}function ce(){l=!0}function X(){l=!1}function Q(){var _=Z();_.addEventListener("mousedown",Y,!0),_.addEventListener("touchend",Y,$t),_.addEventListener("touchstart",X,$t),_.addEventListener("touchmove",ce,$t)}function ae(){var _=Z();_.removeEventListener("mousedown",Y,!0),_.removeEventListener("touchend",Y,$t),_.removeEventListener("touchstart",X,$t),_.removeEventListener("touchmove",ce,$t)}function ye(_,z){Je(_,function(){!h.state.isVisible&&x.parentNode&&x.parentNode.contains(x)&&z()})}function xe(_,z){Je(_,z)}function Je(_,z){var q=ee().box;function ie(re){re.target===q&&(to(q,"remove",ie),z())}if(_===0)return z();to(q,"remove",d),to(q,"add",ie),d=ie}function _e(_,z,q){q===void 0&&(q=!1);var ie=on(h.props.triggerTarget||e);ie.forEach(function(re){re.addEventListener(_,z,q),f.push({node:re,eventType:_,handler:z,options:q})})}function Ie(){D()&&(_e("touchstart",Qe,{passive:!0}),_e("touchend",At,{passive:!0})),ah(h.props.trigger).forEach(function(_){if(_!=="manual")switch(_e(_,Qe),_){case"mouseenter":_e("mouseleave",At);break;case"focus":_e(wh?"focusout":"blur",He);break;case"focusin":_e("focusout",He);break}})}function ke(){f.forEach(function(_){var z=_.node,q=_.eventType,ie=_.handler,re=_.options;z.removeEventListener(q,ie,re)}),f=[]}function Qe(_){var z,q=!1;if(!(!h.state.isEnabled||N(_)||a)){var ie=((z=u)==null?void 0:z.type)==="focus";u=_,b=_.currentTarget,P(),!h.state.isVisible&&dh(_)&&or.forEach(function(re){return re(_)}),_.type==="click"&&(h.props.trigger.indexOf("mouseenter")<0||s)&&h.props.hideOnClick!==!1&&h.state.isVisible?q=!0:he(_),_.type==="click"&&(s=!q),q&&!ie&&Se(_)}}function ue(_){var z=_.target,q=U().contains(z)||x.contains(z);if(!(_.type==="mousemove"&&q)){var ie=ve().concat(x).map(function(re){var Me,ze=re._tippy,Qt=(Me=ze.popperInstance)==null?void 0:Me.state;return Qt?{popperRect:re.getBoundingClientRect(),popperState:Qt,props:n}:null}).filter(Boolean);gh(ie,_)&&(G(),Se(_))}}function At(_){var z=N(_)||h.props.trigger.indexOf("click")>=0&&s;if(!z){if(h.props.interactive){h.hideWithInteractivity(_);return}Se(_)}}function He(_){h.props.trigger.indexOf("focusin")<0&&_.target!==U()||h.props.interactive&&_.relatedTarget&&x.contains(_.relatedTarget)||Se(_)}function N(_){return ft.isTouch?D()!==_.type.indexOf("touch")>=0:!1}function ct(){J();var _=h.props,z=_.popperOptions,q=_.placement,ie=_.offset,re=_.getReferenceClientRect,Me=_.moveTransition,ze=V()?Ao(x).arrow:null,Qt=re?{getBoundingClientRect:re,contextElement:re.contextElement||U()}:e,Kn={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Vn){var Yt=Vn.state;if(V()){var al=ee(),Fr=al.box;["placement","reference-hidden","escaped"].forEach(function(Gn){Gn==="placement"?Fr.setAttribute("data-placement",Yt.placement):Yt.attributes.popper["data-popper-"+Gn]?Fr.setAttribute("data-"+Gn,""):Fr.removeAttribute("data-"+Gn)}),Yt.attributes.popper={}}}},Dt=[{name:"offset",options:{offset:ie}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!Me}},Kn];V()&&ze&&Dt.push({name:"arrow",options:{element:ze,padding:3}}),Dt.push.apply(Dt,(z==null?void 0:z.modifiers)||[]),h.popperInstance=rh(Qt,x,Object.assign({},z,{placement:q,onFirstUpdate:p,modifiers:Dt}))}function J(){h.popperInstance&&(h.popperInstance.destroy(),h.popperInstance=null)}function $(){var _=h.props.appendTo,z,q=U();h.props.interactive&&_===Ta||_==="parent"?z=q.parentNode:z=Oa(_,[q]),z.contains(x)||z.appendChild(x),h.state.isMounted=!0,ct()}function ve(){return Hr(x.querySelectorAll("[data-tippy-root]"))}function he(_){h.clearDelayTimeouts(),_&&y("onTrigger",[h,_]),Q();var z=g(!0),q=B(),ie=q[0],re=q[1];ft.isTouch&&ie==="hold"&&re&&(z=re),z?r=setTimeout(function(){h.show()},z):h.show()}function Se(_){if(h.clearDelayTimeouts(),y("onUntrigger",[h,_]),!h.state.isVisible){ae();return}if(!(h.props.trigger.indexOf("mouseenter")>=0&&h.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(_.type)>=0&&s)){var z=g(!1);z?o=setTimeout(function(){h.state.isVisible&&h.hide()},z):i=requestAnimationFrame(function(){h.hide()})}}function Be(){h.state.isEnabled=!0}function v(){h.hide(),h.state.isEnabled=!1}function M(){clearTimeout(r),clearTimeout(o),cancelAnimationFrame(i)}function I(_){if(!h.state.isDestroyed){y("onBeforeUpdate",[h,_]),ke();var z=h.props,q=ps(e,Object.assign({},z,ls(_),{ignoreAttributes:!0}));h.props=q,Ie(),z.interactiveDebounce!==q.interactiveDebounce&&(G(),m=ss(ue,q.interactiveDebounce)),z.triggerTarget&&!q.triggerTarget?on(z.triggerTarget).forEach(function(ie){ie.removeAttribute("aria-expanded")}):q.triggerTarget&&e.removeAttribute("aria-expanded"),P(),w(),C&&C(z,q),h.popperInstance&&(ct(),ve().forEach(function(ie){requestAnimationFrame(ie._tippy.popperInstance.forceUpdate)})),y("onAfterUpdate",[h,_])}}function j(_){h.setProps({content:_})}function te(){var _=h.state.isVisible,z=h.state.isDestroyed,q=!h.state.isEnabled,ie=ft.isTouch&&!h.props.touch,re=Yr(h.props.duration,0,ot.duration);if(!(_||z||q||ie)&&!U().hasAttribute("disabled")&&(y("onShow",[h],!1),h.props.onShow(h)!==!1)){if(h.state.isVisible=!0,V()&&(x.style.visibility="visible"),w(),Q(),h.state.isMounted||(x.style.transition="none"),V()){var Me=ee(),ze=Me.box,Qt=Me.content;eo([ze,Qt],0)}p=function(){var Kn;if(!(!h.state.isVisible||c)){if(c=!0,x.offsetHeight,x.style.transition=h.props.moveTransition,V()&&h.props.animation){var Dt=ee(),Vn=Dt.box,Yt=Dt.content;eo([Vn,Yt],re),cs([Vn,Yt],"visible")}H(),P(),as(no,h),(Kn=h.popperInstance)==null||Kn.forceUpdate(),y("onMount",[h]),h.props.animation&&V()&&xe(re,function(){h.state.isShown=!0,y("onShown",[h])})}},$()}}function ge(){var _=!h.state.isVisible,z=h.state.isDestroyed,q=!h.state.isEnabled,ie=Yr(h.props.duration,1,ot.duration);if(!(_||z||q)&&(y("onHide",[h],!1),h.props.onHide(h)!==!1)){if(h.state.isVisible=!1,h.state.isShown=!1,c=!1,s=!1,V()&&(x.style.visibility="hidden"),G(),ae(),w(!0),V()){var re=ee(),Me=re.box,ze=re.content;h.props.animation&&(eo([Me,ze],ie),cs([Me,ze],"hidden"))}H(),P(),h.props.animation?V()&&ye(ie,h.unmount):h.unmount()}}function wn(_){Z().addEventListener("mousemove",m),as(or,m),m(_)}function xn(){h.state.isVisible&&h.hide(),h.state.isMounted&&(J(),ve().forEach(function(_){_._tippy.unmount()}),x.parentNode&&x.parentNode.removeChild(x),no=no.filter(function(_){return _!==h}),h.state.isMounted=!1,y("onHidden",[h]))}function sl(){!h.state.isDestroyed&&(h.clearDelayTimeouts(),h.unmount(),ke(),delete e._tippy,h.state.isDestroyed=!0,y("onDestroy",[h]))}}function Bt(e,t){t===void 0&&(t={});var n=ot.plugins.concat(t.plugins||[]);yh();var r=Object.assign({},t,{plugins:n}),o=fh(e),i=o.reduce(function(s,a){var l=a&&Ch(a,r);return l&&s.push(l),s},[]);return Ur(e)?i[0]:i}Bt.defaultProps=ot;Bt.setDefaultProps=Ah;Bt.currentInput=ft;Object.assign({},ya,{effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow)}});Bt.setDefaultProps({render:La});let gs=e=>typeof e=="object"&&e!=null&&e.nodeType===1,ms=(e,t)=>(!t||e!=="hidden")&&e!=="visible"&&e!=="clip",ro=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){let n=getComputedStyle(e,null);return ms(n.overflowY,t)||ms(n.overflowX,t)||(r=>{let o=(i=>{if(!i.ownerDocument||!i.ownerDocument.defaultView)return null;try{return i.ownerDocument.defaultView.frameElement}catch{return null}})(r);return!!o&&(o.clientHeight<r.scrollHeight||o.clientWidth<r.scrollWidth)})(e)}return!1},ir=(e,t,n,r,o,i,s,a)=>i<e&&s>t||i>e&&s<t?0:i<=e&&a<=n||s>=t&&a>=n?i-e-r:s>t&&a<n||i<e&&a>n?s-t+o:0,Th=e=>e.parentElement??(e.getRootNode().host||null),bs=(e,t)=>{var n,r,o,i;if(typeof document>"u")return[];let{scrollMode:s,block:a,inline:l,boundary:c,skipOverflowHiddenElements:u}=t,d=typeof c=="function"?c:V=>V!==c;if(!gs(e))throw new TypeError("Invalid target");let p=document.scrollingElement||document.documentElement,f=[],m=e;for(;gs(m)&&d(m);){if(m=Th(m),m===p){f.push(m);break}m!=null&&m===document.body&&ro(m)&&!ro(document.documentElement)||m!=null&&ro(m,u)&&f.push(m)}let b=(r=(n=window.visualViewport)==null?void 0:n.width)!=null?r:innerWidth,k=(i=(o=window.visualViewport)==null?void 0:o.height)!=null?i:innerHeight,{scrollX:A,scrollY:S}=window,{height:O,width:h,top:R,right:x,bottom:C,left:E}=e.getBoundingClientRect(),T=a==="start"||a==="nearest"?R:a==="end"?C:R+O/2,B=l==="center"?E+h/2:l==="end"?x:E,D=[];for(let V=0;V<f.length;V++){let U=f[V],{height:Z,width:ee,top:g,right:w,bottom:y,left:H}=U.getBoundingClientRect();if(s==="if-needed"&&R>=0&&E>=0&&C<=k&&x<=b&&R>=g&&C<=y&&E>=H&&x<=w)return D;let P=getComputedStyle(U),G=parseInt(P.borderLeftWidth,10),Y=parseInt(P.borderTopWidth,10),ce=parseInt(P.borderRightWidth,10),X=parseInt(P.borderBottomWidth,10),Q=0,ae=0,ye="offsetWidth"in U?U.offsetWidth-U.clientWidth-G-ce:0,xe="offsetHeight"in U?U.offsetHeight-U.clientHeight-Y-X:0,Je="offsetWidth"in U?U.offsetWidth===0?0:ee/U.offsetWidth:0,_e="offsetHeight"in U?U.offsetHeight===0?0:Z/U.offsetHeight:0;if(p===U)Q=a==="start"?T:a==="end"?T-k:a==="nearest"?ir(S,S+k,k,Y,X,S+T,S+T+O,O):T-k/2,ae=l==="start"?B:l==="center"?B-b/2:l==="end"?B-b:ir(A,A+b,b,G,ce,A+B,A+B+h,h),Q=Math.max(0,Q+S),ae=Math.max(0,ae+A);else{Q=a==="start"?T-g-Y:a==="end"?T-y+X+xe:a==="nearest"?ir(g,y,Z,Y,X+xe,T,T+O,O):T-(g+Z/2)+xe/2,ae=l==="start"?B-H-G:l==="center"?B-(H+ee/2)+ye/2:l==="end"?B-w+ce+ye:ir(H,w,ee,G,ce+ye,B,B+h,h);let{scrollLeft:Ie,scrollTop:ke}=U;Q=Math.max(0,Math.min(ke+Q/_e,U.scrollHeight-Z/_e+xe)),ae=Math.max(0,Math.min(Ie+ae/Je,U.scrollWidth-ee/Je+ye)),T+=ke-Q,B+=Ie-ae}D.push({el:U,top:Q,left:ae})}return D},Oh=e=>typeof e=="object"&&typeof e.behavior=="function",Rh=e=>e===!1?{block:"end",inline:"nearest"}:(t=>t===Object(t)&&Object.keys(t).length!==0)(e)?e:{block:"start",inline:"nearest"};function _o(e,t){if(!e.isConnected||!e.ownerDocument.documentElement.contains(e))return;if(Oh(t))return t.behavior(bs(e,t));let n=typeof t=="boolean"||t==null?void 0:t.behavior;for(let{el:r,top:o,left:i}of bs(e,Rh(t)))r.scroll({top:o,left:i,behavior:n})}const Nh={class:"tiptap-popper overflow-hidden"},Lh=["onMouseover","onClick"],Ih={class:"flex-y-center w-full"},Hh={class:"com tt-text-muted"},Bh={key:1,class:"tiptap-slash-menu--item tt-text-muted"},Dh=K("span",{class:"block text-center w-full"},"没有这个命令",-1),Ph=[Dh],jh=$e({__name:"CommandsList",props:{items:null,command:{type:Function}},setup(e,{expose:t}){const n=e,r=st(),o=st(0),i=nt(()=>n.items);io(i,()=>{o.value=0}),io(o,()=>{if(Number.isNaN(o.value+1))return;const u=r.value.querySelector(`button:nth-of-type(${o.value+1})`);u&&_o(u,{behavior:"smooth",scrollMode:"if-needed"})});const s=()=>{o.value=o.value-1,o.value<0&&(o.value=i.value.length-1)},a=()=>{o.value=o.value+1,o.value>i.value.length-1&&(o.value=0)},l=()=>{n.command(i.value[o.value])},c=u=>{n.command(i.value[u])};return t({onKeyDown:({event:u})=>{if(u.key==="ArrowUp")return s(),!0;if(u.key==="ArrowDown")return a(),!0;if(u.key==="Enter")return l(),!0}}),(u,d)=>(se(),be("div",Nh,[K("div",{class:"tiptap-slash-menu",ref_key:"itemsRef",ref:r},[F(i).length?(se(!0),be(dn,{key:0},un(F(i),(p,f)=>(se(),be("button",{class:Ce(["tiptap-slash-menu--item",{"is-selected":f===o.value,"has-divider":f==4}]),key:f,onMouseover:m=>o.value=f,onClick:m=>c(f)},[K("span",Ih,[K("i",{class:Ce(["icon-tiptap mr-2 op-70",p.icon?`icon-tiptap-${p.icon}`:""])},null,2),et(" "+gt(p.title)+" ",1),K("i",Hh,"/"+gt(p.keys[0]),1)])],42,Lh))),128)):(se(),be("div",Bh,Ph))],512)]))}}),$h={items:({query:e})=>[{title:"一级标题",type:"menu",icon:"heading-h1",keys:["h1","biaoti1","bt1"],command:({editor:t,range:n})=>{t.chain().focus().deleteRange(n).setNode("heading",{level:1}).run()}},{title:"二级标题",type:"menu",icon:"heading-h2",keys:["h2","biaoti2","bt2"],command:({editor:t,range:n})=>{t.chain().focus().deleteRange(n).setNode("heading",{level:2}).run()}},{title:"三级标题",type:"menu",icon:"heading-h3",keys:["h3","biaoti3","bt3"],command:({editor:t,range:n})=>{t.chain().focus().deleteRange(n).setNode("heading",{level:3}).run()}},{title:"四级标题",type:"menu",icon:"heading-h4",keys:["h4","biaoti4","bt4"],command:({editor:t,range:n})=>{t.chain().focus().deleteRange(n).setNode("heading",{level:4}).run()}},{title:"五级标题",type:"menu",icon:"heading-h5",keys:["h5","biaoti5","bt5"],command:({editor:t,range:n})=>{t.chain().focus().deleteRange(n).setNode("heading",{level:5}).run()}},{title:"待办列表",type:"menu",icon:"todo",keys:["todo","renwu","rw","db"],command:({editor:t,range:n})=>{t.chain().focus().deleteRange(n).toggleTaskList().run()}},{title:"无序列表",type:"menu",icon:"list-ul",keys:["ul","yxlb","liebiao","lb"],command:({editor:t,range:n})=>{t.chain().focus().deleteRange(n).toggleBulletList().run()}},{title:"有序列表",type:"menu",icon:"list-ol",keys:["ol","wxlb","liebiao","lb"],command:({editor:t,range:n})=>{t.chain().focus().deleteRange(n).toggleOrderedList().run()}},{title:"引用",type:"menu",icon:"double-quotes-left",keys:["block","yy","yinyong"],command:({editor:t,range:n})=>{t.chain().focus().deleteRange(n).toggleBlockquote().run()}},{title:"代码块",type:"menu",icon:"code-block",keys:["code","dmk","daimakuai"],command:({editor:t,range:n})=>{t.chain().focus().deleteRange(n).toggleCodeBlock().run()}},{title:"表格",type:"menu",icon:"table",keys:["table","bg","biaoge"],command:({editor:t,range:n})=>{t.chain().focus().deleteRange(n).insertTable().run()}},{title:"上传图片",type:"menu",icon:"image",keys:["img","tp","tupian","pic"],command:({editor:t,range:n})=>{t.chain().focus().deleteRange(n).selectUploadImg().run()}},{title:"分割线",type:"menu",icon:"minus",keys:["hr","line","fg","fenge"],command:({editor:t,range:n})=>{t.chain().focus().deleteRange(n).setHorizontalRule().run()}},{title:"目录",icon:"menu",keys:["toc","ml","mulu"],command:({editor:t,range:n})=>{t.chain().focus().deleteRange(n).setTableOfContents().run()}}].filter(t=>t.keys.some(n=>n.toLowerCase().startsWith(e.toLowerCase()))),render:()=>{let e,t,n;return{onStart:r=>{if(n=r.editor.isEditable,!n||(e=new Lo(jh,{props:r,editor:r.editor}),!r.clientRect))return;const o=document.querySelector(".prose--popup-point"),i=o||document.body;t=Bt("body",{getReferenceClientRect:r.clientRect,appendTo:()=>i,content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start"})},onUpdate(r){n&&(e.updateProps(r),r.clientRect&&t[0].setProps({getReferenceClientRect:r.clientRect}))},onKeyDown(r){var o;if(n)return r.event.key==="Escape"?(r.event.stopPropagation(),t[0].hide(),!0):(o=e.ref)==null?void 0:o.onKeyDown(r)},onExit(){n&&(t[0].destroy(),e.destroy())}}}},Ia=e=>{const t=`quickInsert-${e}`,n=new Le("quickInsert");return at.create({name:t,addOptions(){return{suggestion:{char:e,pluginKey:n,command:({editor:r,range:o,props:i})=>{i.command({editor:r,range:o})}}}},addProseMirrorPlugins(){return[Il({editor:this.editor,...this.options.suggestion})]}}).configure({suggestion:$h})},zh=Ia("/"),Uh=Ia("、");function ys({types:e,node:t}){return Array.isArray(e)&&e.includes(t.type)||t.type===e}const Wh=at.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:["paragraph"]}},addProseMirrorPlugins(){const e=new Le(this.name),t=Object.entries(this.editor.schema.nodes).map(([,n])=>n).filter(n=>this.options.notAfter.includes(n.name));return[new Ne({key:e,appendTransaction:(n,r,o)=>{const{doc:i,tr:s,schema:a}=o,l=e.getState(o),c=i.content.size,u=a.nodes[this.options.node];if(l)return s.insert(c,u.create())},state:{init:(n,r)=>{const o=r.tr.doc.lastChild;return!ys({node:o,types:t})},apply:(n,r)=>{if(!n.docChanged)return r;const o=n.doc.lastChild;return!ys({node:o,types:t})}}})]}}),Fh=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z][A-Za-z0-9_-]*/}}),Kh=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],Vh=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],Gh=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],qh=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],Xh=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();function Zh(e){const t=Fh(e),n=qh,r=Gh,o="@[a-z-]+",i="and or not only",s={className:"variable",begin:"(\\$[a-zA-Z-][a-zA-Z0-9_-]*)\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,t.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+Kh.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+r.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+n.join("|")+")"},s,{begin:/\(/,end:/\)/,contains:[t.CSS_NUMBER_MODE]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+Xh.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[t.BLOCK_COMMENT,s,t.HEXCOLOR,t.CSS_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.IMPORTANT,t.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:o,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:i,attribute:Vh.join(" ")},contains:[{begin:o,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},s,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.HEXCOLOR,t.CSS_NUMBER_MODE]},t.FUNCTION_DISPATCH]}}const vs="[A-Za-z$_][0-9A-Za-z$_]*",Jh=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],Qh=["true","false","null","undefined","NaN","Infinity"],Ha=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],Ba=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],Da=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],Yh=["arguments","this","super","console","window","document","localStorage","module","global"],eg=[].concat(Da,Ha,Ba);function tg(e){const t=e.regex,n=(g,{after:w})=>{const y="</"+g[0].slice(1);return g.input.indexOf(y,w)!==-1},r=vs,o={begin:"<>",end:"</>"},i=/<[A-Za-z0-9\\._:-]+\s*\/>/,s={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(g,w)=>{const y=g[0].length+g.index,H=g.input[y];if(H==="<"||H===","){w.ignoreMatch();return}H===">"&&(n(g,{after:y})||w.ignoreMatch());let P;const G=g.input.substring(y);if(P=G.match(/^\s*=/)){w.ignoreMatch();return}if((P=G.match(/^\s+extends\s+/))&&P.index===0){w.ignoreMatch();return}}},a={$pattern:vs,keyword:Jh,literal:Qh,built_in:eg,"variable.language":Yh},l="[0-9](_?[0-9])*",c=`\\.(${l})`,u="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",d={className:"number",variants:[{begin:`(\\b(${u})((${c})|\\.)?|(${c}))[eE][+-]?(${l})\\b`},{begin:`\\b(${u})\\b((${c})\\b|\\.)?|(${c})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},p={className:"subst",begin:"\\$\\{",end:"\\}",keywords:a,contains:[]},f={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,p],subLanguage:"xml"}},m={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,p],subLanguage:"css"}},b={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,p]},k={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},A=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,f,m,b,{match:/\$\d+/},d];p.contains=A.concat({begin:/\{/,end:/\}/,keywords:a,contains:["self"].concat(A)});const S=[].concat(k,p.contains),O=S.concat([{begin:/\(/,end:/\)/,keywords:a,contains:["self"].concat(S)}]),h={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:O},R={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,t.concat(r,"(",t.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},x={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...Ha,...Ba]}},C={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},E={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[h],illegal:/%/},T={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function B(g){return t.concat("(?!",g.join("|"),")")}const D={match:t.concat(/\b/,B([...Da,"super","import"]),r,t.lookahead(/\(/)),className:"title.function",relevance:0},V={begin:t.concat(/\./,t.lookahead(t.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},U={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},h]},Z="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",ee={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(Z)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[h]};return{name:"Javascript",aliases:["js","jsx","mjs","cjs"],keywords:a,exports:{PARAMS_CONTAINS:O,CLASS_REFERENCE:x},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),C,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,f,m,b,k,{match:/\$\d+/},d,x,{className:"attr",begin:r+t.lookahead(":"),relevance:0},ee,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[k,e.REGEXP_MODE,{className:"function",begin:Z,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:O}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:o.begin,end:o.end},{match:i},{begin:s.begin,"on:begin":s.isTrulyOpeningTag,end:s.end}],subLanguage:"xml",contains:[{begin:s.begin,end:s.end,skip:!0,contains:["self"]}]}]},E,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[h,e.inherit(e.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},V,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[h]},D,T,R,U,{match:/\$[(.]/}]}}const Br="[A-Za-z$_][0-9A-Za-z$_]*",Pa=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],ja=["true","false","null","undefined","NaN","Infinity"],$a=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],za=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],Ua=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],Wa=["arguments","this","super","console","window","document","localStorage","module","global"],Fa=[].concat(Ua,$a,za);function ng(e){const t=e.regex,n=(g,{after:w})=>{const y="</"+g[0].slice(1);return g.input.indexOf(y,w)!==-1},r=Br,o={begin:"<>",end:"</>"},i=/<[A-Za-z0-9\\._:-]+\s*\/>/,s={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(g,w)=>{const y=g[0].length+g.index,H=g.input[y];if(H==="<"||H===","){w.ignoreMatch();return}H===">"&&(n(g,{after:y})||w.ignoreMatch());let P;const G=g.input.substring(y);if(P=G.match(/^\s*=/)){w.ignoreMatch();return}if((P=G.match(/^\s+extends\s+/))&&P.index===0){w.ignoreMatch();return}}},a={$pattern:Br,keyword:Pa,literal:ja,built_in:Fa,"variable.language":Wa},l="[0-9](_?[0-9])*",c=`\\.(${l})`,u="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",d={className:"number",variants:[{begin:`(\\b(${u})((${c})|\\.)?|(${c}))[eE][+-]?(${l})\\b`},{begin:`\\b(${u})\\b((${c})\\b|\\.)?|(${c})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},p={className:"subst",begin:"\\$\\{",end:"\\}",keywords:a,contains:[]},f={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,p],subLanguage:"xml"}},m={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,p],subLanguage:"css"}},b={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,p]},k={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},A=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,f,m,b,{match:/\$\d+/},d];p.contains=A.concat({begin:/\{/,end:/\}/,keywords:a,contains:["self"].concat(A)});const S=[].concat(k,p.contains),O=S.concat([{begin:/\(/,end:/\)/,keywords:a,contains:["self"].concat(S)}]),h={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:O},R={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,t.concat(r,"(",t.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},x={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...$a,...za]}},C={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},E={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[h],illegal:/%/},T={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function B(g){return t.concat("(?!",g.join("|"),")")}const D={match:t.concat(/\b/,B([...Ua,"super","import"]),r,t.lookahead(/\(/)),className:"title.function",relevance:0},V={begin:t.concat(/\./,t.lookahead(t.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},U={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},h]},Z="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",ee={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(Z)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[h]};return{name:"Javascript",aliases:["js","jsx","mjs","cjs"],keywords:a,exports:{PARAMS_CONTAINS:O,CLASS_REFERENCE:x},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),C,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,f,m,b,k,{match:/\$\d+/},d,x,{className:"attr",begin:r+t.lookahead(":"),relevance:0},ee,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[k,e.REGEXP_MODE,{className:"function",begin:Z,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:O}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:o.begin,end:o.end},{match:i},{begin:s.begin,"on:begin":s.isTrulyOpeningTag,end:s.end}],subLanguage:"xml",contains:[{begin:s.begin,end:s.end,skip:!0,contains:["self"]}]}]},E,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[h,e.inherit(e.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},V,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[h]},D,T,R,U,{match:/\$[(.]/}]}}function rg(e){const t=ng(e),n=Br,r=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],o={beginKeywords:"namespace",end:/\{/,excludeEnd:!0,contains:[t.exports.CLASS_REFERENCE]},i={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:r},contains:[t.exports.CLASS_REFERENCE]},s={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},a=["type","namespace","interface","public","private","protected","implements","declare","abstract","readonly","enum","override"],l={$pattern:Br,keyword:Pa.concat(a),literal:ja,built_in:Fa.concat(r),"variable.language":Wa},c={className:"meta",begin:"@"+n},u=(p,f,m)=>{const b=p.contains.findIndex(k=>k.label===f);if(b===-1)throw new Error("can not find mode to replace");p.contains.splice(b,1,m)};Object.assign(t.keywords,l),t.exports.PARAMS_CONTAINS.push(c),t.contains=t.contains.concat([c,o,i]),u(t,"shebang",e.SHEBANG()),u(t,"use_strict",s);const d=t.contains.find(p=>p.label==="func.def");return d.relevance=0,Object.assign(t,{name:"TypeScript",aliases:["ts","tsx"]}),t}function og(e){const t=e.regex,n=t.concat(/[\p{L}_]/u,t.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),r=/[\p{L}0-9._:-]+/u,o={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},i={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},s=e.inherit(i,{begin:/\(/,end:/\)/}),a=e.inherit(e.APOS_STRING_MODE,{className:"string"}),l=e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),c={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:r,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[o]},{begin:/'/,end:/'/,contains:[o]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[i,l,a,s,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[i,s,l,a]}]}]},e.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},o,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[l]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[c],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[c],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:t.concat(/</,t.lookahead(t.concat(n,t.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:n,relevance:0,starts:c}]},{className:"tag",begin:t.concat(/<\//,t.lookahead(t.concat(n,/>/))),contains:[{className:"name",begin:n,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function ig(e){const t=e.regex,n=/[\p{XID_Start}_]\p{XID_Continue}*/u,r=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],o={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:r,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},i={className:"meta",begin:/^(>>>|\.\.\.) /},s={className:"subst",begin:/\{/,end:/\}/,keywords:o,illegal:/#/},a={begin:/\{\{/,relevance:0},l={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,i],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,i],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,i,a,s]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,i,a,s]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[e.BACKSLASH_ESCAPE,a,s]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,a,s]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},c="[0-9](_?[0-9])*",u=`(\\b(${c}))?\\.(${c})|\\b(${c})\\.`,d=`\\b|${r.join("|")}`,p={className:"number",relevance:0,variants:[{begin:`(\\b(${c})|(${u}))[eE][+-]?(${c})[jJ]?(?=${d})`},{begin:`(${u})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${d})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${d})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${d})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${d})`},{begin:`\\b(${c})[jJ](?=${d})`}]},f={className:"comment",begin:t.lookahead(/# type:/),end:/$/,keywords:o,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},m={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:["self",i,p,l,e.HASH_COMMENT_MODE]}]};return s.contains=[l,p,i],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:o,illegal:/(<\/|->|\?)|=>/,contains:[i,p,{begin:/\bself\b/},{beginKeywords:"if",relevance:0},l,f,e.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[m]},{variants:[{match:[/\bclass/,/\s+/,n,/\s*/,/\(\s*/,n,/\s*\)/]},{match:[/\bclass/,/\s+/,n]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[p,m,l]}]}}function sg(e){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}var ii={exports:{}};function si(e){return e instanceof Map?e.clear=e.delete=e.set=function(){throw new Error("map is read-only")}:e instanceof Set&&(e.add=e.clear=e.delete=function(){throw new Error("set is read-only")}),Object.freeze(e),Object.getOwnPropertyNames(e).forEach(function(t){var n=e[t];typeof n=="object"&&!Object.isFrozen(n)&&si(n)}),e}ii.exports=si;ii.exports.default=si;class ws{constructor(t){t.data===void 0&&(t.data={}),this.data=t.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function Ka(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function Rt(e,...t){const n=Object.create(null);for(const r in e)n[r]=e[r];return t.forEach(function(r){for(const o in r)n[o]=r[o]}),n}const ag="</span>",xs=e=>!!e.scope||e.sublanguage&&e.language,lg=(e,{prefix:t})=>{if(e.includes(".")){const n=e.split(".");return[`${t}${n.shift()}`,...n.map((r,o)=>`${r}${"_".repeat(o+1)}`)].join(" ")}return`${t}${e}`};class cg{constructor(t,n){this.buffer="",this.classPrefix=n.classPrefix,t.walk(this)}addText(t){this.buffer+=Ka(t)}openNode(t){if(!xs(t))return;let n="";t.sublanguage?n=`language-${t.language}`:n=lg(t.scope,{prefix:this.classPrefix}),this.span(n)}closeNode(t){xs(t)&&(this.buffer+=ag)}value(){return this.buffer}span(t){this.buffer+=`<span class="${t}">`}}const ks=(e={})=>{const t={children:[]};return Object.assign(t,e),t};class ai{constructor(){this.rootNode=ks(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(t){this.top.children.push(t)}openNode(t){const n=ks({scope:t});this.add(n),this.stack.push(n)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(t){return this.constructor._walk(t,this.rootNode)}static _walk(t,n){return typeof n=="string"?t.addText(n):n.children&&(t.openNode(n),n.children.forEach(r=>this._walk(t,r)),t.closeNode(n)),t}static _collapse(t){typeof t!="string"&&t.children&&(t.children.every(n=>typeof n=="string")?t.children=[t.children.join("")]:t.children.forEach(n=>{ai._collapse(n)}))}}class ug extends ai{constructor(t){super(),this.options=t}addKeyword(t,n){t!==""&&(this.openNode(n),this.addText(t),this.closeNode())}addText(t){t!==""&&this.add(t)}addSublanguage(t,n){const r=t.root;r.sublanguage=!0,r.language=n,this.add(r)}toHTML(){return new cg(this,this.options).value()}finalize(){return!0}}function $n(e){return e?typeof e=="string"?e:e.source:null}function Va(e){return Zt("(?=",e,")")}function dg(e){return Zt("(?:",e,")*")}function pg(e){return Zt("(?:",e,")?")}function Zt(...e){return e.map(t=>$n(t)).join("")}function fg(e){const t=e[e.length-1];return typeof t=="object"&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}function li(...e){return"("+(fg(e).capture?"":"?:")+e.map(t=>$n(t)).join("|")+")"}function Ga(e){return new RegExp(e.toString()+"|").exec("").length-1}function hg(e,t){const n=e&&e.exec(t);return n&&n.index===0}const gg=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function ci(e,{joinWith:t}){let n=0;return e.map(r=>{n+=1;const o=n;let i=$n(r),s="";for(;i.length>0;){const a=gg.exec(i);if(!a){s+=i;break}s+=i.substring(0,a.index),i=i.substring(a.index+a[0].length),a[0][0]==="\\"&&a[1]?s+="\\"+String(Number(a[1])+o):(s+=a[0],a[0]==="("&&n++)}return s}).map(r=>`(${r})`).join(t)}const mg=/\b\B/,qa="[a-zA-Z]\\w*",ui="[a-zA-Z_]\\w*",Xa="\\b\\d+(\\.\\d+)?",Za="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",Ja="\\b(0b[01]+)",bg="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",yg=(e={})=>{const t=/^#![ ]*\//;return e.binary&&(e.begin=Zt(t,/.*\b/,e.binary,/\b.*/)),Rt({scope:"meta",begin:t,end:/$/,relevance:0,"on:begin":(n,r)=>{n.index!==0&&r.ignoreMatch()}},e)},zn={begin:"\\\\[\\s\\S]",relevance:0},vg={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[zn]},wg={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[zn]},xg={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},Wr=function(e,t,n={}){const r=Rt({scope:"comment",begin:e,end:t,contains:[]},n);r.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const o=li("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return r.contains.push({begin:Zt(/[ ]+/,"(",o,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),r},kg=Wr("//","$"),Eg=Wr("/\\*","\\*/"),Ag=Wr("#","$"),_g={scope:"number",begin:Xa,relevance:0},Sg={scope:"number",begin:Za,relevance:0},Mg={scope:"number",begin:Ja,relevance:0},Cg={begin:/(?=\/[^/\n]*\/)/,contains:[{scope:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[zn,{begin:/\[/,end:/\]/,relevance:0,contains:[zn]}]}]},Tg={scope:"title",begin:qa,relevance:0},Og={scope:"title",begin:ui,relevance:0},Rg={begin:"\\.\\s*"+ui,relevance:0},Ng=function(e){return Object.assign(e,{"on:begin":(t,n)=>{n.data._beginMatch=t[1]},"on:end":(t,n)=>{n.data._beginMatch!==t[1]&&n.ignoreMatch()}})};var sr=Object.freeze({__proto__:null,MATCH_NOTHING_RE:mg,IDENT_RE:qa,UNDERSCORE_IDENT_RE:ui,NUMBER_RE:Xa,C_NUMBER_RE:Za,BINARY_NUMBER_RE:Ja,RE_STARTERS_RE:bg,SHEBANG:yg,BACKSLASH_ESCAPE:zn,APOS_STRING_MODE:vg,QUOTE_STRING_MODE:wg,PHRASAL_WORDS_MODE:xg,COMMENT:Wr,C_LINE_COMMENT_MODE:kg,C_BLOCK_COMMENT_MODE:Eg,HASH_COMMENT_MODE:Ag,NUMBER_MODE:_g,C_NUMBER_MODE:Sg,BINARY_NUMBER_MODE:Mg,REGEXP_MODE:Cg,TITLE_MODE:Tg,UNDERSCORE_TITLE_MODE:Og,METHOD_GUARD:Rg,END_SAME_AS_BEGIN:Ng});function Lg(e,t){e.input[e.index-1]==="."&&t.ignoreMatch()}function Ig(e,t){e.className!==void 0&&(e.scope=e.className,delete e.className)}function Hg(e,t){t&&e.beginKeywords&&(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",e.__beforeBegin=Lg,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,e.relevance===void 0&&(e.relevance=0))}function Bg(e,t){Array.isArray(e.illegal)&&(e.illegal=li(...e.illegal))}function Dg(e,t){if(e.match){if(e.begin||e.end)throw new Error("begin & end are not supported with match");e.begin=e.match,delete e.match}}function Pg(e,t){e.relevance===void 0&&(e.relevance=1)}const jg=(e,t)=>{if(!e.beforeMatch)return;if(e.starts)throw new Error("beforeMatch cannot be used with starts");const n=Object.assign({},e);Object.keys(e).forEach(r=>{delete e[r]}),e.keywords=n.keywords,e.begin=Zt(n.beforeMatch,Va(n.begin)),e.starts={relevance:0,contains:[Object.assign(n,{endsParent:!0})]},e.relevance=0,delete n.beforeMatch},$g=["of","and","for","in","not","or","if","then","parent","list","value"],zg="keyword";function Qa(e,t,n=zg){const r=Object.create(null);return typeof e=="string"?o(n,e.split(" ")):Array.isArray(e)?o(n,e):Object.keys(e).forEach(function(i){Object.assign(r,Qa(e[i],t,i))}),r;function o(i,s){t&&(s=s.map(a=>a.toLowerCase())),s.forEach(function(a){const l=a.split("|");r[l[0]]=[i,Ug(l[0],l[1])]})}}function Ug(e,t){return t?Number(t):Wg(e)?0:1}function Wg(e){return $g.includes(e.toLowerCase())}const Es={},Vt=e=>{console.error(e)},As=(e,...t)=>{console.log(`WARN: ${e}`,...t)},nn=(e,t)=>{Es[`${e}/${t}`]||(console.log(`Deprecated as of ${e}. ${t}`),Es[`${e}/${t}`]=!0)},Dr=new Error;function Ya(e,t,{key:n}){let r=0;const o=e[n],i={},s={};for(let a=1;a<=t.length;a++)s[a+r]=o[a],i[a+r]=!0,r+=Ga(t[a-1]);e[n]=s,e[n]._emit=i,e[n]._multi=!0}function Fg(e){if(Array.isArray(e.begin)){if(e.skip||e.excludeBegin||e.returnBegin)throw Vt("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),Dr;if(typeof e.beginScope!="object"||e.beginScope===null)throw Vt("beginScope must be object"),Dr;Ya(e,e.begin,{key:"beginScope"}),e.begin=ci(e.begin,{joinWith:""})}}function Kg(e){if(Array.isArray(e.end)){if(e.skip||e.excludeEnd||e.returnEnd)throw Vt("skip, excludeEnd, returnEnd not compatible with endScope: {}"),Dr;if(typeof e.endScope!="object"||e.endScope===null)throw Vt("endScope must be object"),Dr;Ya(e,e.end,{key:"endScope"}),e.end=ci(e.end,{joinWith:""})}}function Vg(e){e.scope&&typeof e.scope=="object"&&e.scope!==null&&(e.beginScope=e.scope,delete e.scope)}function Gg(e){Vg(e),typeof e.beginScope=="string"&&(e.beginScope={_wrap:e.beginScope}),typeof e.endScope=="string"&&(e.endScope={_wrap:e.endScope}),Fg(e),Kg(e)}function qg(e){function t(s,a){return new RegExp($n(s),"m"+(e.case_insensitive?"i":"")+(e.unicodeRegex?"u":"")+(a?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(a,l){l.position=this.position++,this.matchIndexes[this.matchAt]=l,this.regexes.push([l,a]),this.matchAt+=Ga(a)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const a=this.regexes.map(l=>l[1]);this.matcherRe=t(ci(a,{joinWith:"|"}),!0),this.lastIndex=0}exec(a){this.matcherRe.lastIndex=this.lastIndex;const l=this.matcherRe.exec(a);if(!l)return null;const c=l.findIndex((d,p)=>p>0&&d!==void 0),u=this.matchIndexes[c];return l.splice(0,c),Object.assign(l,u)}}class r{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(a){if(this.multiRegexes[a])return this.multiRegexes[a];const l=new n;return this.rules.slice(a).forEach(([c,u])=>l.addRule(c,u)),l.compile(),this.multiRegexes[a]=l,l}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(a,l){this.rules.push([a,l]),l.type==="begin"&&this.count++}exec(a){const l=this.getMatcher(this.regexIndex);l.lastIndex=this.lastIndex;let c=l.exec(a);if(this.resumingScanAtSamePosition()&&!(c&&c.index===this.lastIndex)){const u=this.getMatcher(0);u.lastIndex=this.lastIndex+1,c=u.exec(a)}return c&&(this.regexIndex+=c.position+1,this.regexIndex===this.count&&this.considerAll()),c}}function o(s){const a=new r;return s.contains.forEach(l=>a.addRule(l.begin,{rule:l,type:"begin"})),s.terminatorEnd&&a.addRule(s.terminatorEnd,{type:"end"}),s.illegal&&a.addRule(s.illegal,{type:"illegal"}),a}function i(s,a){const l=s;if(s.isCompiled)return l;[Ig,Dg,Gg,jg].forEach(u=>u(s,a)),e.compilerExtensions.forEach(u=>u(s,a)),s.__beforeBegin=null,[Hg,Bg,Pg].forEach(u=>u(s,a)),s.isCompiled=!0;let c=null;return typeof s.keywords=="object"&&s.keywords.$pattern&&(s.keywords=Object.assign({},s.keywords),c=s.keywords.$pattern,delete s.keywords.$pattern),c=c||/\w+/,s.keywords&&(s.keywords=Qa(s.keywords,e.case_insensitive)),l.keywordPatternRe=t(c,!0),a&&(s.begin||(s.begin=/\B|\b/),l.beginRe=t(l.begin),!s.end&&!s.endsWithParent&&(s.end=/\B|\b/),s.end&&(l.endRe=t(l.end)),l.terminatorEnd=$n(l.end)||"",s.endsWithParent&&a.terminatorEnd&&(l.terminatorEnd+=(s.end?"|":"")+a.terminatorEnd)),s.illegal&&(l.illegalRe=t(s.illegal)),s.contains||(s.contains=[]),s.contains=[].concat(...s.contains.map(function(u){return Xg(u==="self"?s:u)})),s.contains.forEach(function(u){i(u,l)}),s.starts&&i(s.starts,a),l.matcher=o(l),l}if(e.compilerExtensions||(e.compilerExtensions=[]),e.contains&&e.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return e.classNameAliases=Rt(e.classNameAliases||{}),i(e)}function el(e){return e?e.endsWithParent||el(e.starts):!1}function Xg(e){return e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map(function(t){return Rt(e,{variants:null},t)})),e.cachedVariants?e.cachedVariants:el(e)?Rt(e,{starts:e.starts?Rt(e.starts):null}):Object.isFrozen(e)?Rt(e):e}var Zg="11.7.0";class Jg extends Error{constructor(t,n){super(t),this.name="HTMLInjectionError",this.html=n}}const oo=Ka,_s=Rt,Ss=Symbol("nomatch"),Qg=7,Yg=function(e){const t=Object.create(null),n=Object.create(null),r=[];let o=!0;const i="Could not find the language '{}', did you forget to load/include a language module?",s={disableAutodetect:!0,name:"Plain text",contains:[]};let a={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:ug};function l(g){return a.noHighlightRe.test(g)}function c(g){let w=g.className+" ";w+=g.parentNode?g.parentNode.className:"";const y=a.languageDetectRe.exec(w);if(y){const H=T(y[1]);return H||(As(i.replace("{}",y[1])),As("Falling back to no-highlight mode for this block.",g)),H?y[1]:"no-highlight"}return w.split(/\s+/).find(H=>l(H)||T(H))}function u(g,w,y){let H="",P="";typeof w=="object"?(H=g,y=w.ignoreIllegals,P=w.language):(nn("10.7.0","highlight(lang, code, ...args) has been deprecated."),nn("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),P=g,H=w),y===void 0&&(y=!0);const G={code:H,language:P};Z("before:highlight",G);const Y=G.result?G.result:d(G.language,G.code,y);return Y.code=G.code,Z("after:highlight",Y),Y}function d(g,w,y,H){const P=Object.create(null);function G(v,M){return v.keywords[M]}function Y(){if(!N.keywords){J.addText($);return}let v=0;N.keywordPatternRe.lastIndex=0;let M=N.keywordPatternRe.exec($),I="";for(;M;){I+=$.substring(v,M.index);const j=ue.case_insensitive?M[0].toLowerCase():M[0],te=G(N,j);if(te){const[ge,wn]=te;if(J.addText(I),I="",P[j]=(P[j]||0)+1,P[j]<=Qg&&(ve+=wn),ge.startsWith("_"))I+=M[0];else{const xn=ue.classNameAliases[ge]||ge;J.addKeyword(M[0],xn)}}else I+=M[0];v=N.keywordPatternRe.lastIndex,M=N.keywordPatternRe.exec($)}I+=$.substring(v),J.addText(I)}function ce(){if($==="")return;let v=null;if(typeof N.subLanguage=="string"){if(!t[N.subLanguage]){J.addText($);return}v=d(N.subLanguage,$,!0,ct[N.subLanguage]),ct[N.subLanguage]=v._top}else v=f($,N.subLanguage.length?N.subLanguage:null);N.relevance>0&&(ve+=v.relevance),J.addSublanguage(v._emitter,v.language)}function X(){N.subLanguage!=null?ce():Y(),$=""}function Q(v,M){let I=1;const j=M.length-1;for(;I<=j;){if(!v._emit[I]){I++;continue}const te=ue.classNameAliases[v[I]]||v[I],ge=M[I];te?J.addKeyword(ge,te):($=ge,Y(),$=""),I++}}function ae(v,M){return v.scope&&typeof v.scope=="string"&&J.openNode(ue.classNameAliases[v.scope]||v.scope),v.beginScope&&(v.beginScope._wrap?(J.addKeyword($,ue.classNameAliases[v.beginScope._wrap]||v.beginScope._wrap),$=""):v.beginScope._multi&&(Q(v.beginScope,M),$="")),N=Object.create(v,{parent:{value:N}}),N}function ye(v,M,I){let j=hg(v.endRe,I);if(j){if(v["on:end"]){const te=new ws(v);v["on:end"](M,te),te.isMatchIgnored&&(j=!1)}if(j){for(;v.endsParent&&v.parent;)v=v.parent;return v}}if(v.endsWithParent)return ye(v.parent,M,I)}function xe(v){return N.matcher.regexIndex===0?($+=v[0],1):(Be=!0,0)}function Je(v){const M=v[0],I=v.rule,j=new ws(I),te=[I.__beforeBegin,I["on:begin"]];for(const ge of te)if(ge&&(ge(v,j),j.isMatchIgnored))return xe(M);return I.skip?$+=M:(I.excludeBegin&&($+=M),X(),!I.returnBegin&&!I.excludeBegin&&($=M)),ae(I,v),I.returnBegin?0:M.length}function _e(v){const M=v[0],I=w.substring(v.index),j=ye(N,v,I);if(!j)return Ss;const te=N;N.endScope&&N.endScope._wrap?(X(),J.addKeyword(M,N.endScope._wrap)):N.endScope&&N.endScope._multi?(X(),Q(N.endScope,v)):te.skip?$+=M:(te.returnEnd||te.excludeEnd||($+=M),X(),te.excludeEnd&&($=M));do N.scope&&J.closeNode(),!N.skip&&!N.subLanguage&&(ve+=N.relevance),N=N.parent;while(N!==j.parent);return j.starts&&ae(j.starts,v),te.returnEnd?0:M.length}function Ie(){const v=[];for(let M=N;M!==ue;M=M.parent)M.scope&&v.unshift(M.scope);v.forEach(M=>J.openNode(M))}let ke={};function Qe(v,M){const I=M&&M[0];if($+=v,I==null)return X(),0;if(ke.type==="begin"&&M.type==="end"&&ke.index===M.index&&I===""){if($+=w.slice(M.index,M.index+1),!o){const j=new Error(`0 width match regex (${g})`);throw j.languageName=g,j.badRule=ke.rule,j}return 1}if(ke=M,M.type==="begin")return Je(M);if(M.type==="illegal"&&!y){const j=new Error('Illegal lexeme "'+I+'" for mode "'+(N.scope||"<unnamed>")+'"');throw j.mode=N,j}else if(M.type==="end"){const j=_e(M);if(j!==Ss)return j}if(M.type==="illegal"&&I==="")return 1;if(Se>1e5&&Se>M.index*3)throw new Error("potential infinite loop, way more iterations than matches");return $+=I,I.length}const ue=T(g);if(!ue)throw Vt(i.replace("{}",g)),new Error('Unknown language: "'+g+'"');const At=qg(ue);let He="",N=H||At;const ct={},J=new a.__emitter(a);Ie();let $="",ve=0,he=0,Se=0,Be=!1;try{for(N.matcher.considerAll();;){Se++,Be?Be=!1:N.matcher.considerAll(),N.matcher.lastIndex=he;const v=N.matcher.exec(w);if(!v)break;const M=w.substring(he,v.index),I=Qe(M,v);he=v.index+I}return Qe(w.substring(he)),J.closeAllNodes(),J.finalize(),He=J.toHTML(),{language:g,value:He,relevance:ve,illegal:!1,_emitter:J,_top:N}}catch(v){if(v.message&&v.message.includes("Illegal"))return{language:g,value:oo(w),illegal:!0,relevance:0,_illegalBy:{message:v.message,index:he,context:w.slice(he-100,he+100),mode:v.mode,resultSoFar:He},_emitter:J};if(o)return{language:g,value:oo(w),illegal:!1,relevance:0,errorRaised:v,_emitter:J,_top:N};throw v}}function p(g){const w={value:oo(g),illegal:!1,relevance:0,_top:s,_emitter:new a.__emitter(a)};return w._emitter.addText(g),w}function f(g,w){w=w||a.languages||Object.keys(t);const y=p(g),H=w.filter(T).filter(D).map(X=>d(X,g,!1));H.unshift(y);const P=H.sort((X,Q)=>{if(X.relevance!==Q.relevance)return Q.relevance-X.relevance;if(X.language&&Q.language){if(T(X.language).supersetOf===Q.language)return 1;if(T(Q.language).supersetOf===X.language)return-1}return 0}),[G,Y]=P,ce=G;return ce.secondBest=Y,ce}function m(g,w,y){const H=w&&n[w]||y;g.classList.add("hljs"),g.classList.add(`language-${H}`)}function b(g){let w=null;const y=c(g);if(l(y))return;if(Z("before:highlightElement",{el:g,language:y}),g.children.length>0&&(a.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(g)),a.throwUnescapedHTML))throw new Jg("One of your code blocks includes unescaped HTML.",g.innerHTML);w=g;const H=w.textContent,P=y?u(H,{language:y,ignoreIllegals:!0}):f(H);g.innerHTML=P.value,m(g,y,P.language),g.result={language:P.language,re:P.relevance,relevance:P.relevance},P.secondBest&&(g.secondBest={language:P.secondBest.language,relevance:P.secondBest.relevance}),Z("after:highlightElement",{el:g,result:P,text:H})}function k(g){a=_s(a,g)}const A=()=>{h(),nn("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function S(){h(),nn("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let O=!1;function h(){if(document.readyState==="loading"){O=!0;return}document.querySelectorAll(a.cssSelector).forEach(b)}function R(){O&&h()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",R,!1);function x(g,w){let y=null;try{y=w(e)}catch(H){if(Vt("Language definition for '{}' could not be registered.".replace("{}",g)),o)Vt(H);else throw H;y=s}y.name||(y.name=g),t[g]=y,y.rawDefinition=w.bind(null,e),y.aliases&&B(y.aliases,{languageName:g})}function C(g){delete t[g];for(const w of Object.keys(n))n[w]===g&&delete n[w]}function E(){return Object.keys(t)}function T(g){return g=(g||"").toLowerCase(),t[g]||t[n[g]]}function B(g,{languageName:w}){typeof g=="string"&&(g=[g]),g.forEach(y=>{n[y.toLowerCase()]=w})}function D(g){const w=T(g);return w&&!w.disableAutodetect}function V(g){g["before:highlightBlock"]&&!g["before:highlightElement"]&&(g["before:highlightElement"]=w=>{g["before:highlightBlock"](Object.assign({block:w.el},w))}),g["after:highlightBlock"]&&!g["after:highlightElement"]&&(g["after:highlightElement"]=w=>{g["after:highlightBlock"](Object.assign({block:w.el},w))})}function U(g){V(g),r.push(g)}function Z(g,w){const y=g;r.forEach(function(H){H[y]&&H[y](w)})}function ee(g){return nn("10.7.0","highlightBlock will be removed entirely in v12.0"),nn("10.7.0","Please use highlightElement now."),b(g)}Object.assign(e,{highlight:u,highlightAuto:f,highlightAll:h,highlightElement:b,highlightBlock:ee,configure:k,initHighlighting:A,initHighlightingOnLoad:S,registerLanguage:x,unregisterLanguage:C,listLanguages:E,getLanguage:T,registerAliases:B,autoDetection:D,inherit:_s,addPlugin:U}),e.debugMode=function(){o=!1},e.safeMode=function(){o=!0},e.versionString=Zg,e.regex={concat:Zt,lookahead:Va,either:li,optional:pg,anyNumberOfTimes:dg};for(const g in sr)typeof sr[g]=="object"&&ii.exports(sr[g]);return Object.assign(e,sr),e};var Un=Yg({}),em=Un;Un.HighlightJS=Un;Un.default=Un;const it=em;var So={},tm={get exports(){return So},set exports(e){So=e}};(function(e){(function(){var t;t=e.exports=o,t.format=o,t.vsprintf=r,typeof console<"u"&&typeof console.log=="function"&&(t.printf=n);function n(){console.log(o.apply(null,arguments))}function r(i,s){return o.apply(null,[i].concat(s))}function o(i){for(var s=1,a=[].slice.call(arguments),l=0,c=i.length,u="",d,p=!1,f,m,b=!1,k,A=function(){return a[s++]},S=function(){for(var O="";/\d/.test(i[l]);)O+=i[l++],d=i[l];return O.length>0?parseInt(O):null};l<c;++l)if(d=i[l],p)switch(p=!1,d=="."?(b=!1,d=i[++l]):d=="0"&&i[l+1]=="."?(b=!0,l+=2,d=i[l]):b=!0,k=S(),d){case"b":u+=parseInt(A(),10).toString(2);break;case"c":f=A(),typeof f=="string"||f instanceof String?u+=f:u+=String.fromCharCode(parseInt(f,10));break;case"d":u+=parseInt(A(),10);break;case"f":m=String(parseFloat(A()).toFixed(k||6)),u+=b?m:m.replace(/^0/,"");break;case"j":u+=JSON.stringify(A());break;case"o":u+="0"+parseInt(A(),10).toString(8);break;case"s":u+=A();break;case"x":u+="0x"+parseInt(A(),10).toString(16);break;case"X":u+="0x"+parseInt(A(),10).toString(16).toUpperCase();break;default:u+=d;break}else d==="%"?p=!0:u+=d;return u}})()})(tm);const nm=So,hr=Object.assign(jt(Error),{eval:jt(EvalError),range:jt(RangeError),reference:jt(ReferenceError),syntax:jt(SyntaxError),type:jt(TypeError),uri:jt(URIError)});function jt(e){return t.displayName=e.displayName||e.name,t;function t(n,...r){const o=n&&nm(n,...r);return new e(o)}}const rm={}.hasOwnProperty,om="hljs-";function tl(e,t,n={}){let r=n.prefix;if(typeof e!="string")throw hr("Expected `string` for name, got `%s`",e);if(!it.getLanguage(e))throw hr("Unknown language: `%s` is not registered",e);if(typeof t!="string")throw hr("Expected `string` for value, got `%s`",t);r==null&&(r=om),it.configure({__emitter:um,classPrefix:r});const o=it.highlight(t,{language:e,ignoreIllegals:!0});if(it.configure({}),o.errorRaised)throw o.errorRaised;return o._emitter.root.data.language=o.language,o._emitter.root.data.relevance=o.relevance,o._emitter.root}function im(e,t={}){const n=t.subset||it.listLanguages();t.prefix;let r=-1,o={type:"root",data:{language:null,relevance:0},children:[]};if(typeof e!="string")throw hr("Expected `string` for value, got `%s`",e);for(;++r<n.length;){const i=n[r];if(!it.getLanguage(i))continue;const s=tl(i,e,t);s.data.relevance>o.data.relevance&&(o=s)}return o}function sm(e,t){it.registerLanguage(e,t)}const am=function(e,t){if(typeof e=="string")it.registerAliases(t,{languageName:e});else{let n;for(n in e)rm.call(e,n)&&it.registerAliases(e[n],{languageName:n})}};function lm(e){return!!it.getLanguage(e)}function cm(){return it.listLanguages()}class um{constructor(t){this.options=t,this.root={type:"root",data:{language:null,relevance:0},children:[]},this.stack=[this.root]}addText(t){if(t==="")return;const n=this.stack[this.stack.length-1],r=n.children[n.children.length-1];r&&r.type==="text"?r.value+=t:n.children.push({type:"text",value:t})}addKeyword(t,n){this.openNode(n),this.addText(t),this.closeNode()}addSublanguage(t,n){const r=this.stack[this.stack.length-1],o=t.root.children;n?r.children.push({type:"element",tagName:"span",properties:{className:[n]},children:o}):r.children.push(...o)}openNode(t){const n=t.split(".").map((i,s)=>s?i+"_".repeat(s):this.options.classPrefix+i),r=this.stack[this.stack.length-1],o={type:"element",tagName:"span",properties:{className:n},children:[]};r.children.push(o),this.stack.push(o)}closeNode(){this.stack.pop()}closeAllNodes(){}finalize(){}toHTML(){return""}}const Jt={highlight:tl,highlightAuto:im,registerLanguage:sm,registered:lm,listLanguages:cm,registerAlias:am};/*!
  * @soerenmartius/vue3-clipboard v0.1.2
  * (c) 2021 Soeren Martius
  * @license MIT
  */var dm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function fm(e,t,n){return n={path:t,exports:{},require:function(r,o){return hm(r,o??n.path)}},e(n,n.exports),n.exports}function hm(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var gm=fm(function(e,t){/*!
 * clipboard.js v2.0.6
 * https://clipboardjs.com/
 * 
 * Licensed MIT © Zeno Rocha
 */(function(n,r){e.exports=r()})(dm,function(){return function(n){var r={};function o(i){if(r[i])return r[i].exports;var s=r[i]={i,l:!1,exports:{}};return n[i].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=n,o.c=r,o.d=function(i,s,a){o.o(i,s)||Object.defineProperty(i,s,{enumerable:!0,get:a})},o.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},o.t=function(i,s){if(s&1&&(i=o(i)),s&8||s&4&&typeof i=="object"&&i&&i.__esModule)return i;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:i}),s&2&&typeof i!="string")for(var l in i)o.d(a,l,(function(c){return i[c]}).bind(null,l));return a},o.n=function(i){var s=i&&i.__esModule?function(){return i.default}:function(){return i};return o.d(s,"a",s),s},o.o=function(i,s){return Object.prototype.hasOwnProperty.call(i,s)},o.p="",o(o.s=6)}([function(n,r){function o(i){var s;if(i.nodeName==="SELECT")i.focus(),s=i.value;else if(i.nodeName==="INPUT"||i.nodeName==="TEXTAREA"){var a=i.hasAttribute("readonly");a||i.setAttribute("readonly",""),i.select(),i.setSelectionRange(0,i.value.length),a||i.removeAttribute("readonly"),s=i.value}else{i.hasAttribute("contenteditable")&&i.focus();var l=window.getSelection(),c=document.createRange();c.selectNodeContents(i),l.removeAllRanges(),l.addRange(c),s=l.toString()}return s}n.exports=o},function(n,r){function o(){}o.prototype={on:function(i,s,a){var l=this.e||(this.e={});return(l[i]||(l[i]=[])).push({fn:s,ctx:a}),this},once:function(i,s,a){var l=this;function c(){l.off(i,c),s.apply(a,arguments)}return c._=s,this.on(i,c,a)},emit:function(i){var s=[].slice.call(arguments,1),a=((this.e||(this.e={}))[i]||[]).slice(),l=0,c=a.length;for(l;l<c;l++)a[l].fn.apply(a[l].ctx,s);return this},off:function(i,s){var a=this.e||(this.e={}),l=a[i],c=[];if(l&&s)for(var u=0,d=l.length;u<d;u++)l[u].fn!==s&&l[u].fn._!==s&&c.push(l[u]);return c.length?a[i]=c:delete a[i],this}},n.exports=o,n.exports.TinyEmitter=o},function(n,r,o){var i=o(3),s=o(4);function a(d,p,f){if(!d&&!p&&!f)throw new Error("Missing required arguments");if(!i.string(p))throw new TypeError("Second argument must be a String");if(!i.fn(f))throw new TypeError("Third argument must be a Function");if(i.node(d))return l(d,p,f);if(i.nodeList(d))return c(d,p,f);if(i.string(d))return u(d,p,f);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function l(d,p,f){return d.addEventListener(p,f),{destroy:function(){d.removeEventListener(p,f)}}}function c(d,p,f){return Array.prototype.forEach.call(d,function(m){m.addEventListener(p,f)}),{destroy:function(){Array.prototype.forEach.call(d,function(m){m.removeEventListener(p,f)})}}}function u(d,p,f){return s(document.body,d,p,f)}n.exports=a},function(n,r){r.node=function(o){return o!==void 0&&o instanceof HTMLElement&&o.nodeType===1},r.nodeList=function(o){var i=Object.prototype.toString.call(o);return o!==void 0&&(i==="[object NodeList]"||i==="[object HTMLCollection]")&&"length"in o&&(o.length===0||r.node(o[0]))},r.string=function(o){return typeof o=="string"||o instanceof String},r.fn=function(o){var i=Object.prototype.toString.call(o);return i==="[object Function]"}},function(n,r,o){var i=o(5);function s(c,u,d,p,f){var m=l.apply(this,arguments);return c.addEventListener(d,m,f),{destroy:function(){c.removeEventListener(d,m,f)}}}function a(c,u,d,p,f){return typeof c.addEventListener=="function"?s.apply(null,arguments):typeof d=="function"?s.bind(null,document).apply(null,arguments):(typeof c=="string"&&(c=document.querySelectorAll(c)),Array.prototype.map.call(c,function(m){return s(m,u,d,p,f)}))}function l(c,u,d,p){return function(f){f.delegateTarget=i(f.target,u),f.delegateTarget&&p.call(c,f)}}n.exports=a},function(n,r){var o=9;if(typeof Element<"u"&&!Element.prototype.matches){var i=Element.prototype;i.matches=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector}function s(a,l){for(;a&&a.nodeType!==o;){if(typeof a.matches=="function"&&a.matches(l))return a;a=a.parentNode}}n.exports=s},function(n,r,o){o.r(r);var i=o(0),s=o.n(i),a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},l=function(){function C(E,T){for(var B=0;B<T.length;B++){var D=T[B];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(E,D.key,D)}}return function(E,T,B){return T&&C(E.prototype,T),B&&C(E,B),E}}();function c(C,E){if(!(C instanceof E))throw new TypeError("Cannot call a class as a function")}var u=function(){function C(E){c(this,C),this.resolveOptions(E),this.initSelection()}return l(C,[{key:"resolveOptions",value:function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=E.action,this.container=E.container,this.emitter=E.emitter,this.target=E.target,this.text=E.text,this.trigger=E.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var E=this,T=document.documentElement.getAttribute("dir")=="rtl";this.removeFake(),this.fakeHandlerCallback=function(){return E.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[T?"right":"left"]="-9999px";var B=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=B+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=s()(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=s()(this.target),this.copyText()}},{key:"copyText",value:function(){var E=void 0;try{E=document.execCommand(this.action)}catch{E=!1}this.handleResult(E)}},{key:"handleResult",value:function(E){this.emitter.emit(E?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),document.activeElement.blur(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"copy";if(this._action=E,this._action!=="copy"&&this._action!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(E){if(E!==void 0)if(E&&(typeof E>"u"?"undefined":a(E))==="object"&&E.nodeType===1){if(this.action==="copy"&&E.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(this.action==="cut"&&(E.hasAttribute("readonly")||E.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`);this._target=E}else throw new Error('Invalid "target" value, use a valid Element')},get:function(){return this._target}}]),C}(),d=u,p=o(1),f=o.n(p),m=o(2),b=o.n(m),k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},A=function(){function C(E,T){for(var B=0;B<T.length;B++){var D=T[B];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(E,D.key,D)}}return function(E,T,B){return T&&C(E.prototype,T),B&&C(E,B),E}}();function S(C,E){if(!(C instanceof E))throw new TypeError("Cannot call a class as a function")}function O(C,E){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:C}function h(C,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);C.prototype=Object.create(E&&E.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(C,E):C.__proto__=E)}var R=function(C){h(E,C);function E(T,B){S(this,E);var D=O(this,(E.__proto__||Object.getPrototypeOf(E)).call(this));return D.resolveOptions(B),D.listenClick(T),D}return A(E,[{key:"resolveOptions",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof T.action=="function"?T.action:this.defaultAction,this.target=typeof T.target=="function"?T.target:this.defaultTarget,this.text=typeof T.text=="function"?T.text:this.defaultText,this.container=k(T.container)==="object"?T.container:document.body}},{key:"listenClick",value:function(T){var B=this;this.listener=b()(T,"click",function(D){return B.onClick(D)})}},{key:"onClick",value:function(T){var B=T.delegateTarget||T.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new d({action:this.action(B),target:this.target(B),text:this.text(B),container:this.container,trigger:B,emitter:this})}},{key:"defaultAction",value:function(T){return x("action",T)}},{key:"defaultTarget",value:function(T){var B=x("target",T);if(B)return document.querySelector(B)}},{key:"defaultText",value:function(T){return x("text",T)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],B=typeof T=="string"?[T]:T,D=!!document.queryCommandSupported;return B.forEach(function(V){D=D&&!!document.queryCommandSupported(V)}),D}}]),E}(f.a);function x(C,E){var T="data-clipboard-"+C;if(E.hasAttribute(T))return E.getAttribute(T)}r.default=R}]).default})}),mm=pm(gm);const bm=(e,t="copy")=>new Promise((n,r)=>{const o=document.createElement("button"),i=new mm(o,{text:()=>e,action:()=>t});i.on("success",s=>{i.destroy(),n(s)}),i.on("error",s=>{i.destroy(),r(s)}),document.body.appendChild(o),o.click(),document.body.removeChild(o)}),ym={class:"lang tt-text-muted"},vm=$e({__name:"Component",props:Io,setup(e){const t=e,{node:n}=To(t),r=o=>{const i=o.target,s=n.value.textContent;bm(s).then(()=>{i.classList.add("copied"),setTimeout(()=>{i.classList.remove("copied")},2e3)})};return(o,i)=>(se(),xt(F(Ho),{class:"tiptap-codeblock",onClick:i[1]||(i[1]=()=>{})},{default:De(()=>[K("span",ym,gt(F(n).attrs.language),1),K("button",{class:"copy",onClick:i[0]||(i[0]=bl(s=>r(s),["stop"]))}),K("pre",null,[tt(F(Dl),{as:"code",class:Ce(`language-${F(n).attrs.language}`)},null,8,["class"])])]),_:1}))}}),di=(e,t)=>{const n=e.__vccOpts||e;for(const[r,o]of t)n[r]=o;return n},wm=di(vm,[["__scopeId","data-v-07a7ae2f"]]);Jt.registerLanguage("html",og);Jt.registerLanguage("scss",Zh);Jt.registerLanguage("js",tg);Jt.registerLanguage("ts",rg);Jt.registerLanguage("python",ig);Jt.registerLanguage("shell",sg);const xm=jd.extend({draggable:!0,addKeyboardShortcuts(){var e;return{...(e=this.parent)==null?void 0:e.call(this),Tab:({editor:t})=>{const{state:n}=t,{selection:r}=n,{$from:o,empty:i}=r;return!i||o.parent.type!==this.type?!1:t.commands.insertContent("  ")}}},addNodeView(){return No(wm)}}).configure({defaultLanguage:"plaintext",lowlight:Jt}),km=$p.extend({}).configure({resizable:!0,allowTableNodeSelection:!0}),Em=["src","title","alt"],Am=["contenteditable"],_m=$e({__name:"Component",props:Io,setup(e){const t=e,{node:n,editor:r,extension:o}=To(t),i=nt(()=>{const{textAlign:h,float:R}=n.value.attrs;let x="10px 0";return R==="left"&&(x="10px 20px 10px 0"),R==="right"&&(x="10px 0 10px 20px"),R==="none"?{textAlign:h}:{textAlign:h==="left"?void 0:h,float:R,margin:x}}),s=nt(()=>{const h=n.value.attrs.width;return isNaN(h)?h:h+"px"}),a=nt(()=>{const h=n.value.attrs.height;return isNaN(h)?h:h+"px"}),l=nt(()=>{const{onParseSrc:h=null}=o.value.options;return h?h(n.value.attrs.src):n.value.attrs.src}),c=st(!1),u=st(),d=document.querySelector(".ProseMirror"),p=Cs({x:0,y:0,starWidth:0,starHeight:0,width:0,height:0,ratio:0,type:"",minSize:50}),f=h=>{c.value=!0;const R=h.target.getAttribute("data-type");p.x=h.clientX,p.y=h.clientY;const{width:x,height:C}=u.value.getBoundingClientRect();p.starWidth=x,p.starHeight=C,p.width=x,p.height=C,p.ratio=x/C,p.type=R,document.addEventListener("mousemove",m),document.addEventListener("mouseup",b)},m=h=>{if(!c.value)return;const{minSize:R,starWidth:x}=p,C=h.clientX-p.x;let E=0;p.type==="topLeft"?(document.body.style.cursor="nwse-resize",E=x-C):p.type==="topRight"?(document.body.style.cursor="nesw-resize",E=x+C):p.type==="bottomLeft"?(document.body.style.cursor="nesw-resize",E=x-C):p.type==="bottomRight"&&(document.body.style.cursor="nwse-resize",E=x+C),p.width=Math.max(Math.min(E,d.clientWidth),R),p.height=Math.floor(p.width/p.ratio)},b=()=>{c.value=!1,document.body.style.cursor="unset",document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",b),t.updateAttributes({width:p.width===d.clientWidth?"100%":p.width,height:p.width===d.clientWidth?"auto":p.height})},k=nt(()=>n.value.attrs.isEditAlt),A=h=>{const R=h.target,x=R.innerText;t.updateAttributes({alt:x,isEditAlt:!1}),Rs(()=>{R.innerText=n.value.attrs.alt})},S=h=>{h.target.blur()},O={updated(h){if(k.value){h.focus();const R=document.createRange();R.selectNodeContents(h),R.collapse(!1);const x=window.getSelection();x==null||x.removeAllRanges(),x==null||x.addRange(R)}}};return(h,R)=>(se(),xt(F(Ho),{class:"tiptap-image",style:Fe(F(i))},{default:De(()=>[K("figure",{class:"tiptap-image-figure relative inline-block max-w-full m-0",style:Fe({width:F(s),height:F(a)})},[F(r).isEditable?(se(),be("div",{key:0,class:Ce(["absolute drop-dots left-0 right-0 top-0 bottom-0",{draggingBox:c.value}]),style:Fe({width:c.value?p.width+"px":F(s),height:c.value?p.height+"px":F(a)})},[K("span",{class:"drag-trigger absolute -left-3px -top-3px cursor-nwse-resize",onMousedown:f,"data-type":"topLeft"},null,32),K("span",{class:"drag-trigger absolute -right-3px -top-3px cursor-nesw-resize",onMousedown:f,"data-type":"topRight"},null,32),K("span",{class:"drag-trigger absolute -left-3px -bottom-3px cursor-nesw-resize select-none",onMousedown:f,"data-type":"bottomLeft"},null,32),K("span",{class:"drag-trigger absolute -right-3px -bottom-3px cursor-nwse-resize select-none",onMousedown:f,"data-type":"bottomRight"},null,32),Rn(K("span",{class:"flex-center h-full text-12px text-gray-800"},gt(p.width)+"x"+gt(p.height),513),[[gr,c.value]])],6)):cn("",!0),K("img",{ref_key:"imgRef",ref:u,decoding:"async",src:F(l),title:F(n).attrs.alt,alt:F(n).attrs.alt,style:Fe({width:F(s),height:F(a)})},null,12,Em),Rn((se(),be("figcaption",{contenteditable:F(r).isEditable,ref:"figcaptionRef",spellcheck:"false",placeholder:"请输入描述",class:"block outline-none tt-text-muted text-center text-12px mt-2 read-write-plaintext-only",onBlur:R[0]||(R[0]=x=>A(x)),onKeydown:R[1]||(R[1]=Ts(x=>S(x),["enter"]))},[et(gt(F(n).attrs.alt),1)],40,Am)),[[gr,F(n).attrs.alt||F(k)],[O]])],4)]),_:1},8,["style"]))}}),Sm=e=>new Ne({props:{handleDOMEvents:{paste(t,n){var r,o;const{schema:i}=t.state;let s=(r=n.clipboardData)==null?void 0:r.getData("Text");return s?(s=s.trim(),(s.startsWith("http")&&/\.(png|jpg|jpeg|gif|bmp|svg|webp|JPG|PNG)$/.test(s)||s.startsWith("<svg")&&s.endsWith("</svg>"))&&e&&e(s).then(a=>{const l=i.nodes.image.create(a),c=t.state.selection.from,u=t.state.tr.replaceRangeWith(c-s.length,c,l);t.dispatch(u)})):Array.from(((o=n.clipboardData)==null?void 0:o.items)||[]).forEach(a=>{const l=a.getAsFile();if(a.type.indexOf("image")===0)if(n.preventDefault(),l&&e)e(l).then(c=>{const u=i.nodes.image.create(c),d=t.state.tr.replaceSelectionWith(u);t.dispatch(d)});else{const c=new FileReader;if(c.onload=u=>{var d;const p=i.nodes.image.create({src:(d=u.target)==null?void 0:d.result}),f=t.state.tr.replaceSelectionWith(p);t.dispatch(f)},!l)return;c.readAsDataURL(l)}}),!1},drop:(t,n)=>{var r,o,i;const s=n;if(!((o=(r=s.dataTransfer)==null?void 0:r.files)!=null&&o.length))return!1;const a=Array.from(((i=s.dataTransfer)==null?void 0:i.files)??[]).filter(u=>/image/i.test(u.type));if(a.length===0)return!1;s.preventDefault();const{schema:l}=t.state,c=t.posAtCoords({left:s.clientX,top:s.clientY});return c?(a.forEach(async u=>{const d=new FileReader;if(e){const p=await e(u),f=l.nodes.image.create(p),m=t.state.tr.insert(c.pos,f);t.dispatch(m)}else d.onload=p=>{var f;const m=l.nodes.image.create({src:(f=p.target)==null?void 0:f.result}),b=t.state.tr.insert(c.pos,m);t.dispatch(b)},d.readAsDataURL(u)}),!0):!1}}}}),Mm=/!\[(.+|:?)\]\((\S+)(?:(?:\s+)["'](\S+)["'])?\)/g,Cm=Kp.extend({draggable:!0,addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),onCommandUpload:void 0,onUpload:void 0,onDelete:void 0,onParseSrc:void 0}},addAttributes(){var e;return{...(e=this.parent)==null?void 0:e.call(this),width:{default:"100%"},height:{default:"auto"},isEditAlt:{default:!1,renderHTML:t=>{}},float:{default:"none",parseHTML:t=>t.style.float,renderHTML:t=>t.float==="none"||!t.float?{}:{style:`float:${t.float}`}}}},addPasteRules(){var e;return[...((e=this.parent)==null?void 0:e.call(this))||[],Rl({find:Mm,type:this.type,getAttributes:t=>{const[,n,r,o]=t;return{src:r,alt:n,title:o}}})]},addCommands(){var e;return{...(e=this.parent)==null?void 0:e.call(this),selectUploadImg:()=>({commands:t})=>(this.options.onCommandUpload&&this.options.onCommandUpload().then(n=>n?this.editor.commands.insertContent({type:this.name,attrs:n}):!1).catch(n=>!1),!1),deleteImage:()=>({commands:t})=>{if(this.options.onDelete){const n=this.editor.getAttributes("image");this.options.onDelete(n)}return t.deleteSelection()}}},addNodeView(){return No(_m)},addProseMirrorPlugins(){return[Sm(this.options.onUpload)]}}).configure({inline:!1,allowBase64:!0}),Tm=(e,t)=>{const n=[e.getJSON()],r=[];for(;n.length;){const o=n.shift();(o==null?void 0:o.type)===t&&r.push(o),o!=null&&o.content&&o.content.length&&n.push(...o.content)}return r},Om=K("i",{class:"icon-tiptap icon-tiptap-list-ul text-12px"},null,-1),Rm=K("span",null,"目录",-1),Nm=["onClick"],Lm=K("i",{class:"tt-bg-primary w-1 h-10px block rounded-full ml-2"},null,-1),Im=[Lm],Hm=$e({__name:"Component",props:Io,setup(e){const t=e,{editor:n,node:r}=To(t),o=st([]),i=()=>{const S=[],O=n.value.state.tr;n.value.state.doc.descendants((h,R)=>{if(h.type.name==="heading"&&h.attrs.level>1&&h.attrs.level<5){const x=`heading-${S.length+2}`,C=S.length+2;h.attrs.id!==x&&O.setNodeMarkup(R,void 0,{...h.attrs,id:x,class:"scroll-heading"}),S.push({level:h.attrs.level,text:h.textContent,id:x,numId:C})}}),O.setMeta("addToHistory",!1),O.setMeta("preventUpdate",!0),n.value.view.dispatch(O),o.value=S},s=st(0),a=34,l=nt(()=>s.value*a),c=(S,O)=>{const h=document.getElementById(S);s.value=O,h&&_o(h,{behavior:"smooth",block:"start"})},u=()=>{if(r.value.attrs.class==="is-show"){t.updateAttributes({class:"is-hide"});return}t.updateAttributes({class:"is-show"})},d=()=>{t.deleteNode()};var p=null;const f=S=>{let O=document.querySelectorAll(".scroll-heading"),h=O.length-1;p&&clearTimeout(p),p=setTimeout(()=>{for(let R=0;R<=h;R++){if(S.target.scrollTop<=O[R].offsetTop){s.value=R-1;break}if(S.target.scrollTop>=O[h].offsetTop){s.value=h;break}}},600)};Os(()=>{n.value.on("update",i),Rs(()=>{i()}),b()}),ml(()=>{n.value.off("update",i),k()});const m=document.querySelector(".note-modal"),b=()=>{m&&m.addEventListener("scroll",f,!0)},k=()=>{m&&m.removeEventListener("scroll",f,!0)},A=st();return io(s,S=>{if(!A.value||Number.isNaN(S))return;const O=A.value.children[S];O&&_o(O,{behavior:"smooth",scrollMode:"if-needed"})}),(S,O)=>(se(),xt(F(Ho),{class:Ce(["tiptap-toc tiptap-popper tiptap-popper-sm",F(r).attrs.class])},{default:De(()=>[K("div",{class:"tiptap-toc__title tt-text-muted flex-y-center"},[Om,Rm,K("div",{class:"ml-auto btns"},[K("i",{class:"tiptap-bubble-menu-btn icon-tiptap icon-tiptap-fixed text-14px!",onClick:u}),K("i",{class:"tiptap-bubble-menu-btn icon-tiptap icon-tiptap-delete text-14px!",onClick:d})])]),K("ul",{class:"tiptap-toc__list relative m-0 p-0",ref_key:"tocListRef",ref:A,onMouseenter:k,onMouseleave:b},[(se(!0),be(dn,null,un(o.value,(h,R)=>(se(),be("li",{class:Ce(["tiptap-toc__item",`tiptap-toc__item--${h.level}`]),key:R},[K("span",{onClick:x=>c(h.id,R)},gt(h.text),9,Nm)],2))),128)),Rn(K("li",{class:"tiptap-toc__item is-active",style:Fe({top:F(l)+"px"})},Im,4),[[gr,F(l)>=0]])],544)]),_:1},8,["class"]))}}),Bm=me.create({name:"tableOfContents",group:"block",atom:!0,draggable:!1,addOptions(){return{onHasExists:()=>{}}},addAttributes(){return{class:{default:""}}},parseHTML(){return[{tag:"toc"}]},renderHTML({HTMLAttributes:e}){return["toc",oe(e)]},addNodeView(){return No(Hm)},addCommands(){return{setTableOfContents:()=>({commands:e,editor:t,view:n})=>{const r=Tm(t,this.name);return r!=null&&r.length?(this.options.onHasExists(),!1):t.chain().focus().command(({tr:o})=>{e.insertContentAt(0,{type:this.name});const i=4,s=n.state.doc.content.size;return e.insertContentAt(s-i," "),!0}).run()}}},addGlobalAttributes(){return[{types:["heading"],attributes:{id:{default:null},class:{default:null}}}]}}),nl=at.create({name:"defaultKit",addExtensions(){var e,t,n,r,o,i,s,a,l,c,u,d,p,f,m,b,k,A,S,O,h,R,x,C,E,T,B,D,V,U,Z,ee,g,w;const y=[];return this.options.document!==!1&&y.push(Pl.configure((e=this.options)==null?void 0:e.document)),this.options.text!==!1&&y.push(jl.configure((t=this.options)==null?void 0:t.text)),this.options.paragraph!==!1&&y.push($l.configure((n=this.options)==null?void 0:n.paragraph)),this.options.bold!==!1&&y.push(Kl.configure((r=this.options)==null?void 0:r.bold)),this.options.code!==!1&&y.push(ql.configure((o=this.options)==null?void 0:o.code)),this.options.italic!==!1&&y.push(Yl.configure((i=this.options)==null?void 0:i.italic)),this.options.strike!==!1&&y.push(qp.configure((s=this.options)==null?void 0:s.strike)),this.options.underline!==!1&&y.push(rc.configure((a=this.options)==null?void 0:a.underline)),this.options.link!==!1&&y.push(_c.configure((l=this.options)==null?void 0:l.link)),this.options.highlight!==!1&&y.push(Xp.configure((c=this.options)==null?void 0:c.highlight)),this.options.color!==!1&&y.push(Oc.configure((u=this.options)==null?void 0:u.color)),this.options.superscript!==!1&&y.push(Rc.configure((d=this.options)==null?void 0:d.superscript)),this.options.subscript!==!1&&y.push(Nc.configure((p=this.options)==null?void 0:p.subscript)),this.options.placeholder!==!1&&y.push(Zp.configure((f=this.options)==null?void 0:f.placeholder)),this.options.dropcursor!==!1&&y.push(Bc.configure((m=this.options)==null?void 0:m.dropcursor)),this.options.gapcursor!==!1&&y.push(Fc),this.options.history!==!1&&y.push(Yc.configure((b=this.options)==null?void 0:b.history)),this.options.hardBreak!==!1&&y.push(eu.configure((k=this.options)==null?void 0:k.hardBreak)),this.options.typography!==!1&&y.push(Eu.configure((A=this.options)==null?void 0:A.typography)),this.options.textAlign!==!1&&y.push(Jp.configure((S=this.options)==null?void 0:S.textAlign)),this.options.textStyle!==!1&&y.push(Tc.configure((O=this.options)==null?void 0:O.textStyle)),this.options.focus!==!1&&y.push(_u.configure((h=this.options)==null?void 0:h.focus)),this.options.slashMenu!==!1&&y.push(zh,Uh),this.options.trailingNode!==!1&&y.push(Wh.configure((R=this.options)==null?void 0:R.trailingNode)),this.options.heading!==!1&&y.push(Su.configure((x=this.options)==null?void 0:x.heading)),this.options.blockquote!==!1&&y.push(Cu.configure((C=this.options)==null?void 0:C.blockquote)),this.options.bulletList!==!1&&y.push(Ou.configure((E=this.options)==null?void 0:E.bulletList)),this.options.orderedList!==!1&&y.push(Nu.configure((T=this.options)==null?void 0:T.orderedList)),this.options.horizontalRule!==!1&&y.push(Lu.configure((B=this.options)==null?void 0:B.horizontalRule)),this.options.listItem!==!1&&y.push(Iu.configure((D=this.options)==null?void 0:D.listItem)),this.options.taskItem!==!1&&y.push(Bu.configure((V=this.options)==null?void 0:V.taskItem)),this.options.taskList!==!1&&y.push(Du.configure((U=this.options)==null?void 0:U.taskList)),this.options.codeBlock!==!1&&y.push(xm.configure((Z=this.options)==null?void 0:Z.codeBlock)),this.options.table!==!1&&y.push(km.configure((ee=this.options)==null?void 0:ee.table)),this.options.tableCell!==!1&&y.push(zp),this.options.tableHeader!==!1&&y.push(Up),this.options.tableRow!==!1&&y.push(Wp),this.options.image!==!1&&y.push(Cm.configure((g=this.options)==null?void 0:g.image)),this.options.tableOfContents!==!1&&y.push(Bm.configure((w=this.options)==null?void 0:w.tableOfContents)),y}}),Mo=$e({__name:"TtDivider",props:{type:{default:"solid"},position:{default:"center"},direction:{default:"vertical"}},setup(e){return(t,n)=>(se(),be("div",{class:Ce(["tt-divider",`tt-divider--${e.direction}`]),role:"separator",style:Fe({"--tt-divider-border-style":e.type})},[t.$slots.default&&e.direction!=="vertical"?(se(),be("div",{key:0,class:Ce(`tt-divider--text is-${e.position}`)},[Co(t.$slots,"default")],2)):cn("",!0)],6))}}),Dm=["id"],Pm=$e({__name:"ToolTip",props:{content:{default:""},type:null},setup(e){const t=e;return Os(()=>{if(t.type){const n=document.getElementById(t.type);Bt(n,{content:t.content,theme:"tooltip",moveTransition:"transform 0.2s ease-out",allowHTML:!0,placement:"top",arrow:oh,role:"tooltip"})}}),(n,r)=>(se(),be("div",{class:"tiptap-tooltip",id:e.type},[Co(n.$slots,"default")],8,Dm))}}),jm={key:0,class:"is-arrow icon-tiptap icon-tiptap-arrow-down-bold pointer-events-none text-12px!"},$m=$e({__name:"BubbleMenuBtn",props:{btn:null,editor:null},setup(e){const t=e,n=nt(()=>{const i=t.btn;return i.isActive?i.isActive(t.editor):!1}),r=t.btn,o=nt(()=>r.sortKey?`${r.label}<span class='muted'>${r.sortKey}</span>`:r.label);return(i,s)=>e.btn.type.startsWith("divider-")?(se(),xt(Mo,{key:1})):(se(),xt(Pm,{key:0,content:F(o),type:`ToolTip__${F(r).type}`},{default:De(()=>[K("button",{class:Ce(["tiptap-bubble-menu-btn",{"is-active":F(n),"fw-600":F(r).icon==="icon-tiptap-bold"}]),style:Fe(F(r).style?F(r).style(e.editor):""),onClick:s[0]||(s[0]=a=>e.btn.action(e.editor,a))},[K("i",{class:Ce(["icon-tiptap pointer-events-none",F(r).icon]),style:Fe(F(r).iconStyle?F(r).iconStyle(e.editor):"")},null,6),F(r).hasArrow?(se(),be("i",jm)):cn("",!0)],6)]),_:1},8,["content","type"]))}}),zm=$e({__name:"BubbleMenuLoop",props:{editor:null,menu:null},setup(e){const t=e,n={appendTo:"parent",maxWidth:"100%",duration:300,moveTransition:"transform 0.2s ease-out",theme:"bubble",arrow:!1},r=({editor:i,view:s,state:a,oldState:l,from:c,to:u})=>{if(t.menu.name==="base"){const{doc:d,selection:p}=a,{empty:f}=p,m=!d.textBetween(c,u).length&&Bl(a.selection);return!(!s.hasFocus()||f||m||kn(a,"image")||kn(a,"table")||kn(a,"codeBlock")||kn(a,"tableOfContents"))}return kn(a,t.menu.name)?(t.menu.selector&&o(t.menu.selector),!0):!1},o=i=>{const s=document.querySelector(i);s&&(n.getReferenceClientRect=()=>s.getBoundingClientRect())};return(i,s)=>e.editor?(se(),xt(F(Hl),{key:0,editor:e.editor,updateDelay:0,"tippy-options":n,shouldShow:r},{default:De(()=>[(se(!0),be(dn,null,un(e.menu.list,a=>(se(),xt($m,{key:a.type,editor:e.editor,btn:a},null,8,["editor","btn"]))),128))]),_:1},8,["editor"])):cn("",!0)}}),rl=e=>(Ns("data-v-3a4ebf66"),e=e(),Ls(),e),Um={class:"w-300px"},Wm=["onKeyup"],Fm=rl(()=>K("i",{class:"icon-tiptap icon-tiptap-edit"},null,-1)),Km=[Fm],Vm=rl(()=>K("i",{class:"icon-tiptap icon-tiptap-delete"},null,-1)),Gm=[Vm],qm=$e({__name:"SetLink",props:{editor:null,popup:null},setup(e){const t=e,n=st(t.editor.getAttributes("link").href??null),r=()=>{if(t.popup.destroy(),n.value!==null){if(n.value===""){t.editor.chain().focus().extendMarkRange("link").unsetLink().run();return}t.editor.chain().focus().extendMarkRange("link").setLink({href:n.value}).run()}},o=()=>{t.popup.destroy(),t.editor.chain().focus().extendMarkRange("link").unsetLink().run()},i=a=>{a.currentTarget instanceof HTMLInputElement&&a.currentTarget.select()},s={mounted(a){a.focus()}};return(a,l)=>{var c;return se(),be("div",Um,[Rn(K("input",{class:"tiptap-bubble-menu-link-input",placeholder:"请输入链接",type:"text","onUpdate:modelValue":l[0]||(l[0]=u=>n.value=u),onClick:l[1]||(l[1]=u=>i(u)),onKeyup:Ts(r,["enter"])},null,40,Wm),[[yl,n.value],[s]]),K("button",{class:"tiptap-bubble-menu-btn ml-2",onClick:r},Km),Rn(K("button",{class:"tiptap-bubble-menu-btn",onClick:o},Gm,512),[[gr,(c=n.value)==null?void 0:c.length]])])}}}),Xm=di(qm,[["__scopeId","data-v-3a4ebf66"]]),ol=e=>(Ns("data-v-e4dd50a7"),e=e(),Ls(),e),Zm={class:"box"},Jm={class:"toolbar-colors grid grid-cols-6 -mx-2"},Qm=ol(()=>K("span",{class:"flex-center text-10px w-24px h-24px rounded-4px"},"默认",-1)),Ym=[Qm],eb=["onMouseover"],tb={class:"toolbar-colors grid grid-cols-6 -mx-2"},nb=ol(()=>K("span",{class:"flex-center text-10px w-24px h-24px rounded-4px"},"默认",-1)),rb=[nb],ob=["onMouseover"],ib=$e({__name:"SetColor",props:{popup:null,editor:null},setup(e){const t=e,n=t.editor.getAttributes("textStyle").color,r=t.editor.getAttributes("highlight").color,o=st({text:n||"var(--tt-prose-text-base)",bg:r||"transparent"}),i=["rgb(153, 153, 153)","rgb(204, 204, 204)","rgb(198, 120, 221)","rgb(235, 119, 149)","rgb(244, 67, 54)","rgb(156, 39, 176)","rgb(103, 58, 183)","rgb(63, 81, 181)","rgb(33, 150, 243)","rgb(0, 188, 212)","rgb(0, 150, 136)","rgb(76, 175, 80)","rgb(139, 195, 74)","rgb(255, 193, 7)","rgb(255, 152, 0)","rgb(121, 85, 72)"],s=[{bg:"var(--tt-prose-info-light)"},{bg:"var(--tt-prose-primary-light)"},{bg:"var(--tt-prose-success-light)"},{bg:"var(--tt-prose-warning-light)"},{bg:"var(--tt-prose-danger-light)"}],a=()=>{t.editor.chain().focus().setColor(o.value.text).run(),t.popup.hide()},l=()=>{t.editor.chain().focus().unsetColor().run(),t.popup.hide()},c=m=>{m?(o.value.text=m,o.value.bg="transparent"):(o.value.text="var(--tt-prose-text-base)",o.value.bg="transparent")},u=()=>{t.editor.chain().focus().toggleHighlight({color:o.value.bg}).run(),t.popup.hide()},d=()=>{t.editor.chain().focus().unsetHighlight().run(),t.popup.hide()},p=m=>{m?(o.value.bg=m,o.value.text="var(--tt-prose-text-base)"):(o.value.bg="transparent",o.value.text="var(--tt-prose-text-base)")},f=st(null);return(m,b)=>(se(),be("div",{class:"p-4 w-240px flex-col",ref_key:"colorPopperRef",ref:f},[K("div",{class:"text-center py-1 rounded-6px w-full",style:Fe({color:o.value.text,backgroundColor:o.value.bg})},"用心去坚持你的理想！",4),K("div",Zm,[tt(Mo,{direction:"horizontal"},{default:De(()=>[et("文字颜色")]),_:1}),K("div",Jm,[K("button",{class:"color-item flex-center rounded-10px hover:bg-gray-100 dark:hover:bg-dark-100",onClick:l,onMouseover:b[0]||(b[0]=k=>c(null))},Ym,32),(se(),be(dn,null,un(i,(k,A)=>K("button",{class:Ce(["color-item flex-center rounded-10px hover:bg-gray-100 dark:hover:bg-dark-100",{"is-active":e.editor.isActive("textStyle",{color:k}),"bg-gray-100 dark:bg-dark-100":o.value.text==k}]),key:A,onMouseover:S=>c(k),onClick:a},[K("span",{class:"flex-center fw-600 w-24px h-24px rounded-4px bg-white dark:bg-#2e3033",style:Fe({color:k})},"A",4)],42,eb)),64))]),tt(Mo,{direction:"horizontal"},{default:De(()=>[et("背景颜色")]),_:1}),K("div",tb,[K("button",{class:"color-item flex-center rounded-10px hover:bg-gray-100 dark:hover:bg-dark-100",onClick:d,onMouseover:b[1]||(b[1]=k=>p(null))},rb,32),(se(),be(dn,null,un(s,(k,A)=>K("button",{class:Ce(["color-item flex-center rounded-10px hover:bg-gray-100 dark:hover:bg-dark-100",{"is-active":e.editor.isActive("highlight",{color:k.bg}),"bg-gray-100 dark:bg-dark-100":o.value.bg==k.bg}]),key:A,onMouseover:S=>p(k.bg),onClick:u},[K("span",{class:"flex-center fw-600 w-24px h-24px rounded-4px",style:Fe({backgroundColor:k.bg})},null,4)],42,ob)),64))])])],512))}}),sb=di(ib,[["__scopeId","data-v-e4dd50a7"]]),ab=[{type:"base-bold",icon:"icon-tiptap-bold",label:"粗体",sortKey:"⌘+B",action:e=>e.chain().focus().toggleBold().run(),isActive:e=>e.isActive("bold")},{type:"base-italics",icon:"icon-tiptap-italics",label:"斜体",sortKey:"⌘+I",action:e=>e.chain().focus().toggleItalic().run(),isActive:e=>e.isActive("italic")},{type:"base-underline",icon:"icon-tiptap-underline",label:"下划线",sortKey:"⌘+U",action:e=>e.chain().focus().toggleUnderline().run(),isActive:e=>e.isActive("underline")},{type:"base-strike",icon:"icon-tiptap-strike",label:"删除线",sortKey:"⌘+⇧+X",action:e=>e.chain().focus().toggleStrike().run(),isActive:e=>e.isActive("strike")},{type:"base-code",icon:"icon-tiptap-code",label:"内联代码",sortKey:"⌘+E",action:e=>e.chain().focus().toggleCode().run(),isActive:e=>e.isActive("code")},{type:"divider-base-0"},{type:"base-text-align-left",icon:"icon-tiptap-text-align-left",label:"居左",sortKey:"⌘+Shift+L",action:e=>e.chain().focus().setTextAlign("left").run(),isActive:e=>e.isActive({textAlign:"left"})},{type:"base-text-align-center",icon:"icon-tiptap-text-align-center",label:"居中",sortKey:"⌘+Shift+E",action:e=>e.chain().focus().setTextAlign("center").run(),isActive:e=>e.isActive({textAlign:"center"})},{type:"base-text-align-right",icon:"icon-tiptap-text-align-right",label:"居右",sortKey:"⌘+Shift+R",action:e=>e.chain().focus().setTextAlign("right").run(),isActive:e=>e.isActive({textAlign:"right"})},{type:"divider-base-1"},{type:"base-superscript",icon:"icon-tiptap-superscript",label:"上标",sortKey:"⌘+.",action:e=>e.chain().focus().toggleSuperscript().run(),isActive:e=>e.isActive("superscript")},{type:"base-subscript",icon:"icon-tiptap-subscript",label:"下标",sortKey:"⌘+,",action:e=>e.chain().focus().toggleSubscript().run(),isActive:e=>e.isActive("subscript")},{type:"base-link",icon:"icon-tiptap-link",label:"链接",sortKey:"设置链接",trigger:"link",action:(e,t)=>lb(e,t),isActive:e=>e.isActive("link")},{type:"divider-base-2"},{type:"base-text-bg-color",icon:"icon-tiptap-a",label:"颜色",sortKey:"文字色 | 背景色",trigger:"color",hasArrow:!0,style:e=>({backgroundColor:e.getAttributes("highlight").color}),iconStyle:e=>({color:e.getAttributes("textStyle").color}),action:(e,t)=>cb(e,t),isActive:()=>!1}],lb=(e,t)=>{const n=t.target,r=document.querySelector(".prose--popup-point"),o=r||document.body,i=Bt(n,{appendTo:o,showOnCreate:!0,interactive:!0,interactiveBorder:2,offset:[0,4],theme:"bubble",arrow:!1,trigger:"manual",placement:"bottom"}),s=new Lo(Xm,{props:{popup:i,editor:e},editor:e});i.setProps({content:s.element})},cb=(e,t)=>{const n=t.target,r=document.querySelector(".prose--popup-point"),o=r||document.body,i=Bt(n,{appendTo:o,showOnCreate:!0,interactive:!0,interactiveBorder:2,offset:[0,4],trigger:"manual",theme:"bubble",arrow:!1,placement:"right"}),s=new Lo(sb,{props:{popup:i,editor:e},editor:e});i.setProps({content:s.element})},ub=[{type:"image-align-left",icon:"icon-tiptap-text-align-left",label:"居左",sortKey:"⌘+Shift+L",action:e=>e.chain().focus().updateAttributes("image",{textAlign:"left"}).run(),isActive:e=>e.isActive({textAlign:"left"})},{type:"image-align-center",icon:"icon-tiptap-text-align-center",label:"居中",sortKey:"⌘+Shift+E",action:e=>e.chain().focus().updateAttributes("image",{textAlign:"center"}).run(),isActive:e=>e.isActive({textAlign:"center"})},{type:"image-align-right",icon:"icon-tiptap-text-align-right",label:"居右",sortKey:"⌘+Shift+R",action:e=>e.chain().focus().updateAttributes("image",{textAlign:"right"}).run(),isActive:e=>e.isActive({textAlign:"right"})},{type:"divider-image-0"},{type:"image-float-left",icon:"icon-tiptap-float-left",label:"左浮动",action:e=>e.chain().focus().updateAttributes("image",{float:"left"}).run(),isActive:e=>e.isActive({float:"left"})},{type:"image-float-right",icon:"icon-tiptap-float-right",label:"右浮动",action:e=>e.chain().focus().updateAttributes("image",{float:"right"}).run(),isActive:e=>e.isActive({float:"right"})},{type:"image-float-none",icon:"icon-tiptap-switch",label:"清除浮动",action:e=>e.chain().focus().updateAttributes("image",{float:"none"}).run()},{type:"divider-image-1"},{type:"image-edit-alt",icon:"icon-tiptap-edit",label:"编辑描述",action:e=>e.chain().updateAttributes("image",{isEditAlt:!0}).run(),isActive:e=>e.isActive({isEditAlt:!0})},{type:"divider-image-2"},{type:"image-delete",icon:"icon-tiptap-delete",label:"删除图片",action:e=>e.chain().focus().deleteImage().run()}],Ye=e=>t=>t.chain().focus()[e]().run(),db=[{type:"table-add-col-before",icon:"icon-tiptap-add-col-before",label:"向前插入一列",action:Ye("addColumnBefore")},{type:"table-add-col-after",icon:"icon-tiptap-add-col-after",label:"向后插入一列",action:Ye("addColumnAfter")},{type:"table-delete-col",icon:"icon-tiptap-delete-col",label:"删除当前列",action:Ye("deleteColumn")},{type:"divider-table-0"},{type:"table-add-row-before",icon:"icon-tiptap-add-row-before",label:"向上插入一行",action:Ye("addRowBefore")},{type:"table-add-row-after",icon:"icon-tiptap-add-row-after",label:"向下插入一行",action:Ye("addRowAfter")},{type:"table-delete-row",icon:"icon-tiptap-delete-row",label:"删除当前行",action:Ye("deleteRow")},{type:"divider-table-1"},{type:"table-header-row",icon:"icon-tiptap-header-row",label:"添加/删除行表头",action:Ye("toggleHeaderRow")},{type:"table-header-col",icon:"icon-tiptap-header-col",label:"添加/删除列表头",action:Ye("toggleHeaderColumn")},{type:"divider-table-2"},{type:"table-merge-cell",icon:"icon-tiptap-merge-cell",label:"合并单元格",action:Ye("mergeCells")},{type:"table-split-cell",icon:"icon-tiptap-split-cell",label:"拆分单元格",action:Ye("splitCell")},{type:"table-remove",icon:"icon-tiptap-table-remove",label:"删除表格",action:Ye("deleteTable")}],pb=$e({__name:"BubbleMenus",props:{editor:null},setup(e){const t=Cs([{name:"base",list:ab},{name:"image",list:ub,selector:".tiptap-image.has-focus .tiptap-image-figure"},{name:"table",list:db,selector:".tableWrapper.has-focus"}]);return(n,r)=>(se(!0),be(dn,null,un(t,o=>(se(),xt(zm,{key:o.name,editor:e.editor,menu:o},null,8,["editor","menu"]))),128))}}),fb={name:"Tiptap"},hb=$e({...fb,props:{modelValue:{default:""},theme:{default:"prose-theme"},autofocus:{type:[Boolean,String,Number,null],default:!1},editable:{type:Boolean,default:!0},editorProps:null,parseOptions:null,extensions:{default:[nl]},output:{default:"html"},injectCSS:{type:Boolean,default:!0},contentClass:{default:"editor-content"},footerClass:{default:""}},emits:["update:modelValue","onBeforeCreate","onCreate","onTransaction","onDestroy","onUpdate","onFocus","onBlur","onSelectionUpdate"],setup(e,{expose:t,emit:n}){const r=e,o=Nl({content:r.modelValue,extensions:r.extensions,autofocus:r.autofocus,editable:r.editable,injectCSS:r.injectCSS,enableInputRules:!0,enablePasteRules:!0,editorProps:r.editorProps,parseOptions:r.parseOptions,onBeforeCreate(i){n("onBeforeCreate",i)},onCreate(i){n("onCreate",i)},onSelectionUpdate(i){n("onSelectionUpdate",i)},onTransaction:i=>{n("onTransaction",i)},onFocus:i=>{n("onFocus",i)},onBlur:i=>{n("onBlur",i)},onDestroy:()=>{n("onDestroy",!0)},onUpdate:i=>{const{editor:s}=i;let a;r.output==="html"?a=s.getHTML():r.output==="json"?a=s.getJSON():a=s.getText({blockSeparator:`

`}),n("update:modelValue",a),n("onUpdate",i)}});return t({editor:o}),(i,s)=>F(o)?(se(),be("div",{key:0,class:Ce(["prose--popup-point prose",e.theme?e.theme:"prose-theme"])},[tt(F(Ll),{class:Ce(["ProseMirrorWrapper",e.contentClass]),editor:F(o)},null,8,["class","editor"]),i.$slots.footer?(se(),be("div",{key:0,class:Ce(["editor-footer",e.footerClass])},[Co(i.$slots,"footer")],2)):cn("",!0),tt(pb,{editor:F(o)},null,8,["editor"])],2)):cn("",!0)}});const gb=(e,t)=>new Promise((n,r)=>{const o=new FileReader;o.onload=i=>{var a;const s=new Image;s.src=(a=i.target)==null?void 0:a.result,s.onload=()=>{const l=document.createElement("canvas"),c=l.getContext("2d"),u=s.width,d=s.height,p=u/d,f=u>t?t:u,m=Math.floor(f/p);l.width=f,l.height=m,c==null||c.drawImage(s,0,0,f,m);const b=e.type==="image/svg+xml"?s.src:l.toDataURL(e.type,.8),k=new Uint8Array(atob(b.split(",")[1]).split("").map(S=>S.charCodeAt(0))),A={base64:b,u8arr:k,width:f,height:m,type:e.type};n(A)},s.onerror=l=>{r(l)}},o.readAsDataURL(e)}),mb=(e,t)=>new Promise((n,r)=>{var o,i;if(e.startsWith("<svg")&&e.endsWith("</svg>")){const s="data:image/svg+xml;base64,"+btoa(e),a=new Uint8Array(atob(s.split(",")[1]).split("").map(d=>d.charCodeAt(0))),l=((o=e.match(/width="(\d+)"/))==null?void 0:o[1])||0,c=((i=e.match(/height="(\d+)"/))==null?void 0:i[1])||0,u={base64:s,u8arr:a,width:Number(l),height:Number(c),type:"image/svg+xml"};n(u);return}if(/\.(png|jpg|jpeg|gif|bmp|webp|svg)(\?.*)?$/.test(e)){const s=new Image;s.setAttribute("crossOrigin","anonymous"),s.src=e,s.onload=()=>{const a=document.createElement("canvas"),l=a.getContext("2d"),c=s.width,u=s.height,d=c/u,p=c>t?t:c,f=Math.floor(p/d);a.width=p,a.height=f,l==null||l.drawImage(s,0,0,p,f);const m=e.substring(e.lastIndexOf(".")+1).toLowerCase(),b=m==="svg"?"image/png":`image/${m}`,k=m==="svg"?a.toDataURL(b):a.toDataURL(b,.8),A=new Uint8Array(atob(k.split(",")[1]).split("").map(O=>O.charCodeAt(0)));n({base64:k,u8arr:A,width:p,height:f,type:b})}}else r("非(png/jpe?g/gif/svg等)图片地址")}),{currNote:ar,currWeb:jb}=Is(Ms()),il=async e=>new Promise(async(t,n)=>{let r;if(e instanceof File)try{r=await gb(e,740)}catch(d){n(d)}else try{r=await mb(e,740)}catch(d){n(d)}const{base64:o,u8arr:i,width:s,height:a,type:l}=r,c="pic_"+Date.now()+"@"+ar.value._id;utools.db.postAttachment(c,i,l),ar.value.picIds=ar.value.picIds?[...ar.value.picIds,c]:[c],t({src:c,width:s,height:a})}),bb=()=>new Promise(async(e,t)=>{const n=utools.showOpenDialog({filters:[{name:"Images",extensions:["jpg","png","gif","jpeg","webp","svg"]}],properties:["openFile"]});if(!n){t(!1);return}const r=n[0],o=r.split(".").pop(),i=o==="svg"?"image/svg+xml":`image/${o}`,s=await window.readFile(r),a=new File([s],`image.${o}`,{type:i}),l=await il(a);e(l)}),yb=(e,t)=>{if(!e)return;let n=32768,r=0,o=e.length,i="",s;for(;r<o;)s=e.subarray(r,Math.min(r+n,o)),i+=String.fromCharCode.apply(null,s),r+=n;return`data:${t};base64,${window.btoa(i)}`},vb={class:"flex-y-center"},wb={class:"text-muted text-13px ml-3"},xb=K("div",{class:"h-10px bg-white dark:bg-[#303133]"},null,-1),kb={class:"footer-content flex-y-center text-muted text-13px"},Eb=K("i",{class:"iconfont icon-help text-muted mr-1"},null,-1),Ab={class:"flex-y-center"},_b=K("kbd",{class:"kbd"},"/",-1),Sb=K("kbd",{class:"kbd"},"esc",-1),Mb=K("kbd",{class:"kbd"},"ctrl",-1),Cb=K("kbd",{class:"kbd"},"s",-1),$b=$e({__name:"NoteModal",setup(e){const{currNote:t,currWeb:n}=Is(Ms()),r=ll(),{openLink:o}=cl(),i=vl("showNoteModal"),s=st(!0),a=[nl.configure({image:{onUpload:A=>il(A),onCommandUpload:()=>bb(),onDelete:A=>{const{src:S}=A;S!=null&&S.startsWith("pic_")&&(utools.db.remove(S),t.value.picIds&&(t.value.picIds=t.value.picIds.filter(O=>O!==S)))},onParseSrc:A=>{if(!Array.isArray(A)&&A.startsWith("pic_")){const S=utools.db.getAttachment(A),O=utools.db.getAttachmentType(A);return yb(S,O)}return A}},link:{openOnClick:!0,HTMLAttributes:{onclick:"utools.shellOpenExternal(this.href)"}}})],l=nt(()=>n.value.icon.data?n.value.icon.data:ul(n.value.url)),c=nt(()=>n.value.icon.type=="image"?{backgroundColor:n.value.icon.imageColor}:{backgroundColor:n.value.icon.textColor,fontSize:`${n.value.icon.fontSize*.6}px`,fontWeight:500}),u=A=>{const S=document.querySelector('.el-overlay-dialog[aria-label="card-note-modal"]');S&&(S.style.bottom=A+"px")};let d;const p=async()=>{document.addEventListener("keydown",m),document.addEventListener("keydown",b),u(49),d=JSON.parse(JSON.stringify(t.value))},f=()=>{document.removeEventListener("keydown",m),document.removeEventListener("keydown",b),u(0),JSON.stringify(d)!==JSON.stringify(t.value)&&k()},m=A=>{(A.ctrlKey&&A.key==="s"&&!A.shiftKey||A.metaKey&&A.key==="s"&&!A.shiftKey)&&(A.preventDefault(),i.value=!1)},b=A=>{A.key==="Escape"&&(A.preventDefault(),A.stopPropagation())},k=()=>{var S;const A=utools.db.get(n.value._id);t.value.content===""||t.value.content==="<p></p>"?(n.value.hasNote=!1,A.hasNote=!1,(S=t.value.picIds)!=null&&S.length&&t.value.picIds.forEach(O=>{utools.db.remove(O)}),t.value._id&&utools.db.remove(t.value._id),setTimeout(()=>{r.changeMessage("笔记已删除！","success")},300)):(n.value.hasNote=!0,A.hasNote=!0,utools.db.promises.put(xl(t.value)).then(()=>{setTimeout(()=>{r.changeMessage("笔记保存成功！","success")},300)})),utools.db.put(A)};return(A,S)=>{const O=gl,h=dl,R=pl,x=hl,C=fl;return se(),xt(C,{modelValue:F(i),"onUpdate:modelValue":S[2]||(S[2]=E=>wl(i)?i.value=E:null),ref:"noteModalRef",class:"note-modal",title:"card-note-modal","close-on-click-modal":F(s),"close-on-press-escape":F(s),onOpened:p,onClosed:f,"align-center":"","show-close":"","destroy-on-close":"","append-to-body":"","lock-scroll":"",fullscreen:""},{header:De(()=>[K("div",vb,[K("div",{class:"el-dialog__title flex-y-center border border-[var(--el-border-color)] rounded-full shadow-sm py-4px pl-4px pr-4 cursor-pointer -ml-2",onClick:S[0]||(S[0]=E=>F(o)(F(n)))},[tt(O,{class:"shrink-0 mr-2",size:28,src:F(n).icon.type=="image"?F(l):"",style:Fe(F(c))},{default:De(()=>[et(gt(F(n).icon.text),1)]),_:1},8,["src","style"]),et(" "+gt(F(t).title),1)]),K("span",wb,gt(F(n).desc),1)])]),footer:De(()=>[xb,K("div",kb,[tt(R,{content:"暂未开放",placement:"top"},{default:De(()=>[tt(h,{text:"",class:"-ml-3 mr-auto",size:"small"},{default:De(()=>[Eb,et(" 帮助 ")]),_:1})]),_:1}),K("div",Ab,[tt(x,{direction:"vertical"}),_b,et(" 菜单命令 "),tt(x,{direction:"vertical"}),Sb,et(" 或 "),Mb,et("+"),Cb,et(" 保存 ")])])]),default:De(()=>[tt(F(hb),{modelValue:F(t).content,"onUpdate:modelValue":S[1]||(S[1]=E=>F(t).content=E),class:"text-15px",theme:"prose-element",extensions:a},null,8,["modelValue"])]),_:1},8,["modelValue","close-on-click-modal","close-on-press-escape"])}}});export{$b as default};
