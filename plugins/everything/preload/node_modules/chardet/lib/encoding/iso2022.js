"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ISO_2022_CN=exports.ISO_2022_KR=exports.ISO_2022_JP=void 0;const match_1=__importDefault(require("../match"));class ISO_2022{constructor(){this.escapeSequences=[]}name(){return"ISO_2022"}match(e){let t,s,r,n,u=0,_=0,c=0;const a=e.inputBytes,o=e.inputLen;e:for(t=0;t<o;t++){if(27==a[t]){t:for(r=0;r<this.escapeSequences.length;r++){const e=this.escapeSequences[r];if(!(o-t<e.length)){for(s=1;s<e.length;s++)if(e[s]!=a[t+s])continue t;u++,t+=e.length-1;continue e}}_++}14!=a[t]&&15!=a[t]||c++}return 0==u?null:(n=(100*u-100*_)/(u+_),u+c<5&&(n-=10*(5-(u+c))),n<=0?null:(0,match_1.default)(e,this,n))}}class ISO_2022_JP extends ISO_2022{constructor(){super(...arguments),this.escapeSequences=[[27,36,40,67],[27,36,40,68],[27,36,64],[27,36,65],[27,36,66],[27,38,64],[27,40,66],[27,40,72],[27,40,73],[27,40,74],[27,46,65],[27,46,70]]}name(){return"ISO-2022-JP"}language(){return"ja"}}exports.ISO_2022_JP=ISO_2022_JP;class ISO_2022_KR extends ISO_2022{constructor(){super(...arguments),this.escapeSequences=[[27,36,41,67]]}name(){return"ISO-2022-KR"}language(){return"kr"}}exports.ISO_2022_KR=ISO_2022_KR;class ISO_2022_CN extends ISO_2022{constructor(){super(...arguments),this.escapeSequences=[[27,36,41,65],[27,36,41,71],[27,36,42,72],[27,36,41,69],[27,36,43,73],[27,36,43,74],[27,36,43,75],[27,36,43,76],[27,36,43,77],[27,78],[27,79]]}name(){return"ISO-2022-CN"}language(){return"zh"}}exports.ISO_2022_CN=ISO_2022_CN;