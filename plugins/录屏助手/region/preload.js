const path=require("path"),fs=require("fs"),os=require("os");window.CONTEXT_ENV={isWindows:"win32"===process.platform,isMacOS:"darwin"===process.platform,isLinux:"linux"===process.platform,nativeId:window.ztools.getNativeId()},window.CONTEXT_ENV.isMacOS&&(window.CONTEXT_ENV.isMacOS13=parseInt(os.release().split(".")[0],10)>=22),window.services={pathJoin:(i,o)=>path.join(i,o),getDirReallyPath:i=>{let o=window.ztools.dbStorage.getItem(i+"/"+window.CONTEXT_ENV.nativeId);if(o||(o="videos"),/^(?:[c-z]:|\/)/i.test(o)){if(!fs.existsSync(o))throw new Error(`"${o}" 路径不存在`);return o}const e=window.ztools.getPath(o);if(!e)throw new Error(`"${o}" 路径不存在`);return e}};