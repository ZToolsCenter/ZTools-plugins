import{u as he,_ as $e,E as Ve,c as ol,l as al,a as $l,b as sl,d as Mt,i as $t,e as xl,f as He,g as Ae,h as Sl,j as Vt,k as ue,m as ut,n as rl,o as il,p as El,q as Nl,r as ul,s as cl,t as xt,v as Tl,w as Ml,x as dl,y as Je,z as Vl,A as Ot,B as _t,C as Al,D as Fl,F as Ye,G as Il,H as pl,I as Pl,J as Ll,K as fl,L as Ol,M as it,N as zl,O as Dl,P as Bl}from"./index-4d792b2f.js";import{E as Hl}from"./overlay-64b767d0.js";import{b as Ul,E as At,a as Wl,c as jl}from"./input-7f8edfb4.js";import{b as Rl,E as hl,i as qe,t as Kl,d as vl,a as zt,C as ml,c as ql,e as Gl,s as Xl,f as Jl,g as Yl,h as Zl}from"./switch-cea31d12.js";import{E as gl}from"./avatar-013be683.js";import{E as tt,i as Ql}from"./index-82cfccb5.js";import{r as M,d as Pe,w as le,f as oe,s as en,K as Fe,c as P,a5 as ge,h as g,i as H,l as te,S as K,a2 as Ge,U as v,W as p,m as I,X as se,k as _,b as lt,ab as ye,a9 as be,t as _e,I as Dt,N as tn,z as Ft,a as Ze,al as ln,p as Ce,am as nn,an as on,j as ce,u as o,n as ae,ao as St,ap as an,L as Et,v as we,O as Nt,x as Bt,C as yt,G as Ht,e as sn,Q as rn,P as Ut,a6 as un,ag as cn}from"./vue-5f6c84d3.js";import{c as Wt,E as dn,a as pn}from"./tab-pane-ff4cdcab.js";import{E as fn,a as hn,b as vn,c as mn}from"./radio-button-703f9cfa.js";import{a as gn,V as bn}from"./tools-8f8edc89.js";import{U as Ie,C as Qe,s as _n}from"./index-71ce9d2a.js";import"./validator-bd157353.js";const It=e=>{let t,n;return e.type==="touchend"?(n=e.changedTouches[0].clientY,t=e.changedTouches[0].clientX):e.type.startsWith("touch")?(n=e.touches[0].clientY,t=e.touches[0].clientX):(n=e.clientY,t=e.clientX),{clientX:t,clientY:n}};var yn=1,kn=4;function bl(e){return Ul(e,yn|kn)}var Cn=1/0;function wn(e){var t=e==null?0:e.length;return t?Rl(e,Cn):[]}const jt=e=>[...new Set(e)],Rt=e=>!e&&e!==0?[]:Array.isArray(e)?e:[e],$n=()=>Math.floor(Math.random()*1e4),xn=(e,t=0)=>{if(t===0)return e;const n=M(!1);let l=0;const a=()=>{l&&clearTimeout(l),l=window.setTimeout(()=>{n.value=e.value},t)};return Pe(a),le(()=>e.value,s=>{s?a():n.value=s}),n};var Sn=oe({name:"NodeContent",setup(){return{ns:he("cascader-node")}},render(){const{ns:e}=this,{node:t,panel:n}=this.$parent,{data:l,label:a}=t,{renderLabelFn:s}=n;return en("span",{class:e.e("label")},s?s({node:t,data:l}):a)}});const Pt=Symbol(),En=oe({name:"ElCascaderNode",components:{ElCheckbox:hl,ElRadio:fn,NodeContent:Sn,ElIcon:Ve,Check:ol,Loading:al,ArrowRight:$l},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:t}){const n=Fe(Pt),l=he("cascader-node"),a=P(()=>n.isHoverMenu),s=P(()=>n.config.multiple),r=P(()=>n.config.checkStrictly),i=P(()=>{var S;return(S=n.checkedNodes[0])==null?void 0:S.uid}),u=P(()=>e.node.isDisabled),h=P(()=>e.node.isLeaf),T=P(()=>r.value&&!h.value||!u.value),k=P(()=>V(n.expandingNode)),z=P(()=>r.value&&n.checkedNodes.some(V)),V=S=>{var O;const{level:X,uid:re}=e.node;return((O=S==null?void 0:S.pathNodes[X-1])==null?void 0:O.uid)===re},b=()=>{k.value||n.expandNode(e.node)},U=S=>{const{node:O}=e;S!==O.checked&&n.handleCheckChange(O,S)},x=()=>{n.lazyLoad(e.node,()=>{h.value||b()})},d=S=>{a.value&&($(),!h.value&&t("expand",S))},$=()=>{const{node:S}=e;!T.value||S.loading||(S.loaded?b():x())},y=()=>{a.value&&!h.value||(h.value&&!u.value&&!r.value&&!s.value?Y(!0):$())},J=S=>{r.value?(U(S),e.node.loaded&&b()):Y(S)},Y=S=>{e.node.loaded?(U(S),!r.value&&b()):x()};return{panel:n,isHoverMenu:a,multiple:s,checkStrictly:r,checkedNodeId:i,isDisabled:u,isLeaf:h,expandable:T,inExpandingPath:k,inCheckedPath:z,ns:l,handleHoverExpand:d,handleExpand:$,handleClick:y,handleCheck:Y,handleSelectCheck:J}}}),Nn=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],Tn=_("span",null,null,-1);function Mn(e,t,n,l,a,s){const r=ge("el-checkbox"),i=ge("el-radio"),u=ge("check"),h=ge("el-icon"),T=ge("node-content"),k=ge("loading"),z=ge("arrow-right");return g(),H("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:I([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:t[2]||(t[2]=(...V)=>e.handleHoverExpand&&e.handleHoverExpand(...V)),onFocus:t[3]||(t[3]=(...V)=>e.handleHoverExpand&&e.handleHoverExpand(...V)),onClick:t[4]||(t[4]=(...V)=>e.handleClick&&e.handleClick(...V))},[te(" prefix "),e.multiple?(g(),K(r,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:t[0]||(t[0]=Ge(()=>{},["stop"])),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):e.checkStrictly?(g(),K(i,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:t[1]||(t[1]=Ge(()=>{},["stop"]))},{default:v(()=>[te(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),Tn]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):e.isLeaf&&e.node.checked?(g(),K(h,{key:2,class:I(e.ns.e("prefix"))},{default:v(()=>[p(u)]),_:1},8,["class"])):te("v-if",!0),te(" content "),p(T),te(" postfix "),e.isLeaf?te("v-if",!0):(g(),H(se,{key:3},[e.node.loading?(g(),K(h,{key:0,class:I([e.ns.is("loading"),e.ns.e("postfix")])},{default:v(()=>[p(k)]),_:1},8,["class"])):(g(),K(h,{key:1,class:I(["arrow-right",e.ns.e("postfix")])},{default:v(()=>[p(z)]),_:1},8,["class"]))],64))],42,Nn)}var Vn=$e(En,[["render",Mn],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/node.vue"]]);const An=oe({name:"ElCascaderMenu",components:{Loading:al,ElIcon:Ve,ElScrollbar:sl,ElCascaderNode:Vn},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const t=lt(),n=he("cascader-menu"),{t:l}=Mt(),a=$n();let s=null,r=null;const i=Fe(Pt),u=M(null),h=P(()=>!e.nodes.length),T=P(()=>!i.initialLoaded),k=P(()=>`cascader-menu-${a}-${e.index}`),z=x=>{s=x.target},V=x=>{if(!(!i.isHoverMenu||!s||!u.value))if(s.contains(x.target)){b();const d=t.vnode.el,{left:$}=d.getBoundingClientRect(),{offsetWidth:y,offsetHeight:J}=d,Y=x.clientX-$,S=s.offsetTop,O=S+s.offsetHeight;u.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${Y} ${S} L${y} 0 V${S} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${Y} ${O} L${y} ${J} V${O} Z" />
        `}else r||(r=window.setTimeout(U,i.config.hoverThreshold))},b=()=>{r&&(clearTimeout(r),r=null)},U=()=>{u.value&&(u.value.innerHTML="",b())};return{ns:n,panel:i,hoverZone:u,isEmpty:h,isLoading:T,menuId:k,t:l,handleExpand:z,handleMouseMove:V,clearHoverZone:U}}});function Fn(e,t,n,l,a,s){const r=ge("el-cascader-node"),i=ge("loading"),u=ge("el-icon"),h=ge("el-scrollbar");return g(),K(h,{key:e.menuId,tag:"ul",role:"menu",class:I(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:v(()=>{var T;return[(g(!0),H(se,null,ye(e.nodes,k=>(g(),K(r,{key:k.uid,node:k,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(g(),H("div",{key:0,class:I(e.ns.e("empty-text"))},[p(u,{size:"14",class:I(e.ns.is("loading"))},{default:v(()=>[p(i)]),_:1},8,["class"]),be(" "+_e(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(g(),H("div",{key:1,class:I(e.ns.e("empty-text"))},_e(e.t("el.cascader.noData")),3)):(T=e.panel)!=null&&T.isHoverMenu?(g(),H("svg",{key:2,ref:"hoverZone",class:I(e.ns.e("hover-zone"))},null,2)):te("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var In=$e(An,[["render",Fn],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/menu.vue"]]);let Pn=0;const Ln=e=>{const t=[e];let{parent:n}=e;for(;n;)t.unshift(n),n=n.parent;return t};class Be{constructor(t,n,l,a=!1){this.data=t,this.config=n,this.parent=l,this.root=a,this.uid=Pn++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:s,label:r,children:i}=n,u=t[i],h=Ln(this);this.level=a?0:l?l.level+1:1,this.value=t[s],this.label=t[r],this.pathNodes=h,this.pathValues=h.map(T=>T.value),this.pathLabels=h.map(T=>T.label),this.childrenData=u,this.children=(u||[]).map(T=>new Be(T,n,this)),this.loaded=!n.lazy||this.isLeaf||!$t(u)}get isDisabled(){const{data:t,parent:n,config:l}=this,{disabled:a,checkStrictly:s}=l;return(Dt(a)?a(t,this):!!t[a])||!s&&(n==null?void 0:n.isDisabled)}get isLeaf(){const{data:t,config:n,childrenData:l,loaded:a}=this,{lazy:s,leaf:r}=n,i=Dt(r)?r(t,this):t[r];return xl(i)?s&&!a?!1:!(Array.isArray(l)&&l.length):!!i}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(t){const{childrenData:n,children:l}=this,a=new Be(t,this.config,this);return Array.isArray(n)?n.push(t):this.childrenData=[t],l.push(a),a}calcText(t,n){const l=t?this.pathLabels.join(n):this.label;return this.text=l,l}broadcast(t,...n){const l=`onParent${Wt(t)}`;this.children.forEach(a=>{a&&(a.broadcast(t,...n),a[l]&&a[l](...n))})}emit(t,...n){const{parent:l}=this,a=`onChild${Wt(t)}`;l&&(l[a]&&l[a](...n),l.emit(t,...n))}onParentCheck(t){this.isDisabled||this.setCheckState(t)}onChildCheck(){const{children:t}=this,n=t.filter(a=>!a.isDisabled),l=n.length?n.every(a=>a.checked):!1;this.setCheckState(l)}setCheckState(t){const n=this.children.length,l=this.children.reduce((a,s)=>{const r=s.checked?1:s.indeterminate?.5:0;return a+r},0);this.checked=this.loaded&&this.children.filter(a=>!a.isDisabled).every(a=>a.loaded&&a.checked)&&t,this.indeterminate=this.loaded&&l!==n&&l>0}doCheck(t){if(this.checked===t)return;const{checkStrictly:n,multiple:l}=this.config;n||!l?this.checked=t:(this.broadcast("check",t),this.setCheckState(t),this.emit("check"))}}const Tt=(e,t)=>e.reduce((n,l)=>(l.isLeaf?n.push(l):(!t&&n.push(l),n=n.concat(Tt(l.children,t))),n),[]);class Kt{constructor(t,n){this.config=n;const l=(t||[]).map(a=>new Be(a,this.config));this.nodes=l,this.allNodes=Tt(l,!1),this.leafNodes=Tt(l,!0)}getNodes(){return this.nodes}getFlattedNodes(t){return t?this.leafNodes:this.allNodes}appendNode(t,n){const l=n?n.appendChild(t):new Be(t,this.config);n||this.nodes.push(l),this.allNodes.push(l),l.isLeaf&&this.leafNodes.push(l)}appendNodes(t,n){t.forEach(l=>this.appendNode(l,n))}getNodeByValue(t,n=!1){return!t&&t!==0?null:this.getFlattedNodes(n).find(a=>qe(a.value,t)||qe(a.pathValues,t))||null}getSameNode(t){return t&&this.getFlattedNodes(!1).find(({value:l,level:a})=>qe(t.value,l)&&t.level===a)||null}}const _l=He({modelValue:{type:Ae([Number,String,Array])},options:{type:Ae(Array),default:()=>[]},props:{type:Ae(Object),default:()=>({})}}),On={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:tn,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},zn=e=>P(()=>({...On,...e.props})),qt=e=>{if(!e)return 0;const t=e.id.split("-");return Number(t[t.length-2])},Dn=e=>{if(!e)return;const t=e.querySelector("input");t?t.click():Sl(e)&&e.click()},Bn=(e,t)=>{const n=t.slice(0),l=n.map(s=>s.uid),a=e.reduce((s,r)=>{const i=l.indexOf(r.uid);return i>-1&&(s.push(r),n.splice(i,1),l.splice(i,1)),s},[]);return a.push(...n),a},Hn=oe({name:"ElCascaderPanel",components:{ElCascaderMenu:In},props:{..._l,border:{type:Boolean,default:!0},renderLabel:Function},emits:[Ie,Qe,"close","expand-change"],setup(e,{emit:t,slots:n}){let l=!1;const a=he("cascader"),s=zn(e);let r=null;const i=M(!0),u=M([]),h=M(null),T=M([]),k=M(null),z=M([]),V=P(()=>s.value.expandTrigger==="hover"),b=P(()=>e.renderLabel||n.default),U=()=>{const{options:C}=e,L=s.value;l=!1,r=new Kt(C,L),T.value=[r.getNodes()],L.lazy&&$t(e.options)?(i.value=!1,x(void 0,D=>{D&&(r=new Kt(D,L),T.value=[r.getNodes()]),i.value=!0,X(!1,!0)})):X(!1,!0)},x=(C,L)=>{const D=s.value;C=C||new Be({},D,void 0,!0),C.loading=!0;const R=W=>{const E=C,m=E.root?null:E;W&&(r==null||r.appendNodes(W,m)),E.loading=!1,E.loaded=!0,E.childrenData=E.childrenData||[],L&&L(W)};D.lazyLoad(C,R)},d=(C,L)=>{var D;const{level:R}=C,W=T.value.slice(0,R);let E;C.isLeaf?E=C.pathNodes[R-2]:(E=C,W.push(C.children)),((D=k.value)==null?void 0:D.uid)!==(E==null?void 0:E.uid)&&(k.value=C,T.value=W,!L&&t("expand-change",(C==null?void 0:C.pathValues)||[]))},$=(C,L,D=!0)=>{const{checkStrictly:R,multiple:W}=s.value,E=z.value[0];l=!0,!W&&(E==null||E.doCheck(!1)),C.doCheck(L),O(),D&&!W&&!R&&t("close"),!D&&!W&&!R&&y(C)},y=C=>{C&&(C=C.parent,y(C),C&&d(C))},J=C=>r==null?void 0:r.getFlattedNodes(C),Y=C=>{var L;return(L=J(C))==null?void 0:L.filter(D=>D.checked!==!1)},S=()=>{z.value.forEach(C=>C.doCheck(!1)),O(),T.value=T.value.slice(0,1),k.value=null,t("expand-change",[])},O=()=>{var C;const{checkStrictly:L,multiple:D}=s.value,R=z.value,W=Y(!L),E=Bn(R,W),m=E.map(N=>N.valueByOption);z.value=E,h.value=D?m:(C=m[0])!=null?C:null},X=(C=!1,L=!1)=>{const{modelValue:D}=e,{lazy:R,multiple:W,checkStrictly:E}=s.value,m=!E;if(!(!i.value||l||!L&&qe(D,h.value)))if(R&&!C){const q=jt(wn(Rt(D))).map(B=>r==null?void 0:r.getNodeByValue(B)).filter(B=>!!B&&!B.loaded&&!B.loading);q.length?q.forEach(B=>{x(B,()=>X(!1,L))}):X(!0,L)}else{const N=W?Rt(D):[D],q=jt(N.map(B=>r==null?void 0:r.getNodeByValue(B,m)));re(q,L),h.value=bl(D)}},re=(C,L=!0)=>{const{checkStrictly:D}=s.value,R=z.value,W=C.filter(N=>!!N&&(D||N.isLeaf)),E=r==null?void 0:r.getSameNode(k.value),m=L&&E||W[0];m?m.pathNodes.forEach(N=>d(N,!0)):k.value=null,R.forEach(N=>N.doCheck(!1)),e.props.multiple?Ze(W).forEach(N=>N.doCheck(!0)):W.forEach(N=>N.doCheck(!0)),z.value=W,Ce(de)},de=()=>{Vt&&u.value.forEach(C=>{const L=C==null?void 0:C.$el;if(L){const D=L.querySelector(`.${a.namespace.value}-scrollbar__wrap`),R=L.querySelector(`.${a.b("node")}.${a.is("active")}`)||L.querySelector(`.${a.b("node")}.in-active-path`);_n(D,R)}})},ie=C=>{const L=C.target,{code:D}=C;switch(D){case ue.up:case ue.down:{C.preventDefault();const R=D===ue.up?-1:1;ut(rl(L,R,`.${a.b("node")}[tabindex="-1"]`));break}case ue.left:{C.preventDefault();const R=u.value[qt(L)-1],W=R==null?void 0:R.$el.querySelector(`.${a.b("node")}[aria-expanded="true"]`);ut(W);break}case ue.right:{C.preventDefault();const R=u.value[qt(L)+1],W=R==null?void 0:R.$el.querySelector(`.${a.b("node")}[tabindex="-1"]`);ut(W);break}case ue.enter:Dn(L);break}};return Ft(Pt,Ze({config:s,expandingNode:k,checkedNodes:z,isHoverMenu:V,initialLoaded:i,renderLabelFn:b,lazyLoad:x,expandNode:d,handleCheckChange:$})),le([s,()=>e.options],U,{deep:!0,immediate:!0}),le(()=>e.modelValue,()=>{l=!1,X()},{deep:!0}),le(()=>h.value,C=>{qe(C,e.modelValue)||(t(Ie,C),t(Qe,C))}),ln(()=>u.value=[]),Pe(()=>!$t(e.modelValue)&&X()),{ns:a,menuList:u,menus:T,checkedNodes:z,handleKeyDown:ie,handleCheckChange:$,getFlattedNodes:J,getCheckedNodes:Y,clearCheckedNodes:S,calculateCheckedValue:O,scrollToExpandingNode:de}}});function Un(e,t,n,l,a,s){const r=ge("el-cascader-menu");return g(),H("div",{class:I([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:t[0]||(t[0]=(...i)=>e.handleKeyDown&&e.handleKeyDown(...i))},[(g(!0),H(se,null,ye(e.menus,(i,u)=>(g(),K(r,{key:u,ref_for:!0,ref:h=>e.menuList[u]=h,index:u,nodes:[...i]},null,8,["index","nodes"]))),128))],34)}var ct=$e(Hn,[["render",Un],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/index.vue"]]);ct.install=e=>{e.component(ct.name,ct)};const Wn=ct,jn=He({..._l,size:il,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:Ae(Function),default:(e,t)=>e.text.includes(t)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:Ae(Function),default:()=>!0},popperClass:{type:String,default:""},teleported:El.teleported,tagType:{...Kl.type,default:"info"},validateEvent:{type:Boolean,default:!0}}),Rn={[Ie]:e=>!!e||e===null,[Qe]:e=>!!e||e===null,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,visibleChange:e=>Nl(e),expandChange:e=>!!e,removeTag:e=>!!e},Kn={key:0},qn=["placeholder","onKeydown"],Gn=["onClick"],Xn="ElCascader",Jn=oe({name:Xn}),Yn=oe({...Jn,props:jn,emits:Rn,setup(e,{expose:t,emit:n}){const l=e,a={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:c})=>{const{modifiersData:f,placement:w}=c;["right","left","bottom","top"].includes(w)||(f.arrow.x=35)},requires:["arrow"]}]},s=nn();let r=0,i=0;const u=he("cascader"),h=he("input"),{t:T}=Mt(),{form:k,formItem:z}=ul(),V=M(null),b=M(null),U=M(null),x=M(null),d=M(null),$=M(!1),y=M(!1),J=M(!1),Y=M(!1),S=M(""),O=M(""),X=M([]),re=M([]),de=M([]),ie=M(!1),C=P(()=>s.style),L=P(()=>l.disabled||(k==null?void 0:k.disabled)),D=P(()=>l.placeholder||T("el.cascader.placeholder")),R=P(()=>O.value||X.value.length>0||ie.value?"":D.value),W=cl(),E=P(()=>["small"].includes(W.value)?"small":"default"),m=P(()=>!!l.props.multiple),N=P(()=>!l.filterable||m.value),q=P(()=>m.value?O.value:S.value),B=P(()=>{var c;return((c=x.value)==null?void 0:c.checkedNodes)||[]}),ve=P(()=>!l.clearable||L.value||J.value||!y.value?!1:!!B.value.length),pe=P(()=>{const{showAllLevels:c,separator:f}=l,w=B.value;return w.length?m.value?"":w[0].calcText(c,f):""}),F=P({get(){return bl(l.modelValue)},set(c){n(Ie,c),n(Qe,c),l.validateEvent&&(z==null||z.validate("change").catch(f=>xt()))}}),A=P(()=>[u.b(),u.m(W.value),u.is("disabled",L.value),s.class]),ee=P(()=>[h.e("icon"),"icon-arrow-down",u.is("reverse",$.value)]),fe=P(()=>u.is("focus",$.value||Y.value)),xe=P(()=>{var c,f;return(f=(c=V.value)==null?void 0:c.popperRef)==null?void 0:f.contentRef}),Z=c=>{var f,w,Q;L.value||(c=c??!$.value,c!==$.value&&($.value=c,(w=(f=b.value)==null?void 0:f.input)==null||w.setAttribute("aria-expanded",`${c}`),c?(me(),Ce((Q=x.value)==null?void 0:Q.scrollToExpandingNode)):l.filterable&&Oe(),n("visibleChange",c)))},me=()=>{Ce(()=>{var c;(c=V.value)==null||c.updatePopper()})},j=()=>{J.value=!1},ne=c=>{const{showAllLevels:f,separator:w}=l;return{node:c,key:c.uid,text:c.calcText(f,w),hitState:!1,closable:!L.value&&!c.isDisabled,isCollapseTag:!1}},Ne=c=>{var f;const w=c.node;w.doCheck(!1),(f=x.value)==null||f.calculateCheckedValue(),n("removeTag",w.valueByOption)},ht=()=>{if(!m.value)return;const c=B.value,f=[],w=[];if(c.forEach(Q=>w.push(ne(Q))),re.value=w,c.length){const[Q,...Se]=c,Ee=Se.length;f.push(ne(Q)),Ee&&(l.collapseTags?f.push({key:-1,text:`+ ${Ee}`,closable:!1,isCollapseTag:!0}):Se.forEach(ke=>f.push(ne(ke))))}X.value=f},nt=()=>{var c,f;const{filterMethod:w,showAllLevels:Q,separator:Se}=l,Ee=(f=(c=x.value)==null?void 0:c.getFlattedNodes(!l.props.checkStrictly))==null?void 0:f.filter(ke=>ke.isDisabled?!1:(ke.calcText(Q,Se),w(ke,q.value)));m.value&&(X.value.forEach(ke=>{ke.hitState=!1}),re.value.forEach(ke=>{ke.hitState=!1})),J.value=!0,de.value=Ee,me()},vt=()=>{var c;let f;J.value&&d.value?f=d.value.$el.querySelector(`.${u.e("suggestion-item")}`):f=(c=x.value)==null?void 0:c.$el.querySelector(`.${u.b("node")}[tabindex="-1"]`),f&&(f.focus(),!J.value&&f.click())},Le=()=>{var c,f;const w=(c=b.value)==null?void 0:c.input,Q=U.value,Se=(f=d.value)==null?void 0:f.$el;if(!(!Vt||!w)){if(Se){const Ee=Se.querySelector(`.${u.e("suggestion-list")}`);Ee.style.minWidth=`${w.offsetWidth}px`}if(Q){const{offsetHeight:Ee}=Q,ke=X.value.length>0?`${Math.max(Ee+6,r)}px`:`${r}px`;w.style.height=ke,me()}}},mt=c=>{var f;return(f=x.value)==null?void 0:f.getCheckedNodes(c)},gt=c=>{me(),n("expandChange",c)},Te=c=>{var f;const w=(f=c.target)==null?void 0:f.value;if(c.type==="compositionend")ie.value=!1,Ce(()=>ze(w));else{const Q=w[w.length-1]||"";ie.value=!Ql(Q)}},bt=c=>{if(!ie.value)switch(c.code){case ue.enter:Z();break;case ue.down:Z(!0),Ce(vt),c.preventDefault();break;case ue.esc:$.value===!0&&(c.preventDefault(),c.stopPropagation(),Z(!1));break;case ue.tab:Z(!1);break}},G=()=>{var c;(c=x.value)==null||c.clearCheckedNodes(),!$.value&&l.filterable&&Oe(),Z(!1)},Oe=()=>{const{value:c}=pe;S.value=c,O.value=c},ot=c=>{var f,w;const{checked:Q}=c;m.value?(f=x.value)==null||f.handleCheckChange(c,!Q,!1):(!Q&&((w=x.value)==null||w.handleCheckChange(c,!0,!1)),Z(!1))},at=c=>{const f=c.target,{code:w}=c;switch(w){case ue.up:case ue.down:{const Q=w===ue.up?-1:1;ut(rl(f,Q,`.${u.e("suggestion-item")}[tabindex="-1"]`));break}case ue.enter:f.click();break}},st=()=>{const c=X.value,f=c[c.length-1];i=O.value?0:i+1,!(!f||!i||l.collapseTags&&c.length>1)&&(f.hitState?Ne(f):f.hitState=!0)},Ue=c=>{const f=c.target,w=u.e("search-input");f.className===w&&(Y.value=!0),n("focus",c)},We=c=>{Y.value=!1,n("blur",c)},rt=vl(()=>{const{value:c}=q;if(!c)return;const f=l.beforeFilter(c);on(f)?f.then(nt).catch(()=>{}):f!==!1?nt():j()},l.debounce),ze=(c,f)=>{!$.value&&Z(!0),!(f!=null&&f.isComposing)&&(c?rt():j())},je=c=>Number.parseFloat(Vl(h.cssVarName("input-height"),c).value)-2;return le(J,me),le([B,L],ht),le(X,()=>{Ce(()=>Le())}),le(W,async()=>{await Ce();const c=b.value.input;r=je(c)||r,Le()}),le(pe,Oe,{immediate:!0}),Pe(()=>{const c=b.value.input,f=je(c);r=c.offsetHeight||f,Tl(c,Le)}),t({getCheckedNodes:mt,cascaderPanelRef:x,togglePopperVisible:Z,contentRef:xe}),(c,f)=>(g(),K(o(Je),{ref_key:"tooltipRef",ref:V,visible:$.value,teleported:c.teleported,"popper-class":[o(u).e("dropdown"),c.popperClass],"popper-options":a,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${o(u).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:j},{default:v(()=>[ce((g(),H("div",{class:I(o(A)),style:ae(o(C)),onClick:f[5]||(f[5]=()=>Z(o(N)?void 0:!0)),onKeydown:bt,onMouseenter:f[6]||(f[6]=w=>y.value=!0),onMouseleave:f[7]||(f[7]=w=>y.value=!1)},[p(o(tt),{ref_key:"input",ref:b,modelValue:S.value,"onUpdate:modelValue":f[1]||(f[1]=w=>S.value=w),placeholder:o(R),readonly:o(N),disabled:o(L),"validate-event":!1,size:o(W),class:I(o(fe)),tabindex:o(m)&&c.filterable&&!o(L)?-1:void 0,onCompositionstart:Te,onCompositionupdate:Te,onCompositionend:Te,onFocus:Ue,onBlur:We,onInput:ze},{suffix:v(()=>[o(ve)?(g(),K(o(Ve),{key:"clear",class:I([o(h).e("icon"),"icon-circle-close"]),onClick:Ge(G,["stop"])},{default:v(()=>[p(o(Ml))]),_:1},8,["class","onClick"])):(g(),K(o(Ve),{key:"arrow-down",class:I(o(ee)),onClick:f[0]||(f[0]=Ge(w=>Z(),["stop"]))},{default:v(()=>[p(o(dl))]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","tabindex"]),o(m)?(g(),H("div",{key:0,ref_key:"tagWrapper",ref:U,class:I(o(u).e("tags"))},[(g(!0),H(se,null,ye(X.value,w=>(g(),K(o(zt),{key:w.key,type:c.tagType,size:o(E),hit:w.hitState,closable:w.closable,"disable-transitions":"",onClose:Q=>Ne(w)},{default:v(()=>[w.isCollapseTag===!1?(g(),H("span",Kn,_e(w.text),1)):(g(),K(o(Je),{key:1,disabled:$.value||!c.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:v(()=>[_("span",null,_e(w.text),1)]),content:v(()=>[_("div",{class:I(o(u).e("collapse-tags"))},[(g(!0),H(se,null,ye(re.value.slice(1),(Q,Se)=>(g(),H("div",{key:Se,class:I(o(u).e("collapse-tag"))},[(g(),K(o(zt),{key:Q.key,class:"in-tooltip",type:c.tagType,size:o(E),hit:Q.hitState,closable:Q.closable,"disable-transitions":"",onClose:Ee=>Ne(Q)},{default:v(()=>[_("span",null,_e(Q.text),1)]),_:2},1032,["type","size","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","hit","closable","onClose"]))),128)),c.filterable&&!o(L)?ce((g(),H("input",{key:0,"onUpdate:modelValue":f[2]||(f[2]=w=>O.value=w),type:"text",class:I(o(u).e("search-input")),placeholder:o(pe)?"":o(D),onInput:f[3]||(f[3]=w=>ze(O.value,w)),onClick:f[4]||(f[4]=Ge(w=>Z(!0),["stop"])),onKeydown:St(st,["delete"]),onCompositionstart:Te,onCompositionupdate:Te,onCompositionend:Te,onFocus:Ue,onBlur:We},null,42,qn)),[[an,O.value]]):te("v-if",!0)],2)):te("v-if",!0)],38)),[[o(ml),()=>Z(!1),o(xe)]])]),content:v(()=>[ce(p(o(Wn),{ref_key:"cascaderPanelRef",ref:x,modelValue:o(F),"onUpdate:modelValue":f[8]||(f[8]=w=>Et(F)?F.value=w:null),options:c.options,props:l.props,border:!1,"render-label":c.$slots.default,onExpandChange:gt,onClose:f[9]||(f[9]=w=>c.$nextTick(()=>Z(!1)))},null,8,["modelValue","options","props","render-label"]),[[we,!J.value]]),c.filterable?ce((g(),K(o(sl),{key:0,ref_key:"suggestionPanel",ref:d,tag:"ul",class:I(o(u).e("suggestion-panel")),"view-class":o(u).e("suggestion-list"),onKeydown:at},{default:v(()=>[de.value.length?(g(!0),H(se,{key:0},ye(de.value,w=>(g(),H("li",{key:w.uid,class:I([o(u).e("suggestion-item"),o(u).is("checked",w.checked)]),tabindex:-1,onClick:Q=>ot(w)},[_("span",null,_e(w.text),1),w.checked?(g(),K(o(Ve),{key:0},{default:v(()=>[p(o(ol))]),_:1})):te("v-if",!0)],10,Gn))),128)):Nt(c.$slots,"empty",{key:1},()=>[_("li",{class:I(o(u).e("empty-text"))},_e(o(T)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[we,J.value]]):te("v-if",!0)]),_:3},8,["visible","teleported","popper-class","transition"]))}});var dt=$e(Yn,[["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader/src/cascader.vue"]]);dt.install=e=>{e.component(dt.name,dt)};const Zn=dt,Qn=Zn,eo=He({color:{type:Ae(Object),required:!0},vertical:{type:Boolean,default:!1}});let kt=!1;function et(e,t){if(!Vt)return;const n=function(s){var r;(r=t.drag)==null||r.call(t,s)},l=function(s){var r;document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",l),document.removeEventListener("touchmove",n),document.removeEventListener("touchend",l),document.onselectstart=null,document.ondragstart=null,kt=!1,(r=t.end)==null||r.call(t,s)},a=function(s){var r;kt||(s.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",n),document.addEventListener("mouseup",l),document.addEventListener("touchmove",n),document.addEventListener("touchend",l),kt=!0,(r=t.start)==null||r.call(t,s))};e.addEventListener("mousedown",a),e.addEventListener("touchstart",a)}const to=e=>{const t=lt(),n=Bt(),l=Bt();function a(r){r.target!==n.value&&s(r)}function s(r){if(!l.value||!n.value)return;const u=t.vnode.el.getBoundingClientRect(),{clientX:h,clientY:T}=It(r);if(e.vertical){let k=T-u.top;k=Math.max(n.value.offsetHeight/2,k),k=Math.min(k,u.height-n.value.offsetHeight/2),e.color.set("alpha",Math.round((k-n.value.offsetHeight/2)/(u.height-n.value.offsetHeight)*100))}else{let k=h-u.left;k=Math.max(n.value.offsetWidth/2,k),k=Math.min(k,u.width-n.value.offsetWidth/2),e.color.set("alpha",Math.round((k-n.value.offsetWidth/2)/(u.width-n.value.offsetWidth)*100))}}return{thumb:n,bar:l,handleDrag:s,handleClick:a}},lo=(e,{bar:t,thumb:n,handleDrag:l})=>{const a=lt(),s=he("color-alpha-slider"),r=M(0),i=M(0),u=M();function h(){if(!n.value||e.vertical)return 0;const $=a.vnode.el,y=e.color.get("alpha");return $?Math.round(y*($.offsetWidth-n.value.offsetWidth/2)/100):0}function T(){if(!n.value)return 0;const $=a.vnode.el;if(!e.vertical)return 0;const y=e.color.get("alpha");return $?Math.round(y*($.offsetHeight-n.value.offsetHeight/2)/100):0}function k(){if(e.color&&e.color.value){const{r:$,g:y,b:J}=e.color.toRgb();return`linear-gradient(to right, rgba(${$}, ${y}, ${J}, 0) 0%, rgba(${$}, ${y}, ${J}, 1) 100%)`}return""}function z(){r.value=h(),i.value=T(),u.value=k()}Pe(()=>{if(!t.value||!n.value)return;const $={drag:y=>{l(y)},end:y=>{l(y)}};et(t.value,$),et(n.value,$),z()}),le(()=>e.color.get("alpha"),()=>z()),le(()=>e.color.value,()=>z());const V=P(()=>[s.b(),s.is("vertical",e.vertical)]),b=P(()=>s.e("bar")),U=P(()=>s.e("thumb")),x=P(()=>({background:u.value})),d=P(()=>({left:Ot(r.value),top:Ot(i.value)}));return{rootKls:V,barKls:b,barStyle:x,thumbKls:U,thumbStyle:d,update:z}},no="ElColorAlphaSlider",oo=oe({name:no}),ao=oe({...oo,props:eo,setup(e,{expose:t}){const n=e,{bar:l,thumb:a,handleDrag:s,handleClick:r}=to(n),{rootKls:i,barKls:u,barStyle:h,thumbKls:T,thumbStyle:k,update:z}=lo(n,{bar:l,thumb:a,handleDrag:s});return t({update:z,bar:l,thumb:a}),(V,b)=>(g(),H("div",{class:I(o(i))},[_("div",{ref_key:"bar",ref:l,class:I(o(u)),style:ae(o(h)),onClick:b[0]||(b[0]=(...U)=>o(r)&&o(r)(...U))},null,6),_("div",{ref_key:"thumb",ref:a,class:I(o(T)),style:ae(o(k))},null,6)],2))}});var so=$e(ao,[["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/alpha-slider.vue"]]);const ro=oe({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(e){const t=he("color-hue-slider"),n=lt(),l=M(),a=M(),s=M(0),r=M(0),i=P(()=>e.color.get("hue"));le(()=>i.value,()=>{z()});function u(V){V.target!==l.value&&h(V)}function h(V){if(!a.value||!l.value)return;const U=n.vnode.el.getBoundingClientRect(),{clientX:x,clientY:d}=It(V);let $;if(e.vertical){let y=d-U.top;y=Math.min(y,U.height-l.value.offsetHeight/2),y=Math.max(l.value.offsetHeight/2,y),$=Math.round((y-l.value.offsetHeight/2)/(U.height-l.value.offsetHeight)*360)}else{let y=x-U.left;y=Math.min(y,U.width-l.value.offsetWidth/2),y=Math.max(l.value.offsetWidth/2,y),$=Math.round((y-l.value.offsetWidth/2)/(U.width-l.value.offsetWidth)*360)}e.color.set("hue",$)}function T(){if(!l.value)return 0;const V=n.vnode.el;if(e.vertical)return 0;const b=e.color.get("hue");return V?Math.round(b*(V.offsetWidth-l.value.offsetWidth/2)/360):0}function k(){if(!l.value)return 0;const V=n.vnode.el;if(!e.vertical)return 0;const b=e.color.get("hue");return V?Math.round(b*(V.offsetHeight-l.value.offsetHeight/2)/360):0}function z(){s.value=T(),r.value=k()}return Pe(()=>{if(!a.value||!l.value)return;const V={drag:b=>{h(b)},end:b=>{h(b)}};et(a.value,V),et(l.value,V),z()}),{bar:a,thumb:l,thumbLeft:s,thumbTop:r,hueValue:i,handleClick:u,update:z,ns:t}}});function io(e,t,n,l,a,s){return g(),H("div",{class:I([e.ns.b(),e.ns.is("vertical",e.vertical)])},[_("div",{ref:"bar",class:I(e.ns.e("bar")),onClick:t[0]||(t[0]=(...r)=>e.handleClick&&e.handleClick(...r))},null,2),_("div",{ref:"thumb",class:I(e.ns.e("thumb")),style:ae({left:e.thumbLeft+"px",top:e.thumbTop+"px"})},null,6)],2)}var uo=$e(ro,[["render",io],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/hue-slider.vue"]]);const co=He({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:il,popperClass:{type:String,default:""},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},predefine:{type:Ae(Array)},validateEvent:{type:Boolean,default:!0}}),po={[Ie]:e=>yt(e)||_t(e),[Qe]:e=>yt(e)||_t(e),activeChange:e=>yt(e)||_t(e)},yl=Symbol("colorPickerContextKey"),Gt=function(e,t,n){return[e,t*n/((e=(2-t)*n)<1?e:2-e)||0,e/2]},fo=function(e){return typeof e=="string"&&e.includes(".")&&Number.parseFloat(e)===1},ho=function(e){return typeof e=="string"&&e.includes("%")},De=function(e,t){fo(e)&&(e="100%");const n=ho(e);return e=Math.min(t,Math.max(0,Number.parseFloat(`${e}`))),n&&(e=Number.parseInt(`${e*t}`,10)/100),Math.abs(e-t)<1e-6?1:e%t/Number.parseFloat(t)},Xt={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},pt=e=>{e=Math.min(Math.round(e),255);const t=Math.floor(e/16),n=e%16;return`${Xt[t]||t}${Xt[n]||n}`},Jt=function({r:e,g:t,b:n}){return Number.isNaN(+e)||Number.isNaN(+t)||Number.isNaN(+n)?"":`#${pt(e)}${pt(t)}${pt(n)}`},Ct={A:10,B:11,C:12,D:13,E:14,F:15},Me=function(e){return e.length===2?(Ct[e[0].toUpperCase()]||+e[0])*16+(Ct[e[1].toUpperCase()]||+e[1]):Ct[e[1].toUpperCase()]||+e[1]},vo=function(e,t,n){t=t/100,n=n/100;let l=t;const a=Math.max(n,.01);n*=2,t*=n<=1?n:2-n,l*=a<=1?a:2-a;const s=(n+t)/2,r=n===0?2*l/(a+l):2*t/(n+t);return{h:e,s:r*100,v:s*100}},Yt=(e,t,n)=>{e=De(e,255),t=De(t,255),n=De(n,255);const l=Math.max(e,t,n),a=Math.min(e,t,n);let s;const r=l,i=l-a,u=l===0?0:i/l;if(l===a)s=0;else{switch(l){case e:{s=(t-n)/i+(t<n?6:0);break}case t:{s=(n-e)/i+2;break}case n:{s=(e-t)/i+4;break}}s/=6}return{h:s*360,s:u*100,v:r*100}},Re=function(e,t,n){e=De(e,360)*6,t=De(t,100),n=De(n,100);const l=Math.floor(e),a=e-l,s=n*(1-t),r=n*(1-a*t),i=n*(1-(1-a)*t),u=l%6,h=[n,r,s,s,i,n][u],T=[i,n,n,r,s,s][u],k=[s,s,i,n,n,r][u];return{r:Math.round(h*255),g:Math.round(T*255),b:Math.round(k*255)}};class Xe{constructor(t={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const n in t)Ht(t,n)&&(this[n]=t[n]);t.value?this.fromString(t.value):this.doOnChange()}set(t,n){if(arguments.length===1&&typeof t=="object"){for(const l in t)Ht(t,l)&&this.set(l,t[l]);return}this[`_${t}`]=n,this.doOnChange()}get(t){return t==="alpha"?Math.floor(this[`_${t}`]):this[`_${t}`]}toRgb(){return Re(this._hue,this._saturation,this._value)}fromString(t){if(!t){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const n=(l,a,s)=>{this._hue=Math.max(0,Math.min(360,l)),this._saturation=Math.max(0,Math.min(100,a)),this._value=Math.max(0,Math.min(100,s)),this.doOnChange()};if(t.includes("hsl")){const l=t.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(a=>a!=="").map((a,s)=>s>2?Number.parseFloat(a):Number.parseInt(a,10));if(l.length===4?this._alpha=Number.parseFloat(l[3])*100:l.length===3&&(this._alpha=100),l.length>=3){const{h:a,s,v:r}=vo(l[0],l[1],l[2]);n(a,s,r)}}else if(t.includes("hsv")){const l=t.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(a=>a!=="").map((a,s)=>s>2?Number.parseFloat(a):Number.parseInt(a,10));l.length===4?this._alpha=Number.parseFloat(l[3])*100:l.length===3&&(this._alpha=100),l.length>=3&&n(l[0],l[1],l[2])}else if(t.includes("rgb")){const l=t.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(a=>a!=="").map((a,s)=>s>2?Number.parseFloat(a):Number.parseInt(a,10));if(l.length===4?this._alpha=Number.parseFloat(l[3])*100:l.length===3&&(this._alpha=100),l.length>=3){const{h:a,s,v:r}=Yt(l[0],l[1],l[2]);n(a,s,r)}}else if(t.includes("#")){const l=t.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(l))return;let a,s,r;l.length===3?(a=Me(l[0]+l[0]),s=Me(l[1]+l[1]),r=Me(l[2]+l[2])):(l.length===6||l.length===8)&&(a=Me(l.slice(0,2)),s=Me(l.slice(2,4)),r=Me(l.slice(4,6))),l.length===8?this._alpha=Me(l.slice(6))/255*100:(l.length===3||l.length===6)&&(this._alpha=100);const{h:i,s:u,v:h}=Yt(a,s,r);n(i,u,h)}}compare(t){return Math.abs(t._hue-this._hue)<2&&Math.abs(t._saturation-this._saturation)<1&&Math.abs(t._value-this._value)<1&&Math.abs(t._alpha-this._alpha)<1}doOnChange(){const{_hue:t,_saturation:n,_value:l,_alpha:a,format:s}=this;if(this.enableAlpha)switch(s){case"hsl":{const r=Gt(t,n/100,l/100);this.value=`hsla(${t}, ${Math.round(r[1]*100)}%, ${Math.round(r[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${t}, ${Math.round(n)}%, ${Math.round(l)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${Jt(Re(t,n,l))}${pt(a*255/100)}`;break}default:{const{r,g:i,b:u}=Re(t,n,l);this.value=`rgba(${r}, ${i}, ${u}, ${this.get("alpha")/100})`}}else switch(s){case"hsl":{const r=Gt(t,n/100,l/100);this.value=`hsl(${t}, ${Math.round(r[1]*100)}%, ${Math.round(r[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${t}, ${Math.round(n)}%, ${Math.round(l)}%)`;break}case"rgb":{const{r,g:i,b:u}=Re(t,n,l);this.value=`rgb(${r}, ${i}, ${u})`;break}default:this.value=Jt(Re(t,n,l))}}}const mo=oe({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0}},setup(e){const t=he("color-predefine"),{currentColor:n}=Fe(yl),l=M(s(e.colors,e.color));le(()=>n.value,r=>{const i=new Xe;i.fromString(r),l.value.forEach(u=>{u.selected=i.compare(u)})}),sn(()=>{l.value=s(e.colors,e.color)});function a(r){e.color.fromString(e.colors[r])}function s(r,i){return r.map(u=>{const h=new Xe;return h.enableAlpha=!0,h.format="rgba",h.fromString(u),h.selected=h.value===i.value,h})}return{rgbaColors:l,handleSelect:a,ns:t}}}),go=["onClick"];function bo(e,t,n,l,a,s){return g(),H("div",{class:I(e.ns.b())},[_("div",{class:I(e.ns.e("colors"))},[(g(!0),H(se,null,ye(e.rgbaColors,(r,i)=>(g(),H("div",{key:e.colors[i],class:I([e.ns.e("color-selector"),e.ns.is("alpha",r._alpha<100),{selected:r.selected}]),onClick:u=>e.handleSelect(i)},[_("div",{style:ae({backgroundColor:r.value})},null,4)],10,go))),128))],2)],2)}var _o=$e(mo,[["render",bo],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/predefine.vue"]]);const yo=oe({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(e){const t=he("color-svpanel"),n=lt(),l=M(0),a=M(0),s=M("hsl(0, 100%, 50%)"),r=P(()=>{const h=e.color.get("hue"),T=e.color.get("value");return{hue:h,value:T}});function i(){const h=e.color.get("saturation"),T=e.color.get("value"),k=n.vnode.el,{clientWidth:z,clientHeight:V}=k;a.value=h*z/100,l.value=(100-T)*V/100,s.value=`hsl(${e.color.get("hue")}, 100%, 50%)`}function u(h){const k=n.vnode.el.getBoundingClientRect(),{clientX:z,clientY:V}=It(h);let b=z-k.left,U=V-k.top;b=Math.max(0,b),b=Math.min(b,k.width),U=Math.max(0,U),U=Math.min(U,k.height),a.value=b,l.value=U,e.color.set({saturation:b/k.width*100,value:100-U/k.height*100})}return le(()=>r.value,()=>{i()}),Pe(()=>{et(n.vnode.el,{drag:h=>{u(h)},end:h=>{u(h)}}),i()}),{cursorTop:l,cursorLeft:a,background:s,colorValue:r,handleDrag:u,update:i,ns:t}}}),ko=_("div",null,null,-1),Co=[ko];function wo(e,t,n,l,a,s){return g(),H("div",{class:I(e.ns.b()),style:ae({backgroundColor:e.background})},[_("div",{class:I(e.ns.e("white"))},null,2),_("div",{class:I(e.ns.e("black"))},null,2),_("div",{class:I(e.ns.e("cursor")),style:ae({top:e.cursorTop+"px",left:e.cursorLeft+"px"})},Co,6)],6)}var $o=$e(yo,[["render",wo],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/sv-panel.vue"]]);const xo=["id","aria-label","aria-labelledby","aria-description","tabindex","onKeydown"],So=oe({name:"ElColorPicker"}),Eo=oe({...So,props:co,emits:po,setup(e,{expose:t,emit:n}){const l=e,{t:a}=Mt(),s=he("color"),{formItem:r}=ul(),i=cl(),u=Al(),{inputId:h,isLabeledByFormItem:T}=Fl(l,{formItemContext:r}),k=M(),z=M(),V=M(),b=M();let U=!0;const x=Ze(new Xe({enableAlpha:l.showAlpha,format:l.colorFormat||"",value:l.modelValue})),d=M(!1),$=M(!1),y=M(""),J=P(()=>!l.modelValue&&!$.value?"transparent":re(x,l.showAlpha)),Y=P(()=>!l.modelValue&&!$.value?"":x.value),S=P(()=>T.value?void 0:l.label||a("el.colorpicker.defaultLabel")),O=P(()=>T.value?r==null?void 0:r.labelId:void 0),X=P(()=>[s.b("picker"),s.is("disabled",u.value),s.bm("picker",i.value)]);function re(N,q){if(!(N instanceof Xe))throw new TypeError("color should be instance of _color Class");const{r:B,g:ve,b:pe}=N.toRgb();return q?`rgba(${B}, ${ve}, ${pe}, ${N.get("alpha")/100})`:`rgb(${B}, ${ve}, ${pe})`}function de(N){d.value=N}const ie=vl(de,100);function C(){u.value||de(!0)}function L(){ie(!1),D()}function D(){Ce(()=>{l.modelValue?x.fromString(l.modelValue):(x.value="",Ce(()=>{$.value=!1}))})}function R(){u.value||ie(!d.value)}function W(){x.fromString(y.value)}function E(){const N=x.value;n(Ie,N),n("change",N),l.validateEvent&&(r==null||r.validate("change").catch(q=>xt())),ie(!1),Ce(()=>{const q=new Xe({enableAlpha:l.showAlpha,format:l.colorFormat||"",value:l.modelValue});x.compare(q)||D()})}function m(){ie(!1),n(Ie,null),n("change",null),l.modelValue!==null&&l.validateEvent&&(r==null||r.validate("change").catch(N=>xt())),D()}return Pe(()=>{l.modelValue&&(y.value=Y.value)}),le(()=>l.modelValue,N=>{N?N&&N!==x.value&&(U=!1,x.fromString(N)):$.value=!1}),le(()=>Y.value,N=>{y.value=N,U&&n("activeChange",N),U=!0}),le(()=>x.value,()=>{!l.modelValue&&!$.value&&($.value=!0)}),le(()=>d.value,()=>{Ce(()=>{var N,q,B;(N=k.value)==null||N.update(),(q=z.value)==null||q.update(),(B=V.value)==null||B.update()})}),Ft(yl,{currentColor:Y}),t({color:x,show:C,hide:L}),(N,q)=>(g(),K(o(Je),{ref_key:"popper",ref:b,visible:d.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[o(s).be("picker","panel"),o(s).b("dropdown"),N.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",transition:`${o(s).namespace.value}-zoom-in-top`,persistent:""},{content:v(()=>[ce((g(),H("div",null,[_("div",{class:I(o(s).be("dropdown","main-wrapper"))},[p(uo,{ref_key:"hue",ref:k,class:"hue-slider",color:o(x),vertical:""},null,8,["color"]),p($o,{ref_key:"sv",ref:z,color:o(x)},null,8,["color"])],2),N.showAlpha?(g(),K(so,{key:0,ref_key:"alpha",ref:V,color:o(x)},null,8,["color"])):te("v-if",!0),N.predefine?(g(),K(_o,{key:1,ref:"predefine",color:o(x),colors:N.predefine},null,8,["color","colors"])):te("v-if",!0),_("div",{class:I(o(s).be("dropdown","btns"))},[_("span",{class:I(o(s).be("dropdown","value"))},[p(o(tt),{modelValue:y.value,"onUpdate:modelValue":q[0]||(q[0]=B=>y.value=B),"validate-event":!1,size:"small",onKeyup:St(W,["enter"]),onBlur:W},null,8,["modelValue","onKeyup"])],2),p(o(Ye),{class:I(o(s).be("dropdown","link-btn")),text:"",size:"small",onClick:m},{default:v(()=>[be(_e(o(a)("el.colorpicker.clear")),1)]),_:1},8,["class"]),p(o(Ye),{plain:"",size:"small",class:I(o(s).be("dropdown","btn")),onClick:E},{default:v(()=>[be(_e(o(a)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)])),[[o(ml),L]])]),default:v(()=>[_("div",{id:o(h),class:I(o(X)),role:"button","aria-label":o(S),"aria-labelledby":o(O),"aria-description":o(a)("el.colorpicker.description",{color:N.modelValue||""}),tabindex:N.tabindex,onKeydown:St(R,["enter"])},[o(u)?(g(),H("div",{key:0,class:I(o(s).be("picker","mask"))},null,2)):te("v-if",!0),_("div",{class:I(o(s).be("picker","trigger")),onClick:R},[_("span",{class:I([o(s).be("picker","color"),o(s).is("alpha",N.showAlpha)])},[_("span",{class:I(o(s).be("picker","color-inner")),style:ae({backgroundColor:o(J)})},[ce(p(o(Ve),{class:I([o(s).be("picker","icon"),o(s).is("icon-arrow-down")])},{default:v(()=>[p(o(dl))]),_:1},8,["class"]),[[we,N.modelValue||$.value]]),!N.modelValue&&!$.value?(g(),K(o(Ve),{key:0,class:I([o(s).be("picker","empty"),o(s).is("icon-close")])},{default:v(()=>[p(o(Il))]),_:1},8,["class"])):te("v-if",!0)],6)],2)],2)],42,xo)]),_:1},8,["visible","popper-class","transition"]))}});var No=$e(Eo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/color-picker.vue"]]);const To=pl(No),Mo=He({animated:{type:Boolean,default:!1},count:{type:Number,default:1},rows:{type:Number,default:3},loading:{type:Boolean,default:!0},throttle:{type:Number}}),Vo=He({variant:{type:String,values:["circle","rect","h1","h3","text","caption","p","image","button"],default:"text"}}),Ao=oe({name:"ElSkeletonItem"}),Fo=oe({...Ao,props:Vo,setup(e){const t=he("skeleton");return(n,l)=>(g(),H("div",{class:I([o(t).e("item"),o(t).e(n.variant)])},[n.variant==="image"?(g(),K(o(Pl),{key:0})):te("v-if",!0)],2))}});var ft=$e(Fo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/skeleton/src/skeleton-item.vue"]]);const Io=oe({name:"ElSkeleton"}),Po=oe({...Io,props:Mo,setup(e,{expose:t}){const n=e,l=he("skeleton"),a=xn(rn(n,"loading"),n.throttle);return t({uiLoading:a}),(s,r)=>o(a)?(g(),H("div",Ut({key:0,class:[o(l).b(),o(l).is("animated",s.animated)]},s.$attrs),[(g(!0),H(se,null,ye(s.count,i=>(g(),H(se,{key:i},[s.loading?Nt(s.$slots,"template",{key:i},()=>[p(ft,{class:I(o(l).is("first")),variant:"p"},null,8,["class"]),(g(!0),H(se,null,ye(s.rows,u=>(g(),K(ft,{key:u,class:I([o(l).e("paragraph"),o(l).is("last",u===s.rows&&s.rows>1)]),variant:"p"},null,8,["class"]))),128))]):te("v-if",!0)],64))),128))],16)):Nt(s.$slots,"default",un(Ut({key:1},s.$attrs)))}});var Lo=$e(Po,[["__file","/home/runner/work/element-plus/element-plus/packages/components/skeleton/src/skeleton.vue"]]);const Oo=pl(Lo,{SkeletonItem:ft}),zo=Ll(ft);const Do=_("i",{class:"iconfont icon-delete text-12px text-muted"},null,-1),Bo=oe({__name:"MoreUrls",setup(e){const t=Fe("webForm"),n=l=>{t.value.urls&&t.value.urls.splice(l,1)};return(l,a)=>{const s=tt,r=Ye,i=At;return g(!0),H(se,null,ye(o(t).urls,(u,h)=>(g(),K(i,{key:h,prop:"urls."+h+".value","inline-message":!0,label:"",class:"relative",rules:[{required:!0,message:"网址不能为空",trigger:"blur"},{type:"url",message:"请输入正确的网址",trigger:"blur"}]},{default:v(()=>[p(s,{class:"url-item",modelValue:u.value,"onUpdate:modelValue":T=>u.value=T,placeholder:"请输入网站地址"},null,8,["modelValue","onUpdate:modelValue"]),p(r,{class:"absolute right-5px top-5px rounded-6px! h-22px w-22px!",size:"small",circle:"",onClick:T=>n(h)},{default:v(()=>[Do]),_:2},1032,["onClick"])]),_:2},1032,["prop"]))),128)}}});const Ho=_("i",{class:"iconfont icon-edit text-20px text-white"},null,-1),Uo=[Ho],Wo={class:"cut-area flex h-120px mb-30px"},jo={class:"cut-area__img shrink-0 mr-4"},Ro={key:0,class:"flex relative"},Ko={key:0,class:"absolute top-0 right-0 bottom-0 left-0 rounded-full op-0 hover:bg-black/30 hover:op-100 flex-center transition-opacity-300"},qo=_("i",{class:"iconfont icon-delete text-24px text-white"},null,-1),Go=[qo],Xo={class:"cut-area__btns btns-y-group pt-1"},Jo=_("i",{class:"iconfont icon-xiguan"},null,-1),Yo=_("i",{class:"iconfont icon-zoom-in"},null,-1),Zo=_("i",{class:"iconfont icon-zoom-out"},null,-1),Qo=_("i",{class:"iconfont icon-refresh"},null,-1),ea=_("i",{class:"iconfont icon-clear"},null,-1),ta=_("i",{class:"iconfont icon-help text-muted mt-3"},null,-1),la={class:"ml-5 w-full text-center flex flex-col justify-between"},na=_("span",{class:"flex flex-col text-muted text-12px"},[_("i",{class:"iconfont text-16px icon-add mb-2"}),_("span",null,"粘贴上传")],-1),oa={class:"w-full flex"},aa=_("i",{class:"iconfont icon-cut mr-1"},null,-1),sa={class:"control-area"},ra={class:"h-120px mb-30px"},ia={class:"w-full text-center mb-4"},ua=oe({__name:"SetFavicon",props:{canFetchAvatar:{type:Boolean},oWeb:{},editMode:{}},emits:["toggleIconType"],setup(e,{expose:t,emit:n}){const l=e,{isSupported:a,open:s,sRGBHex:r}=gn();fl();const i=Fe("webForm"),u=M(!1),h=Ze(["#FF6262","#FF7F1B","#FDCD05","#98D517","#1FD88B","#50C8DA","#2792FF","#6074FF","#8480F9","#FF7BA2"]),T=E=>{i.value.icon.imageColor=E},k=E=>{i.value.icon.textColor=E},z=E=>{E==="image"?document.addEventListener("paste",W):document.removeEventListener("paste",W),n("toggleIconType",E)},V=M(null),b=M(!1),U=M(1),x=M(""),d=M(""),$=P(()=>x.value?x.value:d.value?d.value:i.value.icon.data?i.value.icon.data:l.canFetchAvatar?Ol(i.value.url):""),y={mode:"cover",outputSize:1,outputType:"png",autoCrop:!0,autoCropWidth:120,autoCropHeight:120,fixedBox:!1,fixed:!0,fixedNumber:[1,1],info:!1,infoTrue:!0,enlarge:1,canMove:!0,centerBox:!1,high:!1,maxImgSize:3e3,full:!1},J=M({}),Y=M({url:""}),S=E=>{let m=E;J.value={width:m.w+"px",height:m.h+"px",overflow:"hidden",margin:"0",backgroundColor:X,backgroundImage:O,borderRadius:"50%",zoom:64/m.w},Y.value=E},O=P(()=>i.value.icon.imageColor?"none":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC)"),X=P(()=>i.value.icon.imageColor?i.value.icon.imageColor:"transparent");le(()=>r.value,E=>{E&&(i.value.icon.imageColor=E)});const re=E=>{let m=utools.showOpenDialog({filters:[{name:"Images",extensions:["jpg","png","gif","jpeg","webp","svg"]}],properties:["openFile"]});m&&window.getBase64(m[0]).then(N=>{x.value="",b.value=!0,d.value=N})};function de(){V.value.getCropData(E=>{x.value=E}),b.value=!1}const ie=()=>{b.value=!1,d.value=""},C=()=>{var E;d.value="",x.value="",i.value.icon.imageColor=((E=l.oWeb)==null?void 0:E.icon.imageColor)||""},L=()=>{i.value.icon.data=""};le(()=>b.value,E=>{E||(Y.value.url="")});const D=()=>{i.value.icon.type==="image"&&document.addEventListener("paste",W)},R=()=>{document.removeEventListener("paste",W)},W=E=>{var N,q;if(E.preventDefault(),!E||!E.clipboardData)return;let m=(N=E.clipboardData)==null?void 0:N.getData("Text");if(m)m=m.trim(),m.startsWith("http")&&/\.(png|jpg|jpeg|gif|bmp|webp|JPG|PNG)$/.test(m)&&(b.value=!0,d.value=m),m.startsWith("<svg")&&m.endsWith("</svg>")&&(b.value=!0,d.value="data:image/svg+xml;base64,"+btoa(m));else{const B=(q=E.clipboardData)==null?void 0:q.items[0].getAsFile();if(B&&B.type.indexOf("image")!=-1){const ve=new FileReader;ve.onload=pe=>{var F;b.value=!0,d.value=(F=pe.target)==null?void 0:F.result},ve.readAsDataURL(B)}}};return le(()=>b.value,E=>{E&&(x.value="")}),t({previewStyle:J,previews:Y,isCutting:b,prevUrl:$,cutPic:x}),(E,m)=>{const N=gl,q=Je,B=Ye,ve=hn,pe=vn,F=To,A=At,ee=dn,fe=tt,xe=ql,Z=pn,me=mn;return g(),K(me,{visible:o(u),placement:"right",width:360,onShow:D,onHide:R},{reference:v(()=>[_("button",{class:"btn-tm absolute top-0 right-0 bottom-0 left-0 rounded-full op-0 hover:bg-black/30 hover:op-100 flex-center transition-opacity-300 z-2",onClick:m[0]||(m[0]=j=>u.value=!o(u))},Uo)]),default:v(()=>[p(Z,{modelValue:o(i).icon.type,"onUpdate:modelValue":m[12]||(m[12]=j=>o(i).icon.type=j),class:"edit-web-tabs mb-18px",onTabChange:z},{default:v(()=>[p(ee,{label:"图片图标",name:"image",lazy:!0},{default:v(()=>[_("div",Wo,[_("div",jo,[o(b)?(g(),K(o(bn),{key:1,ref_key:"refCropper",ref:V,style:ae({backgroundColor:o(X),backgroundImage:o(O)}),img:o($),mode:y.mode,outputSize:y.outputSize,outputType:y.outputType,autoCrop:y.autoCrop,autoCropWidth:y.autoCropWidth,autoCropHeight:y.autoCropHeight,fixedBox:y.fixedBox,fixed:y.fixed,info:y.info,infoTrue:y.infoTrue,canMove:y.canMove,centerBox:y.centerBox,fixedNumber:y.fixedNumber,enlarge:y.enlarge,high:y.high,maxImgSize:y.maxImgSize,full:y.full,onRealTime:S},null,8,["style","img","mode","outputSize","outputType","autoCrop","autoCropWidth","autoCropHeight","fixedBox","fixed","info","infoTrue","canMove","centerBox","fixedNumber","enlarge","high","maxImgSize","full"])):(g(),H("div",Ro,[p(N,{size:120,src:o($),style:ae({backgroundColor:o(i).icon.imageColor})},null,8,["src","style"]),o(i).icon.data?(g(),H("div",Ko,[p(q,{"popper-class":"tooltip",content:"删除图片",placement:"top"},{default:v(()=>[_("button",{class:"btn-tm",type:"button",onClick:L},Go)]),_:1})])):te("",!0)]))]),_("div",Xo,[p(B,{onClick:m[1]||(m[1]=()=>o(s)()),disabled:!o(a),size:"small"},{default:v(()=>[p(q,{content:"取色",placement:"right","popper-class":"tooltip py-0 px-2"},{default:v(()=>[Jo]),_:1})]),_:1},8,["disabled"]),o(b)?(g(),H(se,{key:0},[p(B,{onClick:m[2]||(m[2]=j=>{var ne;(ne=o(V))==null||ne.changeScale(.25),U.value+=1}),size:"small"},{default:v(()=>[Yo]),_:1}),p(B,{class:"rounded-b-2!",onClick:m[3]||(m[3]=j=>{var ne;(ne=o(V))==null||ne.changeScale(-.25),U.value-=1}),size:"small"},{default:v(()=>[Zo]),_:1}),p(B,{class:"mt-2! rounded-t-2!",onClick:m[4]||(m[4]=j=>{var ne;return(ne=o(V))==null?void 0:ne.refresh()}),size:"small"},{default:v(()=>[p(q,{content:"重置画布",placement:"right","popper-class":"tooltip py-0 px-2"},{default:v(()=>[Qo]),_:1})]),_:1})],64)):(g(),H(se,{key:1},[p(B,{class:"mt-1! rounded-b-2!",onClick:C,size:"small"},{default:v(()=>[p(q,{content:"清除修改",placement:"right","popper-class":"tooltip py-0 px-2"},{default:v(()=>[ea]),_:1})]),_:1}),p(q,{"popper-class":"tooltip max-w-50 py-3 pl-5",content:"图标默认调用api，经过裁剪之后将存储到本地。网页快开功能只能识别图片图标！鼠标滑过左侧大图标可以删除已裁剪的图片！"},{default:v(()=>[ta]),_:1})],64))]),_("div",la,[p(q,{"popper-class":"tooltip max-w-53 py-3 pl-5",placement:"top",content:"支持粘贴(ctrl+v)上传图片：1.本地图片文件 2.svg代码 3.网络图片地址等"},{default:v(()=>[p(B,{class:"w-full py-10 border-dashed",plain:"",onClick:re},{default:v(()=>[na]),_:1})]),_:1}),ce(p(B,{class:"ml-0!",onClick:m[5]||(m[5]=j=>b.value=!0),plain:""},{default:v(()=>[be("编辑图标")]),_:1},512),[[we,!o(b)]]),ce(_("div",oa,[p(B,{class:"px-2",status:"info",onClick:ie,plain:""},{default:v(()=>[be("取消")]),_:1}),p(B,{class:"px-2 w-full",type:"success",onClick:de},{default:v(()=>[aa,be(" 裁剪 ")]),_:1})],512),[[we,o(b)]])])]),_("div",sa,[p(A,{class:"mb-0!",prop:"icon_imageColor",label:"背景颜色"},{default:v(()=>[p(pe,{modelValue:o(i).icon.imageColor,"onUpdate:modelValue":m[6]||(m[6]=j=>o(i).icon.imageColor=j),"validate-event":!1,size:"small"},{default:v(()=>[(g(!0),H(se,null,ye(o(h),(j,ne)=>(g(),K(ve,{key:ne,label:j,style:ae({backgroundColor:j})},null,8,["label","style"]))),128))]),_:1},8,["modelValue"]),p(F,{modelValue:o(i).icon.imageColor,"onUpdate:modelValue":m[7]||(m[7]=j=>o(i).icon.imageColor=j),"validate-event":!1,size:"small",predefine:o(h),onActiveChange:T,"show-alpha":""},null,8,["modelValue","predefine"])]),_:1})])]),_:1}),p(ee,{label:"文字图标",name:"text"},{default:v(()=>[_("div",ra,[p(A,{prop:"icon_text",label:"图标文字"},{default:v(()=>[p(fe,{modelValue:o(i).icon.text,"onUpdate:modelValue":m[8]||(m[8]=j=>o(i).icon.text=j),placeholder:"请输入文字",maxlength:"10","show-word-limit":""},null,8,["modelValue"])]),_:1}),p(A,{prop:"icon.fontSize",label:"文字大小"},{default:v(()=>[p(xe,{modelValue:o(i).icon.fontSize,"onUpdate:modelValue":m[9]||(m[9]=j=>o(i).icon.fontSize=j),modelModifiers:{number:!0},size:"small",min:8,max:30},null,8,["modelValue"])]),_:1})]),p(A,{class:"mb-0!",prop:"icon_textColor",label:"背景颜色"},{default:v(()=>[p(pe,{modelValue:o(i).icon.textColor,"onUpdate:modelValue":m[10]||(m[10]=j=>o(i).icon.textColor=j),"validate-event":!1,size:"small"},{default:v(()=>[(g(!0),H(se,null,ye(o(h),(j,ne)=>(g(),K(ve,{key:ne,label:j,style:ae({backgroundColor:j})},null,8,["label","style"]))),128))]),_:1},8,["modelValue"]),p(F,{modelValue:o(i).icon.textColor,"onUpdate:modelValue":m[11]||(m[11]=j=>o(i).icon.textColor=j),"validate-event":!1,size:"small",predefine:o(h),onActiveChange:k,"show-alpha":""},null,8,["modelValue","predefine"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),_("div",ia,[p(B,{onClick:m[13]||(m[13]=j=>(C(),u.value=!1))},{default:v(()=>[be("取消")]),_:1}),p(B,{type:"primary",onClick:m[14]||(m[14]=j=>u.value=!1),disabled:o(b)},{default:v(()=>[be("下一步")]),_:1},8,["disabled"])])]),_:1},8,["visible"])}}});function ca(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Lt=ca,da=typeof it=="object"&&it&&it.Object===Object&&it,pa=da,fa=pa,ha=typeof self=="object"&&self&&self.Object===Object&&self,va=fa||ha||Function("return this")(),kl=va,ma=kl,ga=function(){return ma.Date.now()},ba=ga,_a=/\s/;function ya(e){for(var t=e.length;t--&&_a.test(e.charAt(t)););return t}var ka=ya,Ca=ka,wa=/^\s+/;function $a(e){return e&&e.slice(0,Ca(e)+1).replace(wa,"")}var xa=$a,Sa=kl,Ea=Sa.Symbol,Cl=Ea,Zt=Cl,wl=Object.prototype,Na=wl.hasOwnProperty,Ta=wl.toString,Ke=Zt?Zt.toStringTag:void 0;function Ma(e){var t=Na.call(e,Ke),n=e[Ke];try{e[Ke]=void 0;var l=!0}catch{}var a=Ta.call(e);return l&&(t?e[Ke]=n:delete e[Ke]),a}var Va=Ma,Aa=Object.prototype,Fa=Aa.toString;function Ia(e){return Fa.call(e)}var Pa=Ia,Qt=Cl,La=Va,Oa=Pa,za="[object Null]",Da="[object Undefined]",el=Qt?Qt.toStringTag:void 0;function Ba(e){return e==null?e===void 0?Da:za:el&&el in Object(e)?La(e):Oa(e)}var Ha=Ba;function Ua(e){return e!=null&&typeof e=="object"}var Wa=Ua,ja=Ha,Ra=Wa,Ka="[object Symbol]";function qa(e){return typeof e=="symbol"||Ra(e)&&ja(e)==Ka}var Ga=qa,Xa=xa,tl=Lt,Ja=Ga,ll=0/0,Ya=/^[-+]0x[0-9a-f]+$/i,Za=/^0b[01]+$/i,Qa=/^0o[0-7]+$/i,es=parseInt;function ts(e){if(typeof e=="number")return e;if(Ja(e))return ll;if(tl(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=tl(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Xa(e);var n=Za.test(e);return n||Qa.test(e)?es(e.slice(2),n?2:8):Ya.test(e)?ll:+e}var ls=ts,ns=Lt,wt=ba,nl=ls,os="Expected a function",as=Math.max,ss=Math.min;function rs(e,t,n){var l,a,s,r,i,u,h=0,T=!1,k=!1,z=!0;if(typeof e!="function")throw new TypeError(os);t=nl(t)||0,ns(n)&&(T=!!n.leading,k="maxWait"in n,s=k?as(nl(n.maxWait)||0,t):s,z="trailing"in n?!!n.trailing:z);function V(S){var O=l,X=a;return l=a=void 0,h=S,r=e.apply(X,O),r}function b(S){return h=S,i=setTimeout(d,t),T?V(S):r}function U(S){var O=S-u,X=S-h,re=t-O;return k?ss(re,s-X):re}function x(S){var O=S-u,X=S-h;return u===void 0||O>=t||O<0||k&&X>=s}function d(){var S=wt();if(x(S))return $(S);i=setTimeout(d,U(S))}function $(S){return i=void 0,z&&l?V(S):(l=a=void 0,r)}function y(){i!==void 0&&clearTimeout(i),h=0,l=u=a=i=void 0}function J(){return i===void 0?r:$(wt())}function Y(){var S=wt(),O=x(S);if(l=arguments,a=this,u=S,O){if(i===void 0)return b(u);if(k)return clearTimeout(i),i=setTimeout(d,t),V(u)}return i===void 0&&(i=setTimeout(d,t)),r}return Y.cancel=y,Y.flush=J,Y}var is=rs,us=is,cs=Lt,ds="Expected a function";function ps(e,t,n){var l=!0,a=!0;if(typeof e!="function")throw new TypeError(ds);return cs(n)&&(l="leading"in n?!!n.leading:l,a="trailing"in n?!!n.trailing:a),us(e,t,{leading:l,maxWait:t,trailing:a})}var fs=ps;const hs=zl(fs),vs=_("span",{class:"rounded-full flex-center w-9 h-9 mr-2",style:{"background-color":"var(--el-color-primary-light-9)"}},[_("i",{class:"iconfont icon-card text-20px",style:{color:"var(--el-color-primary)"}})],-1),ms={class:"el-dialog__title"},gs=_("i",{class:"iconfont icon-add text-12px text-muted fw-600"},null,-1),bs={class:"web-edit-card flex-y-center p-5 min-h-102px"},_s={class:"w-full"},ys=["src"],ks={class:"w-full"},Cs={class:"set-input-height flex justify-between mt-18px"},ws={class:"flex-y-center mr-auto"},$s=_("span",{class:"ml-2"},"保存 Cookie",-1),xs=_("i",{class:"iconfont icon-help text-muted ml-3"},null,-1),Ss=_("span",{class:"ml-2"},"网页快开",-1),Es=_("i",{class:"iconfont icon-help text-muted ml-3"},null,-1),Ns={class:"ml-auto flex-y-center"},Ts=_("i",{class:"iconfont icon-help text-muted ml-3"},null,-1),Ms={class:"dialog-footer flex-center"},Ws=oe({__name:"WebModal",setup(e){const t=Fe("showWebModal"),n=fl(),l=Dl(),a=Bl(),{eCatId:s,theId:r,editMode:i}=cn(a),u=[{_id:"cat@default",label:"收集箱",children:[]}],h=P(()=>[...l.category,...u]),T=P({get:()=>d.value.browser===0?"default":d.value.browser===1?"system":d.value.browser===2?"inner":d.value.browser,set:F=>{d.value.browser=F}}),k=P(()=>T.value==="inner"),z=[{label:"默认设置",value:"default"},{label:"系统浏览器",value:"system"},{label:"内置浏览器",value:"inner"},{label:"Chrome",value:"chrome",icon:"i-logos:chrome"},{label:"Chrome（无痕）",value:"chrome-incognito",icon:"i-logos:chrome"},{label:"Edge",value:"edge",icon:"i-logos:microsoft-edge"},{label:"Edge（无痕）",value:"edge-inprivate",icon:"i-logos:microsoft-edge"},{label:"Safari",value:"safari",icon:"i-logos:safari"},{label:"Firefox",value:"firefox",icon:"i-logos:firefox"},{label:"IE",value:"ie",icon:"i-logos:internetexplorer"}],V=M(!0),b=M(null),U={multiple:!0,emitPath:!1,value:"_id",expandTrigger:"hover"},x={_id:"",catIds:["cat@default"],title:"",url:"",desc:"",isFly:!1,isOften:!1,urls:[],browser:"default",icon:{type:"image",text:"",fontSize:16,textColor:"#8480F9",imageColor:"",faviconId:"",data:""}},d=M(JSON.parse(JSON.stringify(x)));Ft("webForm",d);let $;const y=Fe("outaddUrl"),J=()=>{i.value==="add"?d.value.catIds=[s.value]:i.value==="append"?d.value.catIds=[s.value]:i.value==="edit"?r.value&&($=utools.db.get(r.value),d.value={...$}):d.value.url=y.value,d.value.browser||(d.value.browser=0)},Y=()=>{var F;((F=window.features)==null?void 0:F.code)==="addweb"&&i.value==="outadd"&&(d.value.url=y.value)},S=M(),O=M(!1),de=Ze({url:[{required:!0,message:"网址不能为空",trigger:"blur"},{validator:(F,A,ee)=>{if(i.value==="edit"&&($==null?void 0:$.url)===A){ee();return}utools.db.allDocs("web_").some(Z=>Z.url===A)&&(i.value==="add"||i.value==="outadd")?ee(new Error("您已经添加过该网址了")):ee()},trigger:"blur"}],title:[{required:!0,message:"网站名称不能为空",trigger:"blur"},{max:20,message:"标题太长了",trigger:"blur"}],catIds:[{type:"array",required:!0,message:"请选择分类",trigger:"change"},{validator:(F,A,ee)=>{A.toString().length<6||A.toString().includes("cat@dustbin")?ee(new Error("请选择分类")):ee()},trigger:"change"}]}),ie=()=>{C(S.value),d.value=JSON.parse(JSON.stringify(x)),$=JSON.parse(JSON.stringify(x)),O.value=!1},C=F=>{F&&F.resetFields()},L=F=>{d.value.icon.type=F},D=M(!1),R=/^(((ht|f)tps?):\/\/)?[\w-]+(\.[\w-]+)+([\w.,@?^=%&:{}/~+!#-]*[\w@?^=%&{}/~+!#-])?$/,W=hs(async F=>{const A=new URL(F).origin,{title:ee,desc:fe}=await E(A);d.value.title=ee,d.value.desc=fe},2e3);le(()=>d.value.url,async F=>{if(F&&/^(http|https|ftp|chrome|edge|mailto|file|ws|wss|irc|git|svn|utools):\/\//.test(F))if(O.value=!0,R.test(F)){if(D.value=!0,i.value!="edit")try{await W(F)}catch{}}else D.value=!1;else D.value=!1,O.value=!1});const E=async F=>{var ne;let A="",ee="";const fe=new URL(F).origin,Z=(await Gl.get(fe,{responseType:"text"})).data;(ne=S.value)==null||ne.clearValidate("title");const me=Z.match(/<title>([\s\S]+?)<\/title>/i)[1]||"",j=["-","_","—","|",":","/"];if(me){const Ne=Xl(j,me);A=Ne.title,ee=Ne.desc}return{title:A,desc:ee}};le(()=>d.value.title,F=>{(F==null?void 0:F.length)>2&&d.value.icon.text.length===0&&(d.value.icon.text=F.slice(0,2))});let m=null;const N=(F,A)=>{A&&(m!=null&&clearTimeout(m),A.validate(ee=>{if(ee)m=setTimeout(()=>{q()},150);else return!1}))},q=()=>{var A;(A=b.value)!=null&&A.cutPic&&(d.value.icon.data=b.value.cutPic);const F=JSON.parse(JSON.stringify(d.value));i.value==="edit"?n.updateWeb(F,s.value):i.value==="append"?(F._id="web_"+new Date().getTime(),n.appendWeb(F,r.value)):(F._id="web_"+new Date().getTime(),n.addWeb(F)),n.setFly(F),t.value=!1},B=P(()=>{let F=[d.value.url];return d.value.urls&&(F=F.concat(d.value.urls.map(A=>A.value))),d.value.isFly&&F.some(A=>A.includes("{q}"))?!0:(d.value.isOverall=!1,!1)}),ve=F=>{console.log("🚀 ~ removeCookie ~ id:",F),F&&(utools.db.remove("cookie@"+F),n.changeMessage("cookies已删除！","success"))},pe=()=>{d.value.urls||(d.value.urls=[]),d.value.urls.push({value:""})};return(F,A)=>{const ee=Ye,fe=Je,xe=tt,Z=At,me=Bo,j=zo,ne=gl,Ne=Oo,ht=Qn,nt=Jl,vt=Yl,Le=Zl,mt=Wl,gt=hl,Te=jl,bt=Hl;return g(),K(bt,{modelValue:o(t),"onUpdate:modelValue":A[11]||(A[11]=G=>Et(t)?t.value=G:null),class:"web-modal",width:"460px","append-to-body":!0,"show-close":!1,"destroy-on-close":!0,"close-on-click-modal":o(V),"close-on-press-escape":o(V),"align-center":!0,onOpen:J,onOpened:Y,onClosed:ie},{header:v(()=>[vs,_("span",ms,_e(o(i)=="edit"?"编辑卡片":"添加卡片"),1),p(fe,{content:"打开多个网页",placement:"top"},{default:v(()=>[p(ee,{class:"ml-auto -mr-4 rounded-4!",size:"small",circle:"",onClick:pe},{default:v(()=>[gs]),_:1})]),_:1})]),footer:v(()=>[ce(_("div",Ms,[p(ee,{onClick:A[9]||(A[9]=G=>t.value=!1)},{default:v(()=>[be("取消")]),_:1}),p(ee,{type:"primary",onClick:A[10]||(A[10]=G=>N(G,o(S)))},{default:v(()=>[be(" 保存 ")]),_:1})],512),[[we,o(O)]])]),default:v(()=>[p(Te,{ref_key:"refWebForm",ref:S,model:o(d),rules:o(de),"label-position":"top","label-width":"100px"},{default:v(()=>[p(Z,{prop:"url",label:"","inline-message":!0},{default:v(()=>[p(xe,{class:"shadow-sm rounded-10px!",size:"large",modelValue:o(d).url,"onUpdate:modelValue":A[0]||(A[0]=G=>o(d).url=G),placeholder:"请输入网站地址"},null,8,["modelValue"])]),_:1}),p(me),_("div",bs,[p(Ne,{class:"flex-y-center",loading:!o(O)},{template:v(()=>[p(j,{variant:"image",class:"mr-5 shrink-0",style:{width:"64px",height:"64px","border-radius":"60px"}}),_("div",_s,[p(j,{variant:"text",style:{width:"70%",height:"16px","margin-bottom":"10px"}}),p(j,{variant:"text",style:{width:"100%",height:"16px"}})])]),default:v(()=>{var G,Oe,ot,at,st,Ue,We,rt,ze,je;return[_("div",{class:I(["w-64px h-64px shrink-0 flex mr-3 cursor-pointer relative",{"ripple rounded-full":o(i)==="add"}])},[o(d).icon.type==="image"&&((G=o(b))!=null&&G.isCutting)?(g(),H("div",{class:"prev-box",style:ae((Oe=o(b))==null?void 0:Oe.previewStyle),key:"1"},[_("div",{style:ae((at=(ot=o(b))==null?void 0:ot.previews)==null?void 0:at.div)},[_("img",{class:"max-w-none",src:(Ue=(st=o(b))==null?void 0:st.previews)==null?void 0:Ue.url,style:ae((rt=(We=o(b))==null?void 0:We.previews)==null?void 0:rt.img)},null,12,ys)],4)],4)):te("",!0),o(d).icon.type==="image"&&!((ze=o(b))!=null&&ze.isCutting)?(g(),K(ne,{class:"shrink-0",size:64,src:o(O)?(je=o(b))==null?void 0:je.prevUrl:"",style:ae({backgroundColor:o(d).icon.imageColor}),key:"2"},null,8,["src","style"])):te("",!0),o(d).icon.type==="text"?(g(),K(ne,{size:64,style:ae({fontSize:o(d).icon.fontSize/.66+"px",backgroundColor:o(d).icon.textColor}),key:"3"},{default:v(()=>[be(_e(o(d).icon.text),1)]),_:1},8,["style"])):te("",!0),p(ua,{ref_key:"refSetFavicon",ref:b,onToggleIconType:L,canFetchAvatar:o(D),oWeb:o($),editMode:o(i)},null,8,["canFetchAvatar","oWeb","editMode"])],2),_("div",ks,[p(Z,{class:"mb-0.5!",prop:"title",label:""},{default:v(()=>[p(xe,{class:"fw-500",modelValue:o(d).title,"onUpdate:modelValue":A[1]||(A[1]=c=>o(d).title=c),placeholder:"请输入网站名称",maxlength:"20","show-word-limit":""},null,8,["modelValue"])]),_:1}),p(Z,{class:"mb-0!",prop:"desc",label:""},{default:v(()=>[p(xe,{modelValue:o(d).desc,"onUpdate:modelValue":A[2]||(A[2]=c=>o(d).desc=c),placeholder:"请输入网站简介",maxlength:"60",type:"textarea",autosize:"",clearable:""},null,8,["modelValue"])]),_:1})])]}),_:1},8,["loading"])]),_("div",Cs,[ce(p(Z,{class:"choose-cats mb-2! w-full",prop:"catIds",label:"所在分类","label-width":90,"inline-message":!0},{default:v(()=>[(g(),K(ht,{class:"w-full rounded-10px shadow-sm",modelValue:o(d).catIds,"onUpdate:modelValue":A[3]||(A[3]=G=>o(d).catIds=G),props:U,options:o(h),"tag-type":"info",placeholder:"请选择分类...",clearable:"",key:o(d).url},null,8,["modelValue","options"]))]),_:1},512),[[we,o(O)]]),ce(p(Z,{class:"mb-2! ml-2",prop:"browser",label:"打开方式","inline-message":!0},{default:v(()=>[p(vt,{modelValue:o(T),"onUpdate:modelValue":A[4]||(A[4]=G=>Et(T)?T.value=G:null),class:"rounded-10px shadow-sm",placeholder:"打开方式"},{default:v(()=>[(g(),H(se,null,ye(z,G=>p(nt,{key:G.value,label:G.label,value:G.value,class:"flex-y-center gap-3"},{default:v(()=>[G.icon?(g(),H("i",{key:0,class:I([G.icon,"flex w-5 h-5"])},null,2)):te("",!0),_("span",null,_e(G.label),1)]),_:2},1032,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1},512),[[we,o(O)]])]),o(k)?ce((g(),K(Z,{key:0,class:"pb-2! mb-2! flex-y-center border-b border-dotted bo-c",prop:"browser",label:"","inline-message":!0},{default:v(()=>[_("div",ws,[p(Le,{modelValue:o(d).isCookie,"onUpdate:modelValue":A[5]||(A[5]=G=>o(d).isCookie=G),size:"small"},null,8,["modelValue"]),$s,p(fe,{"popper-class":"tooltip max-w-70 py-3 pl-5",content:"每次打开网页会将cookie加密后永久存储到utools本地数据库！注意：1、部分非cookie方式认证的网页，无法保存登录信息。2、网站登录后需要重新进入一次才能保存登录状态。3、部分网站原因，需要进入两次才能读取到cookie，例如奇葩的csdn"},{default:v(()=>[xs]),_:1})]),p(mt,{"confirm-button-text":"删吧",width:240,title:"删吗？重启utools后生效",onConfirm:A[6]||(A[6]=G=>ve(o(d)._id))},{reference:v(()=>[p(ee,{size:"small"},{default:v(()=>[be("删除 Cookies")]),_:1})]),_:1})]),_:1},512)),[[we,o(O)]]):te("",!0),ce(p(Z,{class:"flex-y-center",prop:"isFly",label:"","inline-message":!0},{default:v(()=>[p(Le,{modelValue:o(d).isFly,"onUpdate:modelValue":A[7]||(A[7]=G=>o(d).isFly=G),size:"small"},null,8,["modelValue"]),Ss,p(fe,{"popper-class":"tooltip max-w-70 py-3 pl-5",content:"支持从主搜索框输入网站名称(拼音/简拼)直接打开网页。若要搜索网页，只需在网址中将关键词修改为“{q}”即可。例如 https://yuanliao.info/?q={q}。如果插件勾选 “退出到后台立即结束” 该功能将会闪退失效！"},{default:v(()=>[Es]),_:1}),ce(_("div",Ns,[p(gt,{modelValue:o(d).isOverall,"onUpdate:modelValue":A[8]||(A[8]=G=>o(d).isOverall=G),label:"通用搜索"},null,8,["modelValue"]),p(fe,{"popper-class":"tooltip max-w-70 py-3 pl-5",content:"utools主搜索框输入任意内容都将出现该搜索，可搭配超级面板、全局快捷键等使用"},{default:v(()=>[Ts]),_:1})],512),[[we,o(B)]])]),_:1},512),[[we,o(O)]])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","close-on-click-modal","close-on-press-escape"])}}});export{Ws as default};
