import{j as h,A as T,aj as X,u as N,ap as x,bc as _,an as D,aq as V,f as z,g as L,bd as p}from"./index-4d792b2f.js";import{d as A,e as U,q as $,L as j,aB as q,w as F,o as G,N as v,f as K,W as J,O as k,s as Q}from"./vue-5f6c84d3.js";let m;const R=e=>{var o;if(!h)return 0;if(m!==void 0)return m;const t=document.createElement("div");t.className=`${e}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const s=t.offsetWidth;t.style.overflow="scroll";const a=document.createElement("div");a.style.width="100%",t.appendChild(a);const l=a.offsetWidth;return(o=t.parentNode)==null||o.removeChild(t),m=s-l,m};function le(e,o){if(!h)return;if(!o){e.scrollTop=0;return}const t=[];let s=o.offsetParent;for(;s!==null&&e!==s&&e.contains(s);)t.push(s),s=s.offsetParent;const a=o.offsetTop+t.reduce((u,i)=>u+i.offsetTop,0),l=a+o.offsetHeight,n=e.scrollTop,c=n+e.clientHeight;a<n?e.scrollTop=a:l>c&&(e.scrollTop=l-e.clientHeight)}const ce="update:modelValue",ue="change",ie="input",de=(e,o,t)=>{let s={offsetX:0,offsetY:0};const a=c=>{const u=c.clientX,i=c.clientY,{offsetX:d,offsetY:f}=s,r=e.value.getBoundingClientRect(),y=r.left,w=r.top,S=r.width,O=r.height,P=document.documentElement.clientWidth,H=document.documentElement.clientHeight,W=-y+d,Y=-w+f,B=P-y-S+d,I=H-w-O+f,g=b=>{const C=Math.min(Math.max(d+b.clientX-u,W),B),M=Math.min(Math.max(f+b.clientY-i,Y),I);s={offsetX:C,offsetY:M},e.value.style.transform=`translate(${T(C)}, ${T(M)})`},E=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",E)};document.addEventListener("mousemove",g),document.addEventListener("mouseup",E)},l=()=>{o.value&&e.value&&o.value.addEventListener("mousedown",a)},n=()=>{o.value&&e.value&&o.value.removeEventListener("mousedown",a)};A(()=>{U(()=>{t.value?l():n()})}),$(()=>{n()})},re=(e,o={})=>{j(e)||X("[useLockscreen]","You need to pass a ref param to this function");const t=o.ns||N("popup"),s=q(()=>t.bm("parent","hidden"));if(!h||x(document.body,s.value))return;let a=0,l=!1,n="0";const c=()=>{setTimeout(()=>{V(document==null?void 0:document.body,s.value),l&&document&&(document.body.style.width=n)},200)};F(e,u=>{if(!u){c();return}l=!x(document.body,s.value),l&&(n=document.body.style.width),a=R(t.namespace.value);const i=document.documentElement.clientHeight<document.body.scrollHeight,d=_(document.body,"overflowY");a>0&&(i||d==="scroll")&&l&&(document.body.style.width=`calc(100% - ${a}px)`),D(document.body,s.value)}),G(()=>c())},Z=e=>{if(!e)return{onClick:v,onMousedown:v,onMouseup:v};let o=!1,t=!1;return{onClick:n=>{o&&t&&e(n),o=t=!1},onMousedown:n=>{o=n.target===n.currentTarget},onMouseup:n=>{t=n.target===n.currentTarget}}},ee=z({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:L([String,Array,Object])},zIndex:{type:L([String,Number])}}),te={click:e=>e instanceof MouseEvent},oe="overlay";var se=K({name:"ElOverlay",props:ee,emits:te,setup(e,{slots:o,emit:t}){const s=N(oe),a=u=>{t("click",u)},{onClick:l,onMousedown:n,onMouseup:c}=Z(e.customMaskEvent?void 0:a);return()=>e.mask?J("div",{class:[s.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:l,onMousedown:n,onMouseup:c},[k(o,"default")],p.STYLE|p.CLASS|p.PROPS,["onClick","onMouseup","onMousedown"]):Q("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[k(o,"default")])}});const me=se;export{ue as C,me as E,ie as I,ce as U,re as a,Z as b,R as g,le as s,de as u};
