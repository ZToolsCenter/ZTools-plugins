(function(v){var l=typeof window=="object"&&!!window.document,y=l?window:Object,p=y.Recorder,d=p.i18n;v(p,d,d.$T,l)})(function(v,l,y,p){v.prototype.enc_wav={stable:!0,fast:!0,getTestMsg:function(){return y("gPSE::支持位数8位、16位（填在比特率里面），采样率取值无限制；此编码器仅在pcm数据前加了一个44字节的wav头，编码出来的16位wav文件去掉开头的44字节即可得到pcm（注：其他wav编码器可能不是44字节）")}};var d=function(e){var r=e.bitRate,f=r==8?8:16;r!=f&&v.CLog(y("wyw9::WAV Info: 不支持{1}位，已更新成{2}位",0,r,f),3),e.bitRate=f};v.prototype.wav=function(e,r,f){var c=this,s=c.set;d(s);var u=e.length,g=s.sampleRate,w=s.bitRate,n=u*(w/8),o=v.wav_header(1,1,g,w,n),i=o.length,t=new Uint8Array(i+n);if(t.set(o),w==8)for(var a=0;a<u;a++){var b=(e[a]>>8)+128;t[i++]=b}else t=new Int16Array(t.buffer),t.set(e,i/2);r(t.buffer,"audio/wav")},v.wav_header=function(e,r,f,c,s){var u=e==1?0:2,g=new ArrayBuffer(44+u),w=new DataView(g),n=0,o=function(a){for(var b=0;b<a.length;b++,n++)w.setUint8(n,a.charCodeAt(b))},i=function(a){w.setUint16(n,a,!0),n+=2},t=function(a){w.setUint32(n,a,!0),n+=4};return o("RIFF"),t(36+u+s),o("WAVE"),o("fmt "),t(16+u),i(e),i(r),t(f),t(f*(r*c/8)),i(r*c/8),i(c),e!=1&&i(0),o("data"),t(s),new Uint8Array(g)}});
