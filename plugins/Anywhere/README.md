# [Anywhere（点击访问项目原地址）](https://github.com/Komorebi-yaodong/Anywhere)

**你的智能快捷AI助手，随时随地，便捷召唤AI（支持MCP）！**

Anywhere，一款功能强大、高效实用的AI助手，旨在为你提供卓越的AI服务体验。无论是日常学习、工作、创意探索，还是实现划词翻译、变量名命名、OCR、文件总结、音频转录，甚至AI绘图，它都能成为你的得力助手。

同时，Anywhere 也可作为AI服务商的集成平台，或个人提示词的理想存储与管理工具。

---

## 🚀 快速上手与体验

通过以下方式，你可以立即免费体验Anywhere的强大功能：

1. **AI Studio（Google免费提供Gemini API，推荐）**

   * 访问[https://aistudio.google.com/apikey](https://aistudio.google.com/apikey)申请你的API密钥
   * 在Anywhere应用中填入URL，使用gemini官方url `https://generativelanguage.googleapis.com/v1beta/openai`或者使用作者提供的中转接口 `https://gemini-oai.141277.xyz/v1`、`https://gemini-oai-cf.141277.xyz/v1`（备用接口）。
   * 在Anywhere应用中填入KEY：`你的密钥`
   * **模型后缀功能**：在手动添加模型时，为模型名称增加后缀以启用特殊功能（需中转站支持）：
     * `:search` - 联网搜索模型（调用Google搜索）
     * `:url` - 网页读取模型（读取用户输入的网页）
     * `:execode` - 代码执行模型（执行代码）
     * 例如：`gemini-1.5-flash-latest:search`
2. **OpenAI（需申请密钥，免费账号可以使用免费模型）**：

   * 访问[https://platform.openai.com/api-keys](https://platform.openai.com/api-keys)申请你的API密钥。
   * 在Anywhere应用中填入URL：`https://api.openai.com/v1`。
   * 在Anywhere应用中填入KEY：`你的密钥`。
   * 免费使用 `gpt-4o-mini`（支持读取PDF！）
3. **OpenRouter（推荐免费体验）**：

   * 访问[https://openrouter.ai](https://openrouter.ai)申请你的API密钥。
   * 在Anywhere应用中填入URL：`https://openrouter.ai/api/v1`。
   * 在Anywhere应用中填入KEY：`你的密钥`。
4. **Pollinations（无需密钥）**：

   * 直接在Anywhere应用中填入URL：`https://text.pollinations.ai/openai`，即可轻松体验OpenAI模型，无需额外配置密钥
   * 在 `https://auth.pollinations.ai`页面获取token（即密钥），或者忽视这一步
   * `openai-audio`支持语音回复，选择OpenAI支持的声音即可语音聊天

**作者常用提示词库**：
访问 `https://komorebi.141277.xyz`获取并使用作者常用的提示词库（需网络访问GitHub）。

推荐以下MCP平台：

* [魔搭（ModelScope）MCP平台](https://modelscope.cn/mcp)，建议只是用其hosted的MCP服务，需要本地部署的MCP服务能在其他平台找到更好的~
* [Lobehub平台的MCP市场](https://lobehub.com/zh/mcp)，精选MCP，甚至还有评分机制，推荐~
* [MCP Hub](https://mcphub.com/mcp-servers)，提供大量云端MCP，注册后即可使用，（50000次工具调用额度，可以自己部署），推荐~
* [Glama平台的MCP市场](https://glama.ai/mcp/servers)，大而全，也有评分机制，推荐~
* [GitHub MCP推荐](https://github.com/punkpeye/awesome-mcp-servers/blob/main/README-zh.md)，GitHub公开MCP推荐仓库，值得参考

---

## 💡 核心功能亮点

### 一、便捷智能交互

1. **一键调用AI**：
   * 设置快捷助手后，可通过功能指令、匹配指令或自定义快捷键快速打开对话窗口。
   * **智能输入**：选中或复制文本/文件，或截图后，调用快捷方式即可快速处理。截图型助手在无图片输入时会自动调用截图功能。
   * **窗口模式**下，打开文件不会立即发送，可在快捷助手中配置是否直接发送。
2. **多模态与语音交互**：
   * **语音输入**：点击麦克风按钮可选择 **🎙️ 麦克风** 或 **💻 系统音频** 作为音源，实现更灵活的语音输入。
   * **语音输出**：为快捷助手配置默认声音角色后，AI的回复将以语音形式播放，并支持在对话界面中暂停、重播。
3. **灵活输出模式**：AI生成结果可直接作为文本输入到当前应用中、复制到剪贴板，或通过独立的窗口模式展示。
4. **全新输入框体验**：对话窗口输入框采用全新垂直布局，**重新聚焦窗口时，输入框会自动激活并恢复上次的光标位置，无缝衔接你的思路**。

### 二、沉浸式对话与显示

1. **多轮对话追问**：窗口模式支持持续的对话交流，你可直接输入文字、粘贴图片或拖拽上传文件。通过 **`Enter` 或 `Ctrl+Enter`（可在设置中切换）**发送信息。
2. **对话编辑与调整**：
   * **消息编辑**：支持直接编辑已发送的用户消息或AI回复，方便对上下文进行微调和修正。
   * **系统提示词编辑**：在对话中可随时编辑当前助手的系统提示词。如果当前对话并非基于已保存的快捷助手，编辑后会自动为你创建一个新的快捷助手。
3. **丰富内容渲染**：
   * 支持Markdown渲染，包括**公式(KaTeX)**、**流程图(Mermaid)**、代码高亮和可交互的HTML内容。
   * **视觉优化**：用户与AI的对话气泡增加了颜色区分，上下文更分明；代码块顶部和底部提供一键复制按钮。
4. **舒适视觉体验**：支持全局**浅色/暗色主题切换**，并优化了主题样式，向OpenAI风格看齐。
5. **对话管理**：支持**无记忆对话**、**对话折叠/展开**，方便快速浏览上下文。

### 三、高度自定义与管理

1. **数据云同步与本地管理**：
   * **本地对话管理**：在设置中指定本地路径后，可直接管理本地对话记录，并与云端（WebDAV）进行同步。
   * **重要对话自动保存**：对于已命名（通过加载或保存）的对话，每隔15秒会自动保存到本地，防止内容丢失。
   * **数据导入导出**：支持用户配置数据的导出与导入，支持**WebDAV**云端备份与恢复。
2. **个性化快捷助手**：
   * 支持自定义提示词，并可根据发送内容类型（文字、截图、文件和通用）选择不同的提交方式。
   * **图标管理**：支持自定义快捷助手图标，并可下载已设置的图标进行备份。
   * **批量模型替换**：在服务商更新模型后，可在快捷助手页面一键替换所有使用旧模型的助手。
3. **服务商与模型管理**：
   * 支持配置兼容OpenAI API格式的自定义API地址和模型。
   * **多密钥轮询**：支持设置多个API密钥（英文逗号分隔），Anywhere将随机调用，提高可用性。
   * **模型拖拽排序**：在服务商页面，可拖拽模型列表进行排序。
4. **自定义UI外观**：
   * **设置页面采用全新的卡片式设计**，布局更清晰、更易用。
   * 支持自定义快捷助手分类标签，打造专属的操作界面。
   * **支持在设置中自定义管理可用的声音角色列表**。

### 四、个性化窗口设置

1. **独立窗口配置**：每个快捷助手都可以独立配置其窗口行为，包括**默认大小、出现位置、是否置顶、是否在失焦后自动消失**以及是否开启流式传输。
2. **全局控制与固定位置**：设置页面的“全局窗口置顶”和“全局失焦关闭”可一键应用到所有快捷助手。启用“固定窗口位置”后，点击模型名称左侧图标可更新默认窗口的出现位置。
3. **智能滚动与导航**：当你向上滚动查看历史记录时，右下角会浮现导航按钮，帮助你快速定位到**上一条/下一条消息**，或**一键返回对话底部**。
4. **窗口缩放**：在独立对话窗口中，按住 `Ctrl` 并滚动鼠标滚轮，可以实时缩放窗口内容。窗口的缩放比例会自动保存。

### 五、高级功能：MCP (模型上下文协议)

1. **基于 Function Call**：Anywhere 重磅集成 MCP 功能，基于精准的 Function Calling 实现，而非传统的提示词工程，让AI能够更高效、更准确地调用外部工具。
2. **资源管理优化**：采用随用随加载的策略，巧妙绕过 uTools 对持久连接数量（5个）的限制。现在你可以配置任意数量的 MCP 服务，Anywhere 会智能管理连接，保证流畅体验。
3. **默认服务关联**：可在快捷助手中设置“默认MCP服务”，启动独立窗口时将自动加载并关联指定的工具。

### 六、支持的文件类型

1. **多文件处理**：支持通过**拖拽、粘贴、上传**方式同时处理多个文件。
2. **可自动解析为文本**的文件：
   * 常规文本文档：`.txt`, `.md`, `.markdown`, `.json`, `.xml`, `.html`, `.css`, `.csv`
   * Office文档：**`.docx`**, **`.xlsx`**, **`.xls`**
   * 各类代码文件：`.py`, `.js`, `.ts`, `.java`, `.c`, `.cpp`, `.h`, `.hpp`, `.cs`, `.go`, `.php`, `.rb`, `.rs`, `.sh`, `.sql`, `.vue`
3. 需要**模型支持（多模态）**的文件：
   * 图片文件：`.png`, `.jpg`, `.jpeg`, `.webp`
   * 音频文件：`.mp3`, `.wav`
   * 文档文件：`.pdf`（**提示：PDF文件现已优化，调用模型原生接口处理，效果更佳**）
   * 对于对话记录的 `.json`文件，使用窗口模式加载将会直接打开保存的对话，而非新的对话，注意继续对话不会更改已保存的对话。

### 七、语音输出模型声音角色（个人总结+网络摘录，欢迎分享补充）

> 注意输入声音ID，如 `alloy`，而不是 `Alloy`，可用 `声音-自定义描述`格式记录，有效部分为连接符前半部分

1. **OpenAI**：

```json
   [
      "alloy-👩",
      "echo-👨‍🦰清晰",
      "nova-👩清晰",
      "sage-👧年轻",
      "shimmer-👧明亮",
      "fable-😐中性",
      "coral-👩客服",
      "ash-🧔‍♂️商业",
      "ballad-👨故事",
      "verse-👨诗歌",
      "onyx-👨‍🦰新闻"
   ]
```

2. **Gemini**：

```json
   [
      "Zephyr-👧明亮",
      "Puck-👦欢快",
      "Charon-👦信息丰富",
      "Kore-👩坚定",
      "Fenrir-👨‍🦰易激动",
      "Leda-👧年轻",
      "Orus-👨‍🦰鉴定",
      "Aoede-👩轻松",
      "Callirrhoe-👩随和",
      "Autonoe-👩明亮",
      "Enceladus-🧔‍♂️呼吸感",
      "Iapetus-👦清晰",
      "Umbriel-👦随和",
      "Algieba-👦平滑",
      "Despina-👩平滑",
      "Erinome-👩清晰",
      "Algenib-👨‍🦰沙哑",
      "Rasalgethi-👨‍🦰信息丰富",
      "Laomedeia-👩欢快",
      "Achernar-👩轻柔",
      "Alnilam-👦坚定",
      "Schedar-👦平稳",
      "Gacrux-👩成熟",
      "Pulcherrima-👩向前",
      "Achird-👦友好",
      "Zubenelgenubi-👦休闲",
      "Vindemiatrix-👩温柔",
      "Sadachbia-👨‍🦰活泼",
      "Sadaltager-👨‍🦰博学",
      "Sulafat-👩温暖"
   ]
```

---

## ✨ 页面展示

![快捷输入模式](image/快捷输入模式-深色.gif)

*输入框模式功能*

![独立窗口模式](image/独立对话窗口界面.gif)
![自定义背景图片](image/背景图片示例.png)

*窗口模式示例*

![指令调用](image/指令调用.png)

*指令调用*

![快捷调用方法](image/快捷调用方法.png)

*快捷调用方法*

![云端对话管理页面](image/对话管理界面.png)

*对话管理页面（本地|云端）*

![快捷助手界面](image/快捷助手界面.png)

*快捷助手页面*

![MCP管理界面](image/MCP管理界面.png)

*MCP管理页面*

![服务商页面](image/服务商界面.png)

*服务商页面*

![设置界面](image/设置界面.png)

*设置界面*

---

## ⚠️ 注意事项

1. **虚拟机兼容性**：Anywhere使用utools内置API实现模拟输入，可能对虚拟机环境兼容性不佳，自动输入可能导致文本重复，请避免在虚拟机中使用。
2. **Markdown输出冲突**：由于AI自动回复默认是Markdown格式，且大多Markdown软件会自动补全用户格式（例如列表尾部换行后自动增加序号，而AI的回复并不会注意到这一点）。在选择“输入框”模式时，这可能产生冲突，建议使用Markdown的源码模式来避免。
3. **独立窗口与设置**：当开启“自动分离为独立窗口”功能时，文本生成期间导致设置界面弹出。
4. **文件上传报错**：上传的模型不支持的文件类型可能会导致AI处理报错，请确保选择的模型与文件类型兼容，也请注意是否是文件格式保存错误（例如mp3文件名称为wav，此时上传可能出错）。
5. **对话窗口关闭**：如果设置页面分离，关闭设置页面，如果此时有开启的对话窗口，也会一并关闭。
6. **配置保存失败**：Utools数据库具有大小限制，请尽可能控制快捷助手图标大小，建议为128x128或更小。
7. **Stdio 类型 MCP**：部分情况下，指令可能需要设置为绝对路径，例如 `node`设置为 `/user/local/bin/node`。
8. **Windows10窗口边缘不显示**：更新系统设置：https://jingyan.baidu.com/article/90bc8fc8281fd6b753640cc2.html

---

## 📖 其他参考

获取Utools插件地址，请访问：
[AI Anywhere插件地址](https://www.u-tools.cn/plugins/detail/AI%20Anywhere/)

获取更详细的功能介绍、配置步骤和使用技巧，请访问：
[Anywhere 教程](https://github.com/Komorebi-yaodong/Anywhere/blob/main/Tutorial.md)

参考作者使用的提示词（来源于自己设计/网络收集），请访问：
[Anywhere 提示词（一直更新）](https://komorebi.141277.xyz/post?file=posts%2F5.md)

---

## 🔄 更新日志

### 2025-12-07

- **新增**
  - 独立对话窗口增加**搜索功能**，Ctrl/Cmd+F 唤醒
  - 独立对话窗口增加**导出html文档**的功能
  - 独立对话窗口增加**置顶按钮**
  - 文本输入模式可以**自定义正则匹配**
  - 适配**各种快捷键**
  - 对**XSS**与**CSRF**攻击的防范
  - **中转站**支持**gemini-3-pro**，可在AI Anywhere中使用！
- **优化**
  - 界面大优化！
  - 优化MCP连接方式，支持**自动批准功能**
  - 独立对话窗口的 **MCP服务弹窗** 打开时将自动拉取最新配置
  - 独立对话窗口的 **模型设置弹窗** 打开时将自动拉取最新配置

### 2025-11-07

- **新增**
  - **本地对话管理**：支持在设置中指定本地对话存储路径，可直接管理本地对话记录，并与云端(WebDAV)自动同步最新聊天记录。
  - **重要对话自动保存**：对于已命名（通过加载或保存）的对话，每隔15秒会自动保存到本地，防止内容丢失。
  - **截图智能调用**：通过截图调用快捷助手时，若未选中/复制图片，将自动打开截图功能。
  - 支持从设置页面直接打开快捷助手对话窗口。
- **优化**
  - **界面优化**：优化了快捷助手、MCP配置页面的信息密度与显示效果，管理更舒适。
  - 优化了窗口最大宽度限制。

### 2025-11-04

- **新增**
  - **MCP (模型上下文协议)**：重磅升级，基于精准高效的 Function Calling 实现，非传统提示词工程。
  - **默认MCP服务**：快捷助手新增“默认MCP服务”选项，独立窗口启动时可自动关联MCP工具。
- **优化**
  - **资源管理**：优化MCP工具加载策略，采用随用随加载方式，缓解Utools对MCP加载数量（5个）的限制，变为最多同时使用5个MCP。
  - **稳定性**：增加随机密钥重试请求功能，提高API调用稳定性。
  - **兼容性**：兼容各种不规范表述的 `streamable http` 格式。
  - **体验优化**：切换模型界面、快捷助手对话窗口支持搜索功能；独立窗口提示消息支持点击消除。
- **修复**
  - 修复了独立窗口折叠状态下删除消息时，窗口会自动展开的错误。
  - 修复了思考气泡消失、导入对话记录后清除历史导致系统提示词被清除、失焦自动关闭失效、环境变量不起效果等多个Bug。

### 2025-10-22

- **优化**
  - **AI调用**：优化AI调用功能，改用 `openai`库。
  - **体验优化**：优化对话中保存系统提示词的功能及其滚动条；快捷助手设置页面右下角增加刷新按钮。
- **通知**
  - 插件更换新Logo！
  - 作者的免费中转站新增备用URL。

### 2025-10-13

- **新增**
  - **对话编辑**：增加编辑已发送消息的功能，方便调教AI。
  - **动态系统提示词**：支持在对话中编辑系统提示词，若本地没有对应的快捷助手，会自动创建。
- **优化**
  - **主题与显示**：主题样式向OpenAI靠齐，优化图片显示。
- **通知**
  - 作者的中转站新增模型后缀功能（`:search`, `:url`, `:execode`）。

### 2025-09-26

- **优化**
  - **模型管理**：快捷助手界面增加模型替换功能，可批量替换旧模型。
  - **排序功能**：服务商配置界面支持拖拽调整模型顺序。

### 2025-08-08 ~ 2025-09-25

- **新增**
  - **语音输入源选择**：发送语音时，能够选择 **🎙️ 麦克风** 或 **💻 系统音频** 作为音源。
  - **对话气泡渲染**：使用 `element-plus-x`库渲染对话气泡，支持预览Mermaid图表与HTML代码。
  - **快捷助手图标下载**：支持下载已设置的快捷助手图标。
- **优化**
  - **快捷助手独立配置**：每个快捷助手可独立配置窗口大小、位置、流式传输、失焦关闭及窗口置顶等行为。
  - **智能滚动优化**：对话窗口新增上下文导航按钮，可快速跳转至上/下条消息或返回底部。
  - **视觉体验提升**：用户与AI的对话气泡增加颜色区分；优化公式显示和代码框颜色。
  - **输入框聚焦优化**：重新聚焦对话窗口时，输入框光标将自动恢复到上次离开时的位置。
  - **数据存储**：优化了数据存储结构。
- **修复**
  - 修复了输入法兼容性、配置竞争、空白快捷助手标签无法删除、删除消息后界面卡顿、模型参数配置、HTML渲染不全、语音连续对话等多个问题。

---

## 📄 许可证

本项目采用 [MIT License](LICENSE) 开源。

---
